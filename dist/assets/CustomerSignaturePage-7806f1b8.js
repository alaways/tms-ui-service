var Js=Object.defineProperty;var Zs=(u,m,bt)=>m in u?Js(u,m,{enumerable:!0,configurable:!0,writable:!0,value:bt}):u[m]=bt;var Qe=(u,m,bt)=>(Zs(u,typeof m!="symbol"?m+"":m,bt),bt),Ii=(u,m,bt)=>{if(!m.has(u))throw TypeError("Cannot "+bt)};var t=(u,m,bt)=>(Ii(u,m,"read from private field"),bt?bt.call(u):m.get(u)),W=(u,m,bt)=>{if(m.has(u))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(u):m.set(u,bt)},ft=(u,m,bt,g)=>(Ii(u,m,"write to private field"),g?g.call(u,bt):m.set(u,bt),bt);var $n=(u,m,bt,g)=>({set _(x){ft(u,m,x,bt)},get _(){return t(u,m,g)}}),tt=(u,m,bt)=>(Ii(u,m,"access private method"),bt);import{ai as commonjsRequire,r as reactExports,j as jsx,an as useParams,ar as useLocation,a as useDispatch,u as useNavigate,c as useGlobalMutation,aB as setPageTitleOnly,f as jsxs,F as Fragment,h as hooks,g as url_api}from"./index-a90aa29c.js";import{S as Swal}from"./sweetalert2.all-ca2d1030.js";import{S as SignatureCanvas}from"./index-125b8661.js";import{b as useUploadSignMutation}from"./useUploadMutation-785f6dd6.js";import{P as PreLoading}from"./preLoading-b2445d9d.js";import{I as IconRefresh}from"./IconRefresh-fed8c080.js";import{I as IconX}from"./IconX-54a3093e.js";import{r as require$$5}from"./___vite-browser-external_commonjs-proxy-c0b878f1.js";import{P as PDFDocument}from"./PDFButton-df4883da.js";import{I as IconDownload}from"./IconDownload-679eea58.js";import{q as qe,_ as _t}from"./transition-d4ca4cfa.js";import"./createSuper-98fcd92d.js";import"./keyboard-f171a3e5.js";import"./use-is-mounted-22b05dcc.js";import"./bugs-a60d55c3.js";var lib={exports:{}},core_min={},pdf={exports:{}};(function(module,exports){(function(m,bt){module.exports=m.pdfjsLib=bt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(u,m)=>{var Ce;Object.defineProperty(m,"__esModule",{value:!0}),m.VerbosityLevel=m.Util=m.UnknownErrorException=m.UnexpectedResponseException=m.TextRenderingMode=m.RenderingIntentFlag=m.PromiseCapability=m.PermissionFlag=m.PasswordResponses=m.PasswordException=m.PageActionEventType=m.OPS=m.MissingPDFException=m.MAX_IMAGE_SIZE_TO_CACHE=m.LINE_FACTOR=m.LINE_DESCENT_FACTOR=m.InvalidPDFException=m.ImageKind=m.IDENTITY_MATRIX=m.FormatError=m.FeatureTest=m.FONT_IDENTITY_MATRIX=m.DocumentActionEventType=m.CMapCompressionType=m.BaseException=m.BASELINE_FACTOR=m.AnnotationType=m.AnnotationReplyType=m.AnnotationPrefix=m.AnnotationMode=m.AnnotationFlag=m.AnnotationFieldFlag=m.AnnotationEditorType=m.AnnotationEditorPrefix=m.AnnotationEditorParamsType=m.AnnotationBorderStyleType=m.AnnotationActionEventType=m.AbortException=void 0,m.assert=At,m.bytesToString=O,m.createValidAbsoluteUrl=Bt,m.getModificationDate=Ut,m.getUuid=ye,m.getVerbosityLevel=et,m.info=pt,m.isArrayBuffer=wt,m.isArrayEqual=Wt,m.isNodeJS=void 0,m.normalizeUnicode=me,m.objectFromMap=St,m.objectSize=mt,m.setVerbosityLevel=k,m.shadow=Vt,m.string32=ct,m.stringToBytes=at,m.stringToPDFString=Tt,m.stringToUTF8String=dt,m.unreachable=$,m.utf8StringToString=ot,m.warn=vt;const bt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");m.isNodeJS=bt;const g=[1,0,0,1,0,0];m.IDENTITY_MATRIX=g;const x=[.001,0,0,.001,0,0];m.FONT_IDENTITY_MATRIX=x;const e=1e7;m.MAX_IMAGE_SIZE_TO_CACHE=e;const Q=1.35;m.LINE_FACTOR=Q;const Pt=.35;m.LINE_DESCENT_FACTOR=Pt;const G=Pt/Q;m.BASELINE_FACTOR=G;const I={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};m.RenderingIntentFlag=I;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};m.AnnotationMode=f;const H="pdfjs_internal_editor_";m.AnnotationEditorPrefix=H;const U={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};m.AnnotationEditorType=U;const T={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};m.AnnotationEditorParamsType=T;const A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};m.PermissionFlag=A;const C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};m.TextRenderingMode=C;const v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};m.ImageKind=v;const E={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};m.AnnotationType=E;const F={GROUP:"Group",REPLY:"R"};m.AnnotationReplyType=F;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};m.AnnotationFlag=M;const P={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};m.AnnotationFieldFlag=P;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};m.AnnotationBorderStyleType=o;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};m.AnnotationActionEventType=d;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};m.DocumentActionEventType=D;const y={O:"PageOpen",C:"PageClose"};m.PageActionEventType=y;const l={ERRORS:0,WARNINGS:1,INFOS:5};m.VerbosityLevel=l;const L={NONE:0,BINARY:1};m.CMapCompressionType=L;const S={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};m.OPS=S;const q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};m.PasswordResponses=q;let Z=l.WARNINGS;function k(yt){Number.isInteger(yt)&&(Z=yt)}function et(){return Z}function pt(yt){Z>=l.INFOS&&console.log(`Info: ${yt}`)}function vt(yt){Z>=l.WARNINGS&&console.log(`Warning: ${yt}`)}function $(yt){throw new Error(yt)}function At(yt,nt){yt||$(nt)}function kt(yt){switch(yt==null?void 0:yt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Bt(yt,nt=null,Y=null){if(!yt)return null;try{if(Y&&typeof yt=="string"){if(Y.addDefaultProtocol&&yt.startsWith("www.")){const Et=yt.match(/\./g);(Et==null?void 0:Et.length)>=2&&(yt=`http://${yt}`)}if(Y.tryConvertEncoding)try{yt=dt(yt)}catch{}}const Lt=nt?new URL(yt,nt):new URL(yt);if(kt(Lt))return Lt}catch{}return null}function Vt(yt,nt,Y,Lt=!1){return Object.defineProperty(yt,nt,{value:Y,enumerable:!Lt,configurable:!0,writable:!1}),Y}const R=function(){function nt(Y,Lt){this.constructor===nt&&$("Cannot initialize BaseException."),this.message=Y,this.name=Lt}return nt.prototype=new Error,nt.constructor=nt,nt}();m.BaseException=R;class i extends R{constructor(nt,Y){super(nt,"PasswordException"),this.code=Y}}m.PasswordException=i;class a extends R{constructor(nt,Y){super(nt,"UnknownErrorException"),this.details=Y}}m.UnknownErrorException=a;class s extends R{constructor(nt){super(nt,"InvalidPDFException")}}m.InvalidPDFException=s;class c extends R{constructor(nt){super(nt,"MissingPDFException")}}m.MissingPDFException=c;class h extends R{constructor(nt,Y){super(nt,"UnexpectedResponseException"),this.status=Y}}m.UnexpectedResponseException=h;class w extends R{constructor(nt){super(nt,"FormatError")}}m.FormatError=w;class _ extends R{constructor(nt){super(nt,"AbortException")}}m.AbortException=_;function O(yt){(typeof yt!="object"||(yt==null?void 0:yt.length)===void 0)&&$("Invalid argument for bytesToString");const nt=yt.length,Y=8192;if(nt<Y)return String.fromCharCode.apply(null,yt);const Lt=[];for(let Et=0;Et<nt;Et+=Y){const Fe=Math.min(Et+Y,nt),We=yt.subarray(Et,Fe);Lt.push(String.fromCharCode.apply(null,We))}return Lt.join("")}function at(yt){typeof yt!="string"&&$("Invalid argument for stringToBytes");const nt=yt.length,Y=new Uint8Array(nt);for(let Lt=0;Lt<nt;++Lt)Y[Lt]=yt.charCodeAt(Lt)&255;return Y}function ct(yt){return String.fromCharCode(yt>>24&255,yt>>16&255,yt>>8&255,yt&255)}function mt(yt){return Object.keys(yt).length}function St(yt){const nt=Object.create(null);for(const[Y,Lt]of yt)nt[Y]=Lt;return nt}function Dt(){const yt=new Uint8Array(4);return yt[0]=1,new Uint32Array(yt.buffer,0,1)[0]===1}function Ct(){try{return new Function(""),!0}catch{return!1}}class $t{static get isLittleEndian(){return Vt(this,"isLittleEndian",Dt())}static get isEvalSupported(){return Vt(this,"isEvalSupported",Ct())}static get isOffscreenCanvasSupported(){return Vt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Vt(this,"platform",{isWin:!1,isMac:!1}):Vt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var nt,Y;return Vt(this,"isCSSRoundSupported",(Y=(nt=globalThis.CSS)==null?void 0:nt.supports)==null?void 0:Y.call(nt,"width: round(1.5px, 1px)"))}}m.FeatureTest=$t;const Qt=[...Array(256).keys()].map(yt=>yt.toString(16).padStart(2,"0"));class Ot{static makeHexColor(nt,Y,Lt){return`#${Qt[nt]}${Qt[Y]}${Qt[Lt]}`}static scaleMinMax(nt,Y){let Lt;nt[0]?(nt[0]<0&&(Lt=Y[0],Y[0]=Y[1],Y[1]=Lt),Y[0]*=nt[0],Y[1]*=nt[0],nt[3]<0&&(Lt=Y[2],Y[2]=Y[3],Y[3]=Lt),Y[2]*=nt[3],Y[3]*=nt[3]):(Lt=Y[0],Y[0]=Y[2],Y[2]=Lt,Lt=Y[1],Y[1]=Y[3],Y[3]=Lt,nt[1]<0&&(Lt=Y[2],Y[2]=Y[3],Y[3]=Lt),Y[2]*=nt[1],Y[3]*=nt[1],nt[2]<0&&(Lt=Y[0],Y[0]=Y[1],Y[1]=Lt),Y[0]*=nt[2],Y[1]*=nt[2]),Y[0]+=nt[4],Y[1]+=nt[4],Y[2]+=nt[5],Y[3]+=nt[5]}static transform(nt,Y){return[nt[0]*Y[0]+nt[2]*Y[1],nt[1]*Y[0]+nt[3]*Y[1],nt[0]*Y[2]+nt[2]*Y[3],nt[1]*Y[2]+nt[3]*Y[3],nt[0]*Y[4]+nt[2]*Y[5]+nt[4],nt[1]*Y[4]+nt[3]*Y[5]+nt[5]]}static applyTransform(nt,Y){const Lt=nt[0]*Y[0]+nt[1]*Y[2]+Y[4],Et=nt[0]*Y[1]+nt[1]*Y[3]+Y[5];return[Lt,Et]}static applyInverseTransform(nt,Y){const Lt=Y[0]*Y[3]-Y[1]*Y[2],Et=(nt[0]*Y[3]-nt[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/Lt,Fe=(-nt[0]*Y[1]+nt[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/Lt;return[Et,Fe]}static getAxialAlignedBoundingBox(nt,Y){const Lt=this.applyTransform(nt,Y),Et=this.applyTransform(nt.slice(2,4),Y),Fe=this.applyTransform([nt[0],nt[3]],Y),We=this.applyTransform([nt[2],nt[1]],Y);return[Math.min(Lt[0],Et[0],Fe[0],We[0]),Math.min(Lt[1],Et[1],Fe[1],We[1]),Math.max(Lt[0],Et[0],Fe[0],We[0]),Math.max(Lt[1],Et[1],Fe[1],We[1])]}static inverseTransform(nt){const Y=nt[0]*nt[3]-nt[1]*nt[2];return[nt[3]/Y,-nt[1]/Y,-nt[2]/Y,nt[0]/Y,(nt[2]*nt[5]-nt[4]*nt[3])/Y,(nt[4]*nt[1]-nt[5]*nt[0])/Y]}static singularValueDecompose2dScale(nt){const Y=[nt[0],nt[2],nt[1],nt[3]],Lt=nt[0]*Y[0]+nt[1]*Y[2],Et=nt[0]*Y[1]+nt[1]*Y[3],Fe=nt[2]*Y[0]+nt[3]*Y[2],We=nt[2]*Y[1]+nt[3]*Y[3],st=(Lt+We)/2,Nt=Math.sqrt((Lt+We)**2-4*(Lt*We-Fe*Et))/2,ee=st+Nt||1,zt=st-Nt||1;return[Math.sqrt(ee),Math.sqrt(zt)]}static normalizeRect(nt){const Y=nt.slice(0);return nt[0]>nt[2]&&(Y[0]=nt[2],Y[2]=nt[0]),nt[1]>nt[3]&&(Y[1]=nt[3],Y[3]=nt[1]),Y}static intersect(nt,Y){const Lt=Math.max(Math.min(nt[0],nt[2]),Math.min(Y[0],Y[2])),Et=Math.min(Math.max(nt[0],nt[2]),Math.max(Y[0],Y[2]));if(Lt>Et)return null;const Fe=Math.max(Math.min(nt[1],nt[3]),Math.min(Y[1],Y[3])),We=Math.min(Math.max(nt[1],nt[3]),Math.max(Y[1],Y[3]));return Fe>We?null:[Lt,Fe,Et,We]}static bezierBoundingBox(nt,Y,Lt,Et,Fe,We,st,Nt){const ee=[],zt=[[],[]];let ne,re,Oe,It,ke,te,B,n;for(let it=0;it<2;++it){if(it===0?(re=6*nt-12*Lt+6*Fe,ne=-3*nt+9*Lt-9*Fe+3*st,Oe=3*Lt-3*nt):(re=6*Y-12*Et+6*We,ne=-3*Y+9*Et-9*We+3*Nt,Oe=3*Et-3*Y),Math.abs(ne)<1e-12){if(Math.abs(re)<1e-12)continue;It=-Oe/re,0<It&&It<1&&ee.push(It);continue}B=re*re-4*Oe*ne,n=Math.sqrt(B),!(B<0)&&(ke=(-re+n)/(2*ne),0<ke&&ke<1&&ee.push(ke),te=(-re-n)/(2*ne),0<te&&te<1&&ee.push(te))}let b=ee.length,j;const K=b;for(;b--;)It=ee[b],j=1-It,zt[0][b]=j*j*j*nt+3*j*j*It*Lt+3*j*It*It*Fe+It*It*It*st,zt[1][b]=j*j*j*Y+3*j*j*It*Et+3*j*It*It*We+It*It*It*Nt;return zt[0][K]=nt,zt[1][K]=Y,zt[0][K+1]=st,zt[1][K+1]=Nt,zt[0].length=zt[1].length=K+2,[Math.min(...zt[0]),Math.min(...zt[1]),Math.max(...zt[0]),Math.max(...zt[1])]}}m.Util=Ot;const Zt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Tt(yt){if(yt[0]>="ï"){let Y;if(yt[0]==="þ"&&yt[1]==="ÿ"?Y="utf-16be":yt[0]==="ÿ"&&yt[1]==="þ"?Y="utf-16le":yt[0]==="ï"&&yt[1]==="»"&&yt[2]==="¿"&&(Y="utf-8"),Y)try{const Lt=new TextDecoder(Y,{fatal:!0}),Et=at(yt);return Lt.decode(Et)}catch(Lt){vt(`stringToPDFString: "${Lt}".`)}}const nt=[];for(let Y=0,Lt=yt.length;Y<Lt;Y++){const Et=Zt[yt.charCodeAt(Y)];nt.push(Et?String.fromCharCode(Et):yt.charAt(Y))}return nt.join("")}function dt(yt){return decodeURIComponent(escape(yt))}function ot(yt){return unescape(encodeURIComponent(yt))}function wt(yt){return typeof yt=="object"&&(yt==null?void 0:yt.byteLength)!==void 0}function Wt(yt,nt){if(yt.length!==nt.length)return!1;for(let Y=0,Lt=yt.length;Y<Lt;Y++)if(yt[Y]!==nt[Y])return!1;return!0}function Ut(yt=new Date){return[yt.getUTCFullYear().toString(),(yt.getUTCMonth()+1).toString().padStart(2,"0"),yt.getUTCDate().toString().padStart(2,"0"),yt.getUTCHours().toString().padStart(2,"0"),yt.getUTCMinutes().toString().padStart(2,"0"),yt.getUTCSeconds().toString().padStart(2,"0")].join("")}class ce{constructor(){W(this,Ce,!1);this.promise=new Promise((nt,Y)=>{this.resolve=Lt=>{ft(this,Ce,!0),nt(Lt)},this.reject=Lt=>{ft(this,Ce,!0),Y(Lt)}})}get settled(){return t(this,Ce)}}Ce=new WeakMap,m.PromiseCapability=ce;let pe=null,de=null;function me(yt){return pe||(pe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,de=new Map([["ﬅ","ſt"]])),yt.replaceAll(pe,(nt,Y,Lt)=>Y?Y.normalize("NFKC"):de.get(Lt))}function ye(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const yt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(yt);else for(let nt=0;nt<32;nt++)yt[nt]=Math.floor(Math.random()*255);return O(yt)}const se="pdfjs_internal_id_";m.AnnotationPrefix=se},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var u,bt,g,x,Hn,Q,ci,G,I,f,H,U,T,A,C,v,hi,F,M,Oi,o,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:L}=l,S=y.url?getUrlProp(y.url):null,q=y.data?getDataProp(y.data):null,Z=y.httpHeaders||null,k=y.withCredentials===!0,et=y.password??null,pt=y.range instanceof PDFDataRangeTransport?y.range:null,vt=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let $=y.worker instanceof PDFWorker?y.worker:null;const At=y.verbosity,kt=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,Bt=typeof y.cMapUrl=="string"?y.cMapUrl:null,Vt=y.cMapPacked!==!1,R=y.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,a=y.StandardFontDataFactory||DefaultStandardFontDataFactory,s=y.stopAtErrors!==!0,c=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,h=y.isEvalSupported!==!1,w=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,_=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,O=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,at=y.fontExtraProperties===!0,ct=y.enableXfa===!0,mt=y.ownerDocument||globalThis.document,St=y.disableRange===!0,Dt=y.disableStream===!0,Ct=y.disableAutoFetch===!0,$t=y.pdfBug===!0,Qt=pt?pt.length:y.length??NaN,Ot=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!O,Zt=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:R===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&Bt&&i&&(0,_display_utils.isValidFetchUrl)(Bt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),Tt=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:mt}),dt=y.filterFactory||new DefaultFilterFactory({docId:L,ownerDocument:mt}),ot=null;(0,_util.setVerbosityLevel)(At);const wt={canvasFactory:Tt,filterFactory:dt};if(Zt||(wt.cMapReaderFactory=new R({baseUrl:Bt,isCompressed:Vt}),wt.standardFontDataFactory=new a({baseUrl:i})),!$){const ce={verbosity:At,port:_worker_options.GlobalWorkerOptions.workerPort};$=ce.port?PDFWorker.fromPort(ce):new PDFWorker(ce),l._worker=$}const Wt={docId:L,apiVersion:"3.11.174",data:q,password:et,disableAutoFetch:Ct,rangeChunkSize:vt,length:Qt,docBaseUrl:kt,enableXfa:ct,evaluatorOptions:{maxImageSize:c,disableFontFace:O,ignoreErrors:s,isEvalSupported:h,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:_,fontExtraProperties:at,useSystemFonts:Ot,cMapUrl:Zt?Bt:null,standardFontDataUrl:Zt?i:null}},Ut={ignoreErrors:s,isEvalSupported:h,disableFontFace:O,fontExtraProperties:at,enableXfa:ct,ownerDocument:mt,disableAutoFetch:Ct,pdfBug:$t,styleElement:ot};return $.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const ce=_fetchDocument($,Wt),pe=new Promise(function(de){let me;pt?me=new _transport_stream.PDFDataTransportStream({length:Qt,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:St,disableStream:Dt},pt):q||(me=(se=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(se):(0,_display_utils.isValidFetchUrl)(se.url)?new _displayFetch_stream.PDFFetchStream(se):new _displayNetwork.PDFNetworkStream(se))({url:S,length:Qt,httpHeaders:Z,withCredentials:k,rangeChunkSize:vt,disableRange:St,disableStream:Dt})),de(me)});return Promise.all([ce,pe]).then(function([de,me]){if(l.destroyed)throw new Error("Loading aborted");const ye=new _message_handler.MessageHandler(L,de,$.port),se=new WorkerTransport(ye,l,me,Ut,wt);l._transport=se,ye.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(y,l){if(y.destroyed)throw new Error("Worker was destroyed");const L=await y.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return L}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const m=class m{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${$n(m,u)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,L,S;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((L=this._transport)==null?void 0:L.destroy())}catch(q){throw(S=this._worker)!=null&&S.port&&delete this._worker._pendingDestroy,q}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};u=new WeakMap,W(m,u,0);let PDFDocumentLoadingTask=m;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,L,S=!1,q=null){this.length=l,this.initialData=L,this.progressiveDone=S,this.contentDispositionFilename=q,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,L){for(const S of this._rangeListeners)S(l,L)}onDataProgress(l,L){this._readyCapability.promise.then(()=>{for(const S of this._progressListeners)S(l,L)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const L of this._progressiveReadListeners)L(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,L){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,L){this._pdfInfo=l,this._transport=L,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(S=>{if(!S)return S;const q=[];for(const Z in S)q.push(...S[Z]);return q}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,L,S,q=!1){W(this,x);W(this,Q);W(this,bt,null);W(this,g,!1);this._pageIndex=l,this._pageInfo=L,this._transport=S,this._stats=q?new _display_utils.StatTimer:null,this._pdfBug=q,this.commonObjs=S.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:L=this.rotate,offsetX:S=0,offsetY:q=0,dontFlip:Z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:L,offsetX:S,offsetY:q,dontFlip:Z})}getAnnotations({intent:l="display"}={}){const L=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,L.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:L,intent:S="display",annotationMode:q=_util.AnnotationMode.ENABLE,transform:Z=null,background:k=null,optionalContentConfigPromise:et=null,annotationCanvasMap:pt=null,pageColors:vt=null,printAnnotationStorage:$=null}){var a,s;(a=this._stats)==null||a.time("Overall");const At=this._transport.getRenderingIntent(S,q,$);ft(this,g,!1),tt(this,Q,ci).call(this),et||(et=this._transport.getOptionalContentConfig());let kt=this._intentStates.get(At.cacheKey);kt||(kt=Object.create(null),this._intentStates.set(At.cacheKey,kt)),kt.streamReaderCancelTimeout&&(clearTimeout(kt.streamReaderCancelTimeout),kt.streamReaderCancelTimeout=null);const Bt=!!(At.renderingIntent&_util.RenderingIntentFlag.PRINT);kt.displayReadyCapability||(kt.displayReadyCapability=new _util.PromiseCapability,kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(At));const Vt=c=>{var h,w;kt.renderTasks.delete(R),(this._maybeCleanupAfterRender||Bt)&&ft(this,g,!0),tt(this,x,Hn).call(this,!Bt),c?(R.capability.reject(c),this._abortOperatorList({intentState:kt,reason:c instanceof Error?c:new Error(c)})):R.capability.resolve(),(h=this._stats)==null||h.timeEnd("Rendering"),(w=this._stats)==null||w.timeEnd("Overall")},R=new InternalRenderTask({callback:Vt,params:{canvasContext:l,viewport:L,transform:Z,background:k},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Bt,pdfBug:this._pdfBug,pageColors:vt});(kt.renderTasks||(kt.renderTasks=new Set)).add(R);const i=R.task;return Promise.all([kt.displayReadyCapability.promise,et]).then(([c,h])=>{var w;if(this.destroyed){Vt();return}(w=this._stats)==null||w.time("Rendering"),R.initializeGraphics({transparency:c,optionalContentConfig:h}),R.operatorListChanged()}).catch(Vt),i}getOperatorList({intent:l="display",annotationMode:L=_util.AnnotationMode.ENABLE,printAnnotationStorage:S=null}={}){var pt;function q(){k.operatorList.lastChunk&&(k.opListReadCapability.resolve(k.operatorList),k.renderTasks.delete(et))}const Z=this._transport.getRenderingIntent(l,L,S,!0);let k=this._intentStates.get(Z.cacheKey);k||(k=Object.create(null),this._intentStates.set(Z.cacheKey,k));let et;return k.opListReadCapability||(et=Object.create(null),et.operatorListChanged=q,k.opListReadCapability=new _util.PromiseCapability,(k.renderTasks||(k.renderTasks=new Set)).add(et),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(Z)),k.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:L=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:L===!0},{highWaterMark:100,size(q){return q.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(S=>_xfa_text.XfaText.textContent(S));const L=this.streamTextContent(l);return new Promise(function(S,q){function Z(){k.read().then(function({value:pt,done:vt}){if(vt){S(et);return}Object.assign(et.styles,pt.styles),et.items.push(...pt.items),Z()},q)}const k=L.getReader(),et={items:[],styles:Object.create(null)};Z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const L of this._intentStates.values())if(this._abortOperatorList({intentState:L,reason:new Error("Page was destroyed."),force:!0}),!L.opListReadCapability)for(const S of L.renderTasks)l.push(S.completed),S.cancel();return this.objs.clear(),ft(this,g,!1),tt(this,Q,ci).call(this),Promise.all(l)}cleanup(l=!1){ft(this,g,!0);const L=tt(this,x,Hn).call(this,!1);return l&&L&&this._stats&&(this._stats=new _display_utils.StatTimer),L}_startRenderPage(l,L){var q,Z;const S=this._intentStates.get(L);S&&((q=this._stats)==null||q.timeEnd("Page Request"),(Z=S.displayReadyCapability)==null||Z.resolve(l))}_renderPageChunk(l,L){for(let S=0,q=l.length;S<q;S++)L.operatorList.fnArray.push(l.fnArray[S]),L.operatorList.argsArray.push(l.argsArray[S]);L.operatorList.lastChunk=l.lastChunk,L.operatorList.separateAnnots=l.separateAnnots;for(const S of L.renderTasks)S.operatorListChanged();l.lastChunk&&tt(this,x,Hn).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:L,annotationStorageSerializable:S}){const{map:q,transfers:Z}=S,et=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:L,annotationStorage:q},Z).getReader(),pt=this._intentStates.get(L);pt.streamReader=et;const vt=()=>{et.read().then(({value:$,done:At})=>{if(At){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk($,pt),vt())},$=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const At of pt.renderTasks)At.operatorListChanged();tt(this,x,Hn).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject($);else if(pt.opListReadCapability)pt.opListReadCapability.reject($);else throw $}})};vt()}_abortOperatorList({intentState:l,reason:L,force:S=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!S){if(l.renderTasks.size>0)return;if(L instanceof _display_utils.RenderingCancelledException){let q=RENDERING_CANCELLED_TIMEOUT;L.extraDelay>0&&L.extraDelay<1e3&&(q+=L.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:L,force:!0})},q);return}}if(l.streamReader.cancel(new _util.AbortException(L.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[q,Z]of this._intentStates)if(Z===l){this._intentStates.delete(q);break}this.cleanup()}}}get stats(){return this._stats}}bt=new WeakMap,g=new WeakMap,x=new WeakSet,Hn=function(l=!1){if(tt(this,Q,ci).call(this),!t(this,g)||this.destroyed)return!1;if(l)return ft(this,bt,setTimeout(()=>{ft(this,bt,null),tt(this,x,Hn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:L,operatorList:S}of this._intentStates.values())if(L.size>0||!S.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ft(this,g,!1),!0},Q=new WeakSet,ci=function(){t(this,bt)&&(clearTimeout(t(this,bt)),ft(this,bt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){W(this,G,new Set);W(this,I,Promise.resolve())}postMessage(l,L){const S={data:structuredClone(l,L?{transfer:L}:null)};t(this,I).then(()=>{for(const q of t(this,G))q.call(this,S)})}addEventListener(l,L){t(this,G).add(L)}removeEventListener(l,L){t(this,G).delete(L)}terminate(){t(this,G).clear()}}G=new WeakMap,I=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,l){let L;try{if(L=new URL(y),!L.origin||L.origin==="null")return!1}catch{return!1}const S=new URL(l,L);return L.origin===S.origin},PDFWorkerUtil.createCDNWrapper=function(y){const l=`importScripts("${y}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:l=null,verbosity:L=(0,_util.getVerbosityLevel)()}={}){var S;if(this.name=y,this.destroyed=!1,this.verbosity=L,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((S=t(_PDFWorker,H))!=null&&S.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,H)||ft(_PDFWorker,H,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const l=new Worker(y),L=new _message_handler.MessageHandler("main","worker",l),S=()=>{l.removeEventListener("error",q),L.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},q=()=>{this._webWorker||S()};l.addEventListener("error",q),L.on("test",k=>{if(l.removeEventListener("error",q),this.destroyed){S();return}k?(this._messageHandler=L,this._port=l,this._webWorker=l,this._readyCapability.resolve(),L.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),L.destroy(),l.terminate())}),L.on("ready",k=>{if(l.removeEventListener("error",q),this.destroyed){S();return}try{Z()}catch{this._setupFakeWorker()}});const Z=()=>{const k=new Uint8Array;L.send("test",k,[k.buffer])};Z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const L=`fake${PDFWorkerUtil.fakeWorkerId++}`,S=new _message_handler.MessageHandler(L+"_worker",L,l);y.setup(S,l);const q=new _message_handler.MessageHandler(L,L+"_worker",l);this._messageHandler=q,this._readyCapability.resolve(),q.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=t(_PDFWorker,H))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var L;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(L=t(this,H))==null?void 0:L.get(y.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};H=new WeakMap,W(_PDFWorker,H,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,L,S,q,Z){W(this,v);W(this,U,new Map);W(this,T,new Map);W(this,A,new Map);W(this,C,null);this.messageHandler=l,this.loadingTask=L,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:q.ownerDocument,styleElement:q.styleElement}),this._params=q,this.canvasFactory=Z.canvasFactory,this.filterFactory=Z.filterFactory,this.cMapReaderFactory=Z.cMapReaderFactory,this.standardFontDataFactory=Z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=S,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,L=_util.AnnotationMode.ENABLE,S=null,q=!1){let Z=_util.RenderingIntentFlag.DISPLAY,k=_annotation_storage.SerializableEmpty;switch(l){case"any":Z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(L){case _util.AnnotationMode.DISABLE:Z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,k=(Z&_util.RenderingIntentFlag.PRINT&&S instanceof _annotation_storage.PrintAnnotationStorage?S:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${L}`)}return q&&(Z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Z,cacheKey:`${Z}_${k.hash}`,annotationStorageSerializable:k}}destroy(){var S;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(S=t(this,C))==null||S.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const q of t(this,T).values())l.push(q._destroy());t(this,T).clear(),t(this,A).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const L=this.messageHandler.sendWithPromise("Terminate",null);return l.push(L),Promise.all(l).then(()=>{var q;this.commonObjs.clear(),this.fontLoader.clear(),t(this,U).clear(),this.filterFactory.destroy(),(q=this._networkStream)==null||q.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:L}=this;l.on("GetReader",(S,q)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Z=>{this._lastProgress={loaded:Z.loaded,total:Z.total}},q.onPull=()=>{this._fullReader.read().then(function({value:Z,done:k}){if(k){q.close();return}(0,_util.assert)(Z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),q.enqueue(new Uint8Array(Z),1,[Z])}).catch(Z=>{q.error(Z)})},q.onCancel=Z=>{this._fullReader.cancel(Z),q.ready.catch(k=>{if(!this.destroyed)throw k})}}),l.on("ReaderHeadersReady",S=>{const q=new _util.PromiseCapability,Z=this._fullReader;return Z.headersReady.then(()=>{var k;(!Z.isStreamingSupported||!Z.isRangeSupported)&&(this._lastProgress&&((k=L.onProgress)==null||k.call(L,this._lastProgress)),Z.onProgress=et=>{var pt;(pt=L.onProgress)==null||pt.call(L,{loaded:et.loaded,total:et.total})}),q.resolve({isStreamingSupported:Z.isStreamingSupported,isRangeSupported:Z.isRangeSupported,contentLength:Z.contentLength})},q.reject),q.promise}),l.on("GetRangeReader",(S,q)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Z=this._networkStream.getRangeReader(S.begin,S.end);if(!Z){q.close();return}q.onPull=()=>{Z.read().then(function({value:k,done:et}){if(et){q.close();return}(0,_util.assert)(k instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),q.enqueue(new Uint8Array(k),1,[k])}).catch(k=>{q.error(k)})},q.onCancel=k=>{Z.cancel(k),q.ready.catch(et=>{if(!this.destroyed)throw et})}}),l.on("GetDoc",({pdfInfo:S})=>{this._numPages=S.numPages,this._htmlForXfa=S.htmlForXfa,delete S.htmlForXfa,L._capability.resolve(new PDFDocumentProxy(S,this))}),l.on("DocException",function(S){let q;switch(S.name){case"PasswordException":q=new _util.PasswordException(S.message,S.code);break;case"InvalidPDFException":q=new _util.InvalidPDFException(S.message);break;case"MissingPDFException":q=new _util.MissingPDFException(S.message);break;case"UnexpectedResponseException":q=new _util.UnexpectedResponseException(S.message,S.status);break;case"UnknownErrorException":q=new _util.UnknownErrorException(S.message,S.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}L._capability.reject(q)}),l.on("PasswordRequest",S=>{if(ft(this,C,new _util.PromiseCapability),L.onPassword){const q=Z=>{Z instanceof Error?t(this,C).reject(Z):t(this,C).resolve({password:Z})};try{L.onPassword(q,S.code)}catch(Z){t(this,C).reject(Z)}}else t(this,C).reject(new _util.PasswordException(S.message,S.code));return t(this,C).promise}),l.on("DataLoaded",S=>{var q;(q=L.onProgress)==null||q.call(L,{loaded:S.length,total:S.length}),this.downloadInfoCapability.resolve(S)}),l.on("StartRenderPage",S=>{if(this.destroyed)return;t(this,T).get(S.pageIndex)._startRenderPage(S.transparency,S.cacheKey)}),l.on("commonobj",([S,q,Z])=>{var k;if(!this.destroyed&&!this.commonObjs.has(S))switch(q){case"Font":const et=this._params;if("error"in Z){const $=Z.error;(0,_util.warn)(`Error during font loading: ${$}`),this.commonObjs.resolve(S,$);break}const pt=et.pdfBug&&((k=globalThis.FontInspector)!=null&&k.enabled)?($,At)=>globalThis.FontInspector.fontAdded($,At):null,vt=new _font_loader.FontFaceObject(Z,{isEvalSupported:et.isEvalSupported,disableFontFace:et.disableFontFace,ignoreErrors:et.ignoreErrors,inspectFont:pt});this.fontLoader.bind(vt).catch($=>l.sendWithPromise("FontFallback",{id:S})).finally(()=>{!et.fontExtraProperties&&vt.data&&(vt.data=null),this.commonObjs.resolve(S,vt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(S,Z);break;default:throw new Error(`Got unknown common object type ${q}`)}}),l.on("obj",([S,q,Z,k])=>{var pt;if(this.destroyed)return;const et=t(this,T).get(q);if(!et.objs.has(S))switch(Z){case"Image":if(et.objs.resolve(S,k),k){let vt;if(k.bitmap){const{width:$,height:At}=k;vt=$*At*4}else vt=((pt=k.data)==null?void 0:pt.length)||0;vt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(et._maybeCleanupAfterRender=!0)}break;case"Pattern":et.objs.resolve(S,k);break;default:throw new Error(`Got unknown object type ${Z}`)}}),l.on("DocProgress",S=>{var q;this.destroyed||(q=L.onProgress)==null||q.call(L,{loaded:S.loaded,total:S.total})}),l.on("FetchBuiltInCMap",S=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(S):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",S=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(S):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var S;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:L}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:((S=this._fullReader)==null?void 0:S.filename)??null},L).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const L=l-1,S=t(this,A).get(L);if(S)return S;const q=this.messageHandler.sendWithPromise("GetPage",{pageIndex:L}).then(Z=>{if(this.destroyed)throw new Error("Transport destroyed");const k=new PDFPageProxy(L,Z,this,this._params.pdfBug);return t(this,T).set(L,k),k});return t(this,A).set(L,q),q}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,L){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:L})}getFieldObjects(){return tt(this,v,hi).call(this,"GetFieldObjects")}hasJSActions(){return tt(this,v,hi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return tt(this,v,hi).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",L=t(this,U).get(l);if(L)return L;const S=this.messageHandler.sendWithPromise(l,null).then(q=>{var Z,k;return{info:q[0],metadata:q[1]?new _metadata.Metadata(q[1]):null,contentDispositionFilename:((Z=this._fullReader)==null?void 0:Z.filename)??null,contentLength:((k=this._fullReader)==null?void 0:k.contentLength)??null}});return t(this,U).set(l,S),S}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const L of t(this,T).values())if(!L.cleanup())throw new Error(`startCleanup: Page ${L.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),t(this,U).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:L}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:L})}}U=new WeakMap,T=new WeakMap,A=new WeakMap,C=new WeakMap,v=new WeakSet,hi=function(l,L=null){const S=t(this,U).get(l);if(S)return S;const q=this.messageHandler.sendWithPromise(l,L);return t(this,U).set(l,q),q};class PDFObjects{constructor(){W(this,M);W(this,F,Object.create(null))}get(l,L=null){if(L){const q=tt(this,M,Oi).call(this,l);return q.capability.promise.then(()=>L(q.data)),null}const S=t(this,F)[l];if(!(S!=null&&S.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return S.data}has(l){const L=t(this,F)[l];return(L==null?void 0:L.capability.settled)||!1}resolve(l,L=null){const S=tt(this,M,Oi).call(this,l);S.data=L,S.capability.resolve()}clear(){var l;for(const L in t(this,F)){const{data:S}=t(this,F)[L];(l=S==null?void 0:S.bitmap)==null||l.close()}ft(this,F,Object.create(null))}}F=new WeakMap,M=new WeakSet,Oi=function(l){var L;return(L=t(this,F))[l]||(L[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){W(this,o,null);ft(this,o,l),this.onContinue=null}get promise(){return t(this,o).capability.promise}cancel(l=0){t(this,o).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=t(this,o).operatorList;if(!l)return!1;const{annotationCanvasMap:L}=t(this,o);return l.form||l.canvas&&(L==null?void 0:L.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const D=class D{constructor({callback:l,params:L,objs:S,commonObjs:q,annotationCanvasMap:Z,operatorList:k,pageIndex:et,canvasFactory:pt,filterFactory:vt,useRequestAnimationFrame:$=!1,pdfBug:At=!1,pageColors:kt=null}){this.callback=l,this.params=L,this.objs=S,this.commonObjs=q,this.annotationCanvasMap=Z,this.operatorListIdx=null,this.operatorList=k,this._pageIndex=et,this.canvasFactory=pt,this.filterFactory=vt,this._pdfBug=At,this.pageColors=kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=$===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=L.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:L}){var et,pt;if(this.cancelled)return;if(this._canvas){if(t(D,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(D,d).add(this._canvas)}this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:S,viewport:q,transform:Z,background:k}=this.params;this.gfx=new _canvas.CanvasGraphics(S,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:L},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Z,viewport:q,transparency:l,background:k}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(l=null,L=0){var S;this.running=!1,this.cancelled=!0,(S=this.gfx)==null||S.endDrawing(),t(D,d).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,L))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(D,d).delete(this._canvas),this.callback())))}};d=new WeakMap,W(D,d,new WeakSet);let InternalRenderTask=D;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(u,m,bt)=>{var I,f,H,Dr,T;Object.defineProperty(m,"__esModule",{value:!0}),m.SerializableEmpty=m.PrintAnnotationStorage=m.AnnotationStorage=void 0;var g=bt(1),x=bt(4),e=bt(8);const Q=Object.freeze({map:null,hash:"",transfers:void 0});m.SerializableEmpty=Q;class Pt{constructor(){W(this,H);W(this,I,!1);W(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,v){const E=t(this,f).get(C);return E===void 0?v:Object.assign(v,E)}getRawValue(C){return t(this,f).get(C)}remove(C){if(t(this,f).delete(C),t(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const v of t(this,f).values())if(v instanceof x.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,v){const E=t(this,f).get(C);let F=!1;if(E!==void 0)for(const[M,P]of Object.entries(v))E[M]!==P&&(F=!0,E[M]=P);else F=!0,t(this,f).set(C,v);F&&tt(this,H,Dr).call(this),v instanceof x.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(v.constructor._type)}has(C){return t(this,f).has(C)}getAll(){return t(this,f).size>0?(0,g.objectFromMap)(t(this,f)):null}setAll(C){for(const[v,E]of Object.entries(C))this.setValue(v,E)}get size(){return t(this,f).size}resetModified(){t(this,I)&&(ft(this,I,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G(this)}get serializable(){if(t(this,f).size===0)return Q;const C=new Map,v=new e.MurmurHash3_64,E=[],F=Object.create(null);let M=!1;for(const[P,o]of t(this,f)){const d=o instanceof x.AnnotationEditor?o.serialize(!1,F):o;d&&(C.set(P,d),v.update(`${P}:${JSON.stringify(d)}`),M||(M=!!d.bitmap))}if(M)for(const P of C.values())P.bitmap&&E.push(P.bitmap);return C.size>0?{map:C,hash:v.hexdigest(),transfers:E}:Q}}I=new WeakMap,f=new WeakMap,H=new WeakSet,Dr=function(){t(this,I)||(ft(this,I,!0),typeof this.onSetModified=="function"&&this.onSetModified())},m.AnnotationStorage=Pt;class G extends Pt{constructor(v){super();W(this,T,void 0);const{map:E,hash:F,transfers:M}=v.serializable,P=structuredClone(E,M?{transfer:M}:null);ft(this,T,{map:P,hash:F,transfers:M})}get print(){(0,g.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,T)}}T=new WeakMap,m.PrintAnnotationStorage=G},(u,m,bt)=>{var G,I,f,H,U,T,A,C,v,E,F,M,P,o,d,Ni,y,Bi,L,ji,q,Ui,k,Ir,pt,Or,$,Nr,kt,Hi,Vt,Br;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditor=void 0;var g=bt(5),x=bt(1),e=bt(6);const i=class i{constructor(s){W(this,d);W(this,y);W(this,q);W(this,k);W(this,pt);W(this,$);W(this,kt);W(this,Vt);W(this,G,"");W(this,I,!1);W(this,f,null);W(this,H,null);W(this,U,null);W(this,T,!1);W(this,A,null);W(this,C,this.focusin.bind(this));W(this,v,this.focusout.bind(this));W(this,E,!1);W(this,F,!1);W(this,M,!1);Qe(this,"_initialOptions",Object.create(null));Qe(this,"_uiManager",null);Qe(this,"_focusEventsAllowed",!0);Qe(this,"_l10nPromise",null);W(this,P,!1);W(this,o,i._zIndex++);this.constructor===i&&(0,x.unreachable)("Cannot initialize AnnotationEditor."),this.parent=s.parent,this.id=s.id,this.width=this.height=null,this.pageIndex=s.parent.pageIndex,this.name=s.name,this.div=null,this._uiManager=s.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=s.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:h,pageHeight:w,pageX:_,pageY:O}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[h,w],this.pageTranslation=[_,O];const[at,ct]=this.parentDimensions;this.x=s.x/at,this.y=s.y/ct,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,x.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(s){const c=new Pt({id:s.parent.getNextId(),parent:s.parent,uiManager:s._uiManager});c.annotationElementId=s.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(s,c=null){if(i._l10nPromise||(i._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(w=>[w,s.get(w)]))),c!=null&&c.strings)for(const w of c.strings)i._l10nPromise.set(w,s.get(w));if(i._borderLineWidth!==-1)return;const h=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(h.getPropertyValue("--outline-width"))||0}static updateDefaultParams(s,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(s){return!1}static paste(s,c){(0,x.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,P)}set _isDraggable(s){var c;ft(this,P,s),(c=this.div)==null||c.classList.toggle("draggable",s)}center(){const[s,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(s*2),this.y+=this.width*s/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(s*2),this.y-=this.width*s/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(s){this._uiManager.addCommands(s)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,o)}setParent(s){s!==null&&(this.pageIndex=s.pageIndex,this.pageDimensions=s.pageDimensions),this.parent=s}focusin(s){this._focusEventsAllowed&&(t(this,E)?ft(this,E,!1):this.parent.setSelected(this))}focusout(s){var h;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=s.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(s.preventDefault(),(h=this.parent)!=null&&h.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(s,c,h,w){const[_,O]=this.parentDimensions;[h,w]=this.screenToPageTranslation(h,w),this.x=(s+h)/_,this.y=(c+w)/O,this.fixAndSetPosition()}translate(s,c){tt(this,d,Ni).call(this,this.parentDimensions,s,c)}translateInPage(s,c){tt(this,d,Ni).call(this,this.pageDimensions,s,c),this.div.scrollIntoView({block:"nearest"})}drag(s,c){const[h,w]=this.parentDimensions;if(this.x+=s/h,this.y+=c/w,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:mt,y:St}=this.div.getBoundingClientRect();this.parent.findNewParent(this,mt,St)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:_,y:O}=this;const[at,ct]=tt(this,y,Bi).call(this);_+=at,O+=ct,this.div.style.left=`${(100*_).toFixed(2)}%`,this.div.style.top=`${(100*O).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[s,c]=this.pageDimensions;let{x:h,y:w,width:_,height:O}=this;switch(_*=s,O*=c,h*=s,w*=c,this.rotation){case 0:h=Math.max(0,Math.min(s-_,h)),w=Math.max(0,Math.min(c-O,w));break;case 90:h=Math.max(0,Math.min(s-O,h)),w=Math.min(c,Math.max(_,w));break;case 180:h=Math.min(s,Math.max(_,h)),w=Math.min(c,Math.max(O,w));break;case 270:h=Math.min(s,Math.max(O,h)),w=Math.max(0,Math.min(c-_,w));break}this.x=h/=s,this.y=w/=c;const[at,ct]=tt(this,y,Bi).call(this);h+=at,w+=ct;const{style:mt}=this.div;mt.left=`${(100*h).toFixed(2)}%`,mt.top=`${(100*w).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(s,c){var h;return tt(h=i,L,ji).call(h,s,c,this.parentRotation)}pageTranslationToScreen(s,c){var h;return tt(h=i,L,ji).call(h,s,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:s,pageDimensions:[c,h]}=this,w=c*s,_=h*s;return x.FeatureTest.isCSSRoundSupported?[Math.round(w),Math.round(_)]:[w,_]}setDims(s,c){var _;const[h,w]=this.parentDimensions;this.div.style.width=`${(100*s/h).toFixed(2)}%`,t(this,T)||(this.div.style.height=`${(100*c/w).toFixed(2)}%`),(_=t(this,f))==null||_.classList.toggle("small",s<i.SMALL_EDITOR_SIZE||c<i.SMALL_EDITOR_SIZE)}fixDims(){const{style:s}=this.div,{height:c,width:h}=s,w=h.endsWith("%"),_=!t(this,T)&&c.endsWith("%");if(w&&_)return;const[O,at]=this.parentDimensions;w||(s.width=`${(100*parseFloat(h)/O).toFixed(2)}%`),!t(this,T)&&!_&&(s.height=`${(100*parseFloat(c)/at).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,f))return;const s=ft(this,f,document.createElement("button"));s.className="altText";const c=await i._l10nPromise.get("editor_alt_text_button_label");s.textContent=c,s.setAttribute("aria-label",c),s.tabIndex="0",s.addEventListener("contextmenu",e.noContextMenu),s.addEventListener("pointerdown",h=>h.stopPropagation()),s.addEventListener("click",h=>{h.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),s.addEventListener("keydown",h=>{h.target===s&&h.key==="Enter"&&(h.preventDefault(),this._uiManager.editAltText(this))}),tt(this,kt,Hi).call(this),this.div.append(s),i.SMALL_EDITOR_SIZE||(i.SMALL_EDITOR_SIZE=Math.min(128,Math.round(s.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,G),decorative:t(this,I)}}set altTextData({altText:s,decorative:c}){t(this,G)===s&&t(this,I)===c||(ft(this,G,s),ft(this,I,c),tt(this,kt,Hi).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,C)),this.div.addEventListener("focusout",t(this,v));const[s,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/c).toFixed(2)}%`);const[h,w]=this.getInitialTranslation();return this.translate(h,w),(0,g.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(s){const{isMac:c}=x.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&c){s.preventDefault();return}ft(this,E,!0),tt(this,Vt,Br).call(this,s)}moveInDOM(){var s;(s=this.parent)==null||s.moveEditorInDOM(this)}_setParentAndPosition(s,c,h){s.changeParent(this),this.x=c,this.y=h,this.fixAndSetPosition()}getRect(s,c){const h=this.parentScale,[w,_]=this.pageDimensions,[O,at]=this.pageTranslation,ct=s/h,mt=c/h,St=this.x*w,Dt=this.y*_,Ct=this.width*w,$t=this.height*_;switch(this.rotation){case 0:return[St+ct+O,_-Dt-mt-$t+at,St+ct+Ct+O,_-Dt-mt+at];case 90:return[St+mt+O,_-Dt+ct+at,St+mt+$t+O,_-Dt+ct+Ct+at];case 180:return[St-ct-Ct+O,_-Dt+mt+at,St-ct+O,_-Dt+mt+$t+at];case 270:return[St-mt-$t+O,_-Dt-ct-Ct+at,St-mt+O,_-Dt-ct+at];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(s,c){const[h,w,_,O]=s,at=_-h,ct=O-w;switch(this.rotation){case 0:return[h,c-O,at,ct];case 90:return[h,c-w,ct,at];case 180:return[_,c-w,at,ct];case 270:return[_,c-O,ct,at];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ft(this,M,!0)}disableEditMode(){ft(this,M,!1)}isInEditMode(){return t(this,M)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,c;(s=this.div)==null||s.addEventListener("focusin",t(this,C)),(c=this.div)==null||c.addEventListener("focusout",t(this,v))}serialize(s=!1,c=null){(0,x.unreachable)("An editor must be serializable")}static deserialize(s,c,h){const w=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:h});w.rotation=s.rotation;const[_,O]=w.pageDimensions,[at,ct,mt,St]=w.getRectInCurrentCoords(s.rect,O);return w.x=at/_,w.y=ct/O,w.width=mt/_,w.height=St/O,w}remove(){var s;this.div.removeEventListener("focusin",t(this,C)),this.div.removeEventListener("focusout",t(this,v)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(s=t(this,f))==null||s.remove(),ft(this,f,null),ft(this,H,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(tt(this,k,Ir).call(this),t(this,A).classList.remove("hidden"))}select(){var s;this.makeResizable(),(s=this.div)==null||s.classList.add("selectedEditor")}unselect(){var s,c,h;(s=t(this,A))==null||s.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(h=this.div)!=null&&h.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(s,c){}disableEditing(){t(this,f)&&(t(this,f).hidden=!0)}enableEditing(){t(this,f)&&(t(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,F)}set isEditing(s){ft(this,F,s),this.parent&&(s?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(s,c){ft(this,T,!0);const h=s/c,{style:w}=this.div;w.aspectRatio=h,w.height="auto"}static get MIN_SIZE(){return 16}};G=new WeakMap,I=new WeakMap,f=new WeakMap,H=new WeakMap,U=new WeakMap,T=new WeakMap,A=new WeakMap,C=new WeakMap,v=new WeakMap,E=new WeakMap,F=new WeakMap,M=new WeakMap,P=new WeakMap,o=new WeakMap,d=new WeakSet,Ni=function([s,c],h,w){[h,w]=this.screenToPageTranslation(h,w),this.x+=h/s,this.y+=w/c,this.fixAndSetPosition()},y=new WeakSet,Bi=function(){const[s,c]=this.parentDimensions,{_borderLineWidth:h}=i,w=h/s,_=h/c;switch(this.rotation){case 90:return[-w,_];case 180:return[w,_];case 270:return[w,-_];default:return[-w,-_]}},L=new WeakSet,ji=function(s,c,h){switch(h){case 90:return[c,-s];case 180:return[-s,-c];case 270:return[-c,s];default:return[s,c]}},q=new WeakSet,Ui=function(s){switch(s){case 90:{const[c,h]=this.pageDimensions;return[0,-c/h,h/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,h]=this.pageDimensions;return[0,c/h,-h/c,0]}default:return[1,0,0,1]}},k=new WeakSet,Ir=function(){if(t(this,A))return;ft(this,A,document.createElement("div")),t(this,A).classList.add("resizers");const s=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||s.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of s){const h=document.createElement("div");t(this,A).append(h),h.classList.add("resizer",c),h.addEventListener("pointerdown",tt(this,pt,Or).bind(this,c)),h.addEventListener("contextmenu",e.noContextMenu)}this.div.prepend(t(this,A))},pt=new WeakSet,Or=function(s,c){c.preventDefault();const{isMac:h}=x.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&h)return;const w=tt(this,$,Nr).bind(this,s),_=this._isDraggable;this._isDraggable=!1;const O={passive:!0,capture:!0};window.addEventListener("pointermove",w,O);const at=this.x,ct=this.y,mt=this.width,St=this.height,Dt=this.parent.div.style.cursor,Ct=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const $t=()=>{this._isDraggable=_,window.removeEventListener("pointerup",$t),window.removeEventListener("blur",$t),window.removeEventListener("pointermove",w,O),this.parent.div.style.cursor=Dt,this.div.style.cursor=Ct;const Qt=this.x,Ot=this.y,Zt=this.width,Tt=this.height;Qt===at&&Ot===ct&&Zt===mt&&Tt===St||this.addCommands({cmd:()=>{this.width=Zt,this.height=Tt,this.x=Qt,this.y=Ot;const[dt,ot]=this.parentDimensions;this.setDims(dt*Zt,ot*Tt),this.fixAndSetPosition()},undo:()=>{this.width=mt,this.height=St,this.x=at,this.y=ct;const[dt,ot]=this.parentDimensions;this.setDims(dt*mt,ot*St),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",$t),window.addEventListener("blur",$t)},$=new WeakSet,Nr=function(s,c){const[h,w]=this.parentDimensions,_=this.x,O=this.y,at=this.width,ct=this.height,mt=i.MIN_SIZE/h,St=i.MIN_SIZE/w,Dt=Lt=>Math.round(Lt*1e4)/1e4,Ct=tt(this,q,Ui).call(this,this.rotation),$t=(Lt,Et)=>[Ct[0]*Lt+Ct[2]*Et,Ct[1]*Lt+Ct[3]*Et],Qt=tt(this,q,Ui).call(this,360-this.rotation),Ot=(Lt,Et)=>[Qt[0]*Lt+Qt[2]*Et,Qt[1]*Lt+Qt[3]*Et];let Zt,Tt,dt=!1,ot=!1;switch(s){case"topLeft":dt=!0,Zt=(Lt,Et)=>[0,0],Tt=(Lt,Et)=>[Lt,Et];break;case"topMiddle":Zt=(Lt,Et)=>[Lt/2,0],Tt=(Lt,Et)=>[Lt/2,Et];break;case"topRight":dt=!0,Zt=(Lt,Et)=>[Lt,0],Tt=(Lt,Et)=>[0,Et];break;case"middleRight":ot=!0,Zt=(Lt,Et)=>[Lt,Et/2],Tt=(Lt,Et)=>[0,Et/2];break;case"bottomRight":dt=!0,Zt=(Lt,Et)=>[Lt,Et],Tt=(Lt,Et)=>[0,0];break;case"bottomMiddle":Zt=(Lt,Et)=>[Lt/2,Et],Tt=(Lt,Et)=>[Lt/2,0];break;case"bottomLeft":dt=!0,Zt=(Lt,Et)=>[0,Et],Tt=(Lt,Et)=>[Lt,0];break;case"middleLeft":ot=!0,Zt=(Lt,Et)=>[0,Et/2],Tt=(Lt,Et)=>[Lt,Et/2];break}const wt=Zt(at,ct),Wt=Tt(at,ct);let Ut=$t(...Wt);const ce=Dt(_+Ut[0]),pe=Dt(O+Ut[1]);let de=1,me=1,[ye,se]=this.screenToPageTranslation(c.movementX,c.movementY);if([ye,se]=Ot(ye/h,se/w),dt){const Lt=Math.hypot(at,ct);de=me=Math.max(Math.min(Math.hypot(Wt[0]-wt[0]-ye,Wt[1]-wt[1]-se)/Lt,1/at,1/ct),mt/at,St/ct)}else ot?de=Math.max(mt,Math.min(1,Math.abs(Wt[0]-wt[0]-ye)))/at:me=Math.max(St,Math.min(1,Math.abs(Wt[1]-wt[1]-se)))/ct;const Ce=Dt(at*de),yt=Dt(ct*me);Ut=$t(...Tt(Ce,yt));const nt=ce-Ut[0],Y=pe-Ut[1];this.width=Ce,this.height=yt,this.x=nt,this.y=Y,this.setDims(h*Ce,w*yt),this.fixAndSetPosition()},kt=new WeakSet,Hi=async function(){var h;const s=t(this,f);if(!s)return;if(!t(this,G)&&!t(this,I)){s.classList.remove("done"),(h=t(this,H))==null||h.remove();return}i._l10nPromise.get("editor_alt_text_edit_button_label").then(w=>{s.setAttribute("aria-label",w)});let c=t(this,H);if(!c){ft(this,H,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip");const w=c.id=`alt-text-tooltip-${this.id}`;s.setAttribute("aria-describedby",w);const _=100;s.addEventListener("mouseenter",()=>{ft(this,U,setTimeout(()=>{ft(this,U,null),t(this,H).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},_))}),s.addEventListener("mouseleave",()=>{var O;clearTimeout(t(this,U)),ft(this,U,null),(O=t(this,H))==null||O.classList.remove("show")})}s.classList.add("done"),c.innerText=t(this,I)?await i._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,G),c.parentNode||s.append(c)},Vt=new WeakSet,Br=function(s){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let h,w;c&&(h={passive:!0,capture:!0},w=O=>{const[at,ct]=this.screenToPageTranslation(O.movementX,O.movementY);this._uiManager.dragSelectedEditors(at,ct)},window.addEventListener("pointermove",w,h));const _=()=>{if(window.removeEventListener("pointerup",_),window.removeEventListener("blur",_),c&&window.removeEventListener("pointermove",w,h),ft(this,E,!1),!this._uiManager.endDragSession()){const{isMac:O}=x.FeatureTest.platform;s.ctrlKey&&!O||s.shiftKey||s.metaKey&&O?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",_),window.addEventListener("blur",_)},W(i,L),Qe(i,"_borderLineWidth",-1),Qe(i,"_colorManager",new g.ColorManager),Qe(i,"_zIndex",1),Qe(i,"SMALL_EDITOR_SIZE",0);let Q=i;m.AnnotationEditor=Q;class Pt extends Q{constructor(s){super(s),this.annotationElementId=s.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(u,m,bt)=>{var T,A,C,v,E,Wi,P,o,d,D,y,jr,S,q,Z,k,et,pt,vt,$,At,kt,Bt,Vt,R,i,a,s,c,h,w,_,O,at,ct,mt,St,Dt,Ct,$t,Qt,Ot,Zt,Tt,dt,ot,wt,Ur,Ut,zi,pe,Vi,me,di,se,Gi,yt,qi,Y,wn,Et,Yn,We,Hr,Nt,Wr,zt,Xi,re,Kn,It,$i;Object.defineProperty(m,"__esModule",{value:!0}),m.KeyboardManager=m.CommandManager=m.ColorManager=m.AnnotationEditorUIManager=void 0,m.bindEvents=e,m.opacityToHex=Q;var g=bt(1),x=bt(6);function e(B,n,b){for(const j of b)n.addEventListener(j,B[j].bind(B))}function Q(B){return Math.round(Math.min(255,Math.max(1,255*B))).toString(16).padStart(2,"0")}class Pt{constructor(){W(this,T,0)}getId(){return`${g.AnnotationEditorPrefix}${$n(this,T)._++}`}}T=new WeakMap;const M=class M{constructor(){W(this,E);W(this,A,(0,g.getUuid)());W(this,C,0);W(this,v,null)}static get _isSVGFittingCanvas(){const n='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',j=new OffscreenCanvas(1,3).getContext("2d"),K=new Image;K.src=n;const it=K.decode().then(()=>(j.drawImage(K,0,0,1,1,0,0,1,3),new Uint32Array(j.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,g.shadow)(this,"_isSVGFittingCanvas",it)}async getFromFile(n){const{lastModified:b,name:j,size:K,type:it}=n;return tt(this,E,Wi).call(this,`${b}_${j}_${K}_${it}`,n)}async getFromUrl(n){return tt(this,E,Wi).call(this,n,n)}async getFromId(n){t(this,v)||ft(this,v,new Map);const b=t(this,v).get(n);return b?b.bitmap?(b.refCounter+=1,b):b.file?this.getFromFile(b.file):this.getFromUrl(b.url):null}getSvgUrl(n){const b=t(this,v).get(n);return b!=null&&b.isSvg?b.svgUrl:null}deleteId(n){t(this,v)||ft(this,v,new Map);const b=t(this,v).get(n);b&&(b.refCounter-=1,b.refCounter===0&&(b.bitmap=null))}isValidId(n){return n.startsWith(`image_${t(this,A)}_`)}};A=new WeakMap,C=new WeakMap,v=new WeakMap,E=new WeakSet,Wi=async function(n,b){t(this,v)||ft(this,v,new Map);let j=t(this,v).get(n);if(j===null)return null;if(j!=null&&j.bitmap)return j.refCounter+=1,j;try{j||(j={bitmap:null,id:`image_${t(this,A)}_${$n(this,C)._++}`,refCounter:0,isSvg:!1});let K;if(typeof b=="string"){j.url=b;const it=await fetch(b);if(!it.ok)throw new Error(it.statusText);K=await it.blob()}else K=j.file=b;if(K.type==="image/svg+xml"){const it=M._isSVGFittingCanvas,gt=new FileReader,Mt=new Image,Xt=new Promise((Gt,be)=>{Mt.onload=()=>{j.bitmap=Mt,j.isSvg=!0,Gt()},gt.onload=async()=>{const Kt=j.svgUrl=gt.result;Mt.src=await it?`${Kt}#svgView(preserveAspectRatio(none))`:Kt},Mt.onerror=gt.onerror=be});gt.readAsDataURL(K),await Xt}else j.bitmap=await createImageBitmap(K);j.refCounter=1}catch(K){console.error(K),j=null}return t(this,v).set(n,j),j&&t(this,v).set(j.id,j),j};let G=M;class I{constructor(n=128){W(this,P,[]);W(this,o,!1);W(this,d,void 0);W(this,D,-1);ft(this,d,n)}add({cmd:n,undo:b,mustExec:j,type:K=NaN,overwriteIfSameType:it=!1,keepUndo:gt=!1}){if(j&&n(),t(this,o))return;const Mt={cmd:n,undo:b,type:K};if(t(this,D)===-1){t(this,P).length>0&&(t(this,P).length=0),ft(this,D,0),t(this,P).push(Mt);return}if(it&&t(this,P)[t(this,D)].type===K){gt&&(Mt.undo=t(this,P)[t(this,D)].undo),t(this,P)[t(this,D)]=Mt;return}const Xt=t(this,D)+1;Xt===t(this,d)?t(this,P).splice(0,1):(ft(this,D,Xt),Xt<t(this,P).length&&t(this,P).splice(Xt)),t(this,P).push(Mt)}undo(){t(this,D)!==-1&&(ft(this,o,!0),t(this,P)[t(this,D)].undo(),ft(this,o,!1),ft(this,D,t(this,D)-1))}redo(){t(this,D)<t(this,P).length-1&&(ft(this,D,t(this,D)+1),ft(this,o,!0),t(this,P)[t(this,D)].cmd(),ft(this,o,!1))}hasSomethingToUndo(){return t(this,D)!==-1}hasSomethingToRedo(){return t(this,D)<t(this,P).length-1}destroy(){ft(this,P,null)}}P=new WeakMap,o=new WeakMap,d=new WeakMap,D=new WeakMap,m.CommandManager=I;class f{constructor(n){W(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:b}=g.FeatureTest.platform;for(const[j,K,it={}]of n)for(const gt of j){const Mt=gt.startsWith("mac+");b&&Mt?(this.callbacks.set(gt.slice(4),{callback:K,options:it}),this.allKeys.add(gt.split("+").at(-1))):!b&&!Mt&&(this.callbacks.set(gt,{callback:K,options:it}),this.allKeys.add(gt.split("+").at(-1)))}}exec(n,b){if(!this.allKeys.has(b.key))return;const j=this.callbacks.get(tt(this,y,jr).call(this,b));if(!j)return;const{callback:K,options:{bubbles:it=!1,args:gt=[],checker:Mt=null}}=j;Mt&&!Mt(n,b)||(K.bind(n,...gt)(),it||(b.stopPropagation(),b.preventDefault()))}}y=new WeakSet,jr=function(n){n.altKey&&this.buffer.push("alt"),n.ctrlKey&&this.buffer.push("ctrl"),n.metaKey&&this.buffer.push("meta"),n.shiftKey&&this.buffer.push("shift"),this.buffer.push(n.key);const b=this.buffer.join("+");return this.buffer.length=0,b},m.KeyboardManager=f;const L=class L{get _colors(){const n=new Map([["CanvasText",null],["Canvas",null]]);return(0,x.getColorValues)(n),(0,g.shadow)(this,"_colors",n)}convert(n){const b=(0,x.getRGB)(n);if(!window.matchMedia("(forced-colors: active)").matches)return b;for(const[j,K]of this._colors)if(K.every((it,gt)=>it===b[gt]))return L._colorsMapping.get(j);return b}getHexCode(n){const b=this._colors.get(n);return b?g.Util.makeHexColor(...b):n}};Qe(L,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let H=L;m.ColorManager=H;const te=class te{constructor(n,b,j,K,it,gt){W(this,wt);W(this,Ut);W(this,pe);W(this,me);W(this,se);W(this,yt);W(this,Y);W(this,Et);W(this,We);W(this,Nt);W(this,zt);W(this,re);W(this,It);W(this,S,null);W(this,q,new Map);W(this,Z,new Map);W(this,k,null);W(this,et,null);W(this,pt,new I);W(this,vt,0);W(this,$,new Set);W(this,At,null);W(this,kt,null);W(this,Bt,new Set);W(this,Vt,null);W(this,R,new Pt);W(this,i,!1);W(this,a,!1);W(this,s,null);W(this,c,g.AnnotationEditorType.NONE);W(this,h,new Set);W(this,w,null);W(this,_,this.blur.bind(this));W(this,O,this.focus.bind(this));W(this,at,this.copy.bind(this));W(this,ct,this.cut.bind(this));W(this,mt,this.paste.bind(this));W(this,St,this.keydown.bind(this));W(this,Dt,this.onEditingAction.bind(this));W(this,Ct,this.onPageChanging.bind(this));W(this,$t,this.onScaleChanging.bind(this));W(this,Qt,this.onRotationChanging.bind(this));W(this,Ot,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});W(this,Zt,[0,0]);W(this,Tt,null);W(this,dt,null);W(this,ot,null);ft(this,dt,n),ft(this,ot,b),ft(this,k,j),this._eventBus=K,this._eventBus._on("editingaction",t(this,Dt)),this._eventBus._on("pagechanging",t(this,Ct)),this._eventBus._on("scalechanging",t(this,$t)),this._eventBus._on("rotationchanging",t(this,Qt)),ft(this,et,it.annotationStorage),ft(this,Vt,it.filterFactory),ft(this,w,gt),this.viewParameters={realScale:x.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const n=te.prototype,b=it=>{const{activeElement:gt}=document;return gt&&t(it,dt).contains(gt)&&it.hasSomethingToControl()},j=this.TRANSLATE_SMALL,K=this.TRANSLATE_BIG;return(0,g.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],n.selectAll],[["ctrl+z","mac+meta+z"],n.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],n.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],n.delete],[["Escape","mac+Escape"],n.unselectAll],[["ArrowLeft","mac+ArrowLeft"],n.translateSelectedEditors,{args:[-j,0],checker:b}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n.translateSelectedEditors,{args:[-K,0],checker:b}],[["ArrowRight","mac+ArrowRight"],n.translateSelectedEditors,{args:[j,0],checker:b}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n.translateSelectedEditors,{args:[K,0],checker:b}],[["ArrowUp","mac+ArrowUp"],n.translateSelectedEditors,{args:[0,-j],checker:b}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n.translateSelectedEditors,{args:[0,-K],checker:b}],[["ArrowDown","mac+ArrowDown"],n.translateSelectedEditors,{args:[0,j],checker:b}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n.translateSelectedEditors,{args:[0,K],checker:b}]]))}destroy(){tt(this,me,di).call(this),tt(this,Ut,zi).call(this),this._eventBus._off("editingaction",t(this,Dt)),this._eventBus._off("pagechanging",t(this,Ct)),this._eventBus._off("scalechanging",t(this,$t)),this._eventBus._off("rotationchanging",t(this,Qt));for(const n of t(this,Z).values())n.destroy();t(this,Z).clear(),t(this,q).clear(),t(this,Bt).clear(),ft(this,S,null),t(this,h).clear(),t(this,pt).destroy(),t(this,k).destroy()}get hcmFilter(){return(0,g.shadow)(this,"hcmFilter",t(this,w)?t(this,Vt).addHCMFilter(t(this,w).foreground,t(this,w).background):"none")}get direction(){return(0,g.shadow)(this,"direction",getComputedStyle(t(this,dt)).direction)}editAltText(n){var b;(b=t(this,k))==null||b.editAltText(this,n)}onPageChanging({pageNumber:n}){ft(this,vt,n-1)}focusMainContainer(){t(this,dt).focus()}findParent(n,b){for(const j of t(this,Z).values()){const{x:K,y:it,width:gt,height:Mt}=j.div.getBoundingClientRect();if(n>=K&&n<=K+gt&&b>=it&&b<=it+Mt)return j}return null}disableUserSelect(n=!1){t(this,ot).classList.toggle("noUserSelect",n)}addShouldRescale(n){t(this,Bt).add(n)}removeShouldRescale(n){t(this,Bt).delete(n)}onScaleChanging({scale:n}){this.commitOrRemove(),this.viewParameters.realScale=n*x.PixelsPerInch.PDF_TO_CSS_UNITS;for(const b of t(this,Bt))b.onScaleChanging()}onRotationChanging({pagesRotation:n}){this.commitOrRemove(),this.viewParameters.rotation=n}addToAnnotationStorage(n){!n.isEmpty()&&t(this,et)&&!t(this,et).has(n.id)&&t(this,et).setValue(n.id,n)}blur(){if(!this.hasSelection)return;const{activeElement:n}=document;for(const b of t(this,h))if(b.div.contains(n)){ft(this,s,[b,n]),b._focusEventsAllowed=!1;break}}focus(){if(!t(this,s))return;const[n,b]=t(this,s);ft(this,s,null),b.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0}),b.focus()}addEditListeners(){tt(this,pe,Vi).call(this),tt(this,se,Gi).call(this)}removeEditListeners(){tt(this,me,di).call(this),tt(this,yt,qi).call(this)}copy(n){var j;if(n.preventDefault(),(j=t(this,S))==null||j.commitOrRemove(),!this.hasSelection)return;const b=[];for(const K of t(this,h)){const it=K.serialize(!0);it&&b.push(it)}b.length!==0&&n.clipboardData.setData("application/pdfjs",JSON.stringify(b))}cut(n){this.copy(n),this.delete()}paste(n){n.preventDefault();const{clipboardData:b}=n;for(const it of b.items)for(const gt of t(this,kt))if(gt.isHandlingMimeForPasting(it.type)){gt.paste(it,this.currentLayer);return}let j=b.getData("application/pdfjs");if(!j)return;try{j=JSON.parse(j)}catch(it){(0,g.warn)(`paste: "${it.message}".`);return}if(!Array.isArray(j))return;this.unselectAll();const K=this.currentLayer;try{const it=[];for(const Xt of j){const Gt=K.deserialize(Xt);if(!Gt)return;it.push(Gt)}const gt=()=>{for(const Xt of it)tt(this,zt,Xi).call(this,Xt);tt(this,It,$i).call(this,it)},Mt=()=>{for(const Xt of it)Xt.remove()};this.addCommands({cmd:gt,undo:Mt,mustExec:!0})}catch(it){(0,g.warn)(`paste: "${it.message}".`)}}keydown(n){var b;(b=this.getActive())!=null&&b.shouldGetKeyboardEvents()||te._keyboardManager.exec(this,n)}onEditingAction(n){["undo","redo","delete","selectAll"].includes(n.name)&&this[n.name]()}setEditingState(n){n?(tt(this,wt,Ur).call(this),tt(this,pe,Vi).call(this),tt(this,se,Gi).call(this),tt(this,Y,wn).call(this,{isEditing:t(this,c)!==g.AnnotationEditorType.NONE,isEmpty:tt(this,re,Kn).call(this),hasSomethingToUndo:t(this,pt).hasSomethingToUndo(),hasSomethingToRedo:t(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(tt(this,Ut,zi).call(this),tt(this,me,di).call(this),tt(this,yt,qi).call(this),tt(this,Y,wn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(n){if(!t(this,kt)){ft(this,kt,n);for(const b of t(this,kt))tt(this,Et,Yn).call(this,b.defaultPropertiesToUpdate)}}getId(){return t(this,R).getId()}get currentLayer(){return t(this,Z).get(t(this,vt))}getLayer(n){return t(this,Z).get(n)}get currentPageIndex(){return t(this,vt)}addLayer(n){t(this,Z).set(n.pageIndex,n),t(this,i)?n.enable():n.disable()}removeLayer(n){t(this,Z).delete(n.pageIndex)}updateMode(n,b=null){if(t(this,c)!==n){if(ft(this,c,n),n===g.AnnotationEditorType.NONE){this.setEditingState(!1),tt(this,Nt,Wr).call(this);return}this.setEditingState(!0),tt(this,We,Hr).call(this),this.unselectAll();for(const j of t(this,Z).values())j.updateMode(n);if(b){for(const j of t(this,q).values())if(j.annotationElementId===b){this.setSelected(j),j.enterInEditMode();break}}}}updateToolbar(n){n!==t(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:n})}updateParams(n,b){if(t(this,kt)){if(n===g.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(n);return}for(const j of t(this,h))j.updateParams(n,b);for(const j of t(this,kt))j.updateDefaultParams(n,b)}}enableWaiting(n=!1){if(t(this,a)!==n){ft(this,a,n);for(const b of t(this,Z).values())n?b.disableClick():b.enableClick(),b.div.classList.toggle("waiting",n)}}getEditors(n){const b=[];for(const j of t(this,q).values())j.pageIndex===n&&b.push(j);return b}getEditor(n){return t(this,q).get(n)}addEditor(n){t(this,q).set(n.id,n)}removeEditor(n){var b;t(this,q).delete(n.id),this.unselect(n),(!n.annotationElementId||!t(this,$).has(n.annotationElementId))&&((b=t(this,et))==null||b.remove(n.id))}addDeletedAnnotationElement(n){t(this,$).add(n.annotationElementId),n.deleted=!0}isDeletedAnnotationElement(n){return t(this,$).has(n)}removeDeletedAnnotationElement(n){t(this,$).delete(n.annotationElementId),n.deleted=!1}setActiveEditor(n){t(this,S)!==n&&(ft(this,S,n),n&&tt(this,Et,Yn).call(this,n.propertiesToUpdate))}toggleSelected(n){if(t(this,h).has(n)){t(this,h).delete(n),n.unselect(),tt(this,Y,wn).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,h).add(n),n.select(),tt(this,Et,Yn).call(this,n.propertiesToUpdate),tt(this,Y,wn).call(this,{hasSelectedEditor:!0})}setSelected(n){for(const b of t(this,h))b!==n&&b.unselect();t(this,h).clear(),t(this,h).add(n),n.select(),tt(this,Et,Yn).call(this,n.propertiesToUpdate),tt(this,Y,wn).call(this,{hasSelectedEditor:!0})}isSelected(n){return t(this,h).has(n)}unselect(n){n.unselect(),t(this,h).delete(n),tt(this,Y,wn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,h).size!==0}undo(){t(this,pt).undo(),tt(this,Y,wn).call(this,{hasSomethingToUndo:t(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:tt(this,re,Kn).call(this)})}redo(){t(this,pt).redo(),tt(this,Y,wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,pt).hasSomethingToRedo(),isEmpty:tt(this,re,Kn).call(this)})}addCommands(n){t(this,pt).add(n),tt(this,Y,wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:tt(this,re,Kn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const n=[...t(this,h)],b=()=>{for(const K of n)K.remove()},j=()=>{for(const K of n)tt(this,zt,Xi).call(this,K)};this.addCommands({cmd:b,undo:j,mustExec:!0})}commitOrRemove(){var n;(n=t(this,S))==null||n.commitOrRemove()}hasSomethingToControl(){return t(this,S)||this.hasSelection}selectAll(){for(const n of t(this,h))n.commit();tt(this,It,$i).call(this,t(this,q).values())}unselectAll(){if(t(this,S)){t(this,S).commitOrRemove();return}if(this.hasSelection){for(const n of t(this,h))n.unselect();t(this,h).clear(),tt(this,Y,wn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(n,b,j=!1){if(j||this.commitOrRemove(),!this.hasSelection)return;t(this,Zt)[0]+=n,t(this,Zt)[1]+=b;const[K,it]=t(this,Zt),gt=[...t(this,h)],Mt=1e3;t(this,Tt)&&clearTimeout(t(this,Tt)),ft(this,Tt,setTimeout(()=>{ft(this,Tt,null),t(this,Zt)[0]=t(this,Zt)[1]=0,this.addCommands({cmd:()=>{for(const Xt of gt)t(this,q).has(Xt.id)&&Xt.translateInPage(K,it)},undo:()=>{for(const Xt of gt)t(this,q).has(Xt.id)&&Xt.translateInPage(-K,-it)},mustExec:!1})},Mt));for(const Xt of gt)Xt.translateInPage(n,b)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ft(this,At,new Map);for(const n of t(this,h))t(this,At).set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,At))return!1;this.disableUserSelect(!1);const n=t(this,At);ft(this,At,null);let b=!1;for(const[{x:K,y:it,pageIndex:gt},Mt]of n)Mt.newX=K,Mt.newY=it,Mt.newPageIndex=gt,b||(b=K!==Mt.savedX||it!==Mt.savedY||gt!==Mt.savedPageIndex);if(!b)return!1;const j=(K,it,gt,Mt)=>{if(t(this,q).has(K.id)){const Xt=t(this,Z).get(Mt);Xt?K._setParentAndPosition(Xt,it,gt):(K.pageIndex=Mt,K.x=it,K.y=gt)}};return this.addCommands({cmd:()=>{for(const[K,{newX:it,newY:gt,newPageIndex:Mt}]of n)j(K,it,gt,Mt)},undo:()=>{for(const[K,{savedX:it,savedY:gt,savedPageIndex:Mt}]of n)j(K,it,gt,Mt)},mustExec:!0}),!0}dragSelectedEditors(n,b){if(t(this,At))for(const j of t(this,At).keys())j.drag(n,b)}rebuild(n){if(n.parent===null){const b=this.getLayer(n.pageIndex);b?(b.changeParent(n),b.addOrRebuild(n)):(this.addEditor(n),this.addToAnnotationStorage(n),n.rebuild())}else n.parent.addOrRebuild(n)}isActive(n){return t(this,S)===n}getActive(){return t(this,S)}getMode(){return t(this,c)}get imageManager(){return(0,g.shadow)(this,"imageManager",new G)}};S=new WeakMap,q=new WeakMap,Z=new WeakMap,k=new WeakMap,et=new WeakMap,pt=new WeakMap,vt=new WeakMap,$=new WeakMap,At=new WeakMap,kt=new WeakMap,Bt=new WeakMap,Vt=new WeakMap,R=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,h=new WeakMap,w=new WeakMap,_=new WeakMap,O=new WeakMap,at=new WeakMap,ct=new WeakMap,mt=new WeakMap,St=new WeakMap,Dt=new WeakMap,Ct=new WeakMap,$t=new WeakMap,Qt=new WeakMap,Ot=new WeakMap,Zt=new WeakMap,Tt=new WeakMap,dt=new WeakMap,ot=new WeakMap,wt=new WeakSet,Ur=function(){window.addEventListener("focus",t(this,O)),window.addEventListener("blur",t(this,_))},Ut=new WeakSet,zi=function(){window.removeEventListener("focus",t(this,O)),window.removeEventListener("blur",t(this,_))},pe=new WeakSet,Vi=function(){window.addEventListener("keydown",t(this,St),{capture:!0})},me=new WeakSet,di=function(){window.removeEventListener("keydown",t(this,St),{capture:!0})},se=new WeakSet,Gi=function(){document.addEventListener("copy",t(this,at)),document.addEventListener("cut",t(this,ct)),document.addEventListener("paste",t(this,mt))},yt=new WeakSet,qi=function(){document.removeEventListener("copy",t(this,at)),document.removeEventListener("cut",t(this,ct)),document.removeEventListener("paste",t(this,mt))},Y=new WeakSet,wn=function(n){Object.entries(n).some(([j,K])=>t(this,Ot)[j]!==K)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Ot),n)})},Et=new WeakSet,Yn=function(n){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:n})},We=new WeakSet,Hr=function(){if(!t(this,i)){ft(this,i,!0);for(const n of t(this,Z).values())n.enable()}},Nt=new WeakSet,Wr=function(){if(this.unselectAll(),t(this,i)){ft(this,i,!1);for(const n of t(this,Z).values())n.disable()}},zt=new WeakSet,Xi=function(n){const b=t(this,Z).get(n.pageIndex);b?b.addOrRebuild(n):this.addEditor(n)},re=new WeakSet,Kn=function(){if(t(this,q).size===0)return!0;if(t(this,q).size===1)for(const n of t(this,q).values())return n.isEmpty();return!1},It=new WeakSet,$i=function(n){t(this,h).clear();for(const b of n)b.isEmpty()||(t(this,h).add(b),b.select());tt(this,Y,wn).call(this,{hasSelectedEditor:!0})},Qe(te,"TRANSLATE_SMALL",1),Qe(te,"TRANSLATE_BIG",10);let U=te;m.AnnotationEditorUIManager=U},(u,m,bt)=>{var vt,$,At,kt,Bt,Vt,R,i,a,s,c,h,Wn,_,zn,at,Yi,mt,ui,Dt,fi,$t,Jn,Ot,Zn;Object.defineProperty(m,"__esModule",{value:!0}),m.StatTimer=m.RenderingCancelledException=m.PixelsPerInch=m.PageViewport=m.PDFDateString=m.DOMStandardFontDataFactory=m.DOMSVGFactory=m.DOMFilterFactory=m.DOMCanvasFactory=m.DOMCMapReaderFactory=void 0,m.deprecated=D,m.getColorValues=q,m.getCurrentTransform=Z,m.getCurrentTransformInverse=k,m.getFilenameFromUrl=E,m.getPdfFilenameFromUrl=F,m.getRGB=S,m.getXfaPageViewport=L,m.isDataScheme=C,m.isPdfFile=v,m.isValidFetchUrl=P,m.loadScript=d,m.noContextMenu=o,m.setLayerDimensions=et;var g=bt(7),x=bt(1);const e="http://www.w3.org/2000/svg",pt=class pt{};Qe(pt,"CSS",96),Qe(pt,"PDF",72),Qe(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let Q=pt;m.PixelsPerInch=Q;class Pt extends g.BaseFilterFactory{constructor({docId:ot,ownerDocument:wt=globalThis.document}={}){super();W(this,h);W(this,_);W(this,at);W(this,mt);W(this,Dt);W(this,$t);W(this,Ot);W(this,vt,void 0);W(this,$,void 0);W(this,At,void 0);W(this,kt,void 0);W(this,Bt,void 0);W(this,Vt,void 0);W(this,R,void 0);W(this,i,void 0);W(this,a,void 0);W(this,s,void 0);W(this,c,0);ft(this,At,ot),ft(this,kt,wt)}addFilter(ot){if(!ot)return"none";let wt=t(this,h,Wn).get(ot);if(wt)return wt;let Wt,Ut,ce,pe;if(ot.length===1){const se=ot[0],Ce=new Array(256);for(let yt=0;yt<256;yt++)Ce[yt]=se[yt]/255;pe=Wt=Ut=ce=Ce.join(",")}else{const[se,Ce,yt]=ot,nt=new Array(256),Y=new Array(256),Lt=new Array(256);for(let Et=0;Et<256;Et++)nt[Et]=se[Et]/255,Y[Et]=Ce[Et]/255,Lt[Et]=yt[Et]/255;Wt=nt.join(","),Ut=Y.join(","),ce=Lt.join(","),pe=`${Wt}${Ut}${ce}`}if(wt=t(this,h,Wn).get(pe),wt)return t(this,h,Wn).set(ot,wt),wt;const de=`g_${t(this,At)}_transfer_map_${$n(this,c)._++}`,me=`url(#${de})`;t(this,h,Wn).set(ot,me),t(this,h,Wn).set(pe,me);const ye=tt(this,mt,ui).call(this,de);return tt(this,$t,Jn).call(this,Wt,Ut,ce,ye),me}addHCMFilter(ot,wt){var Ce;const Wt=`${ot}-${wt}`;if(t(this,Vt)===Wt)return t(this,R);if(ft(this,Vt,Wt),ft(this,R,"none"),(Ce=t(this,Bt))==null||Ce.remove(),!ot||!wt)return t(this,R);const Ut=tt(this,Ot,Zn).call(this,ot);ot=x.Util.makeHexColor(...Ut);const ce=tt(this,Ot,Zn).call(this,wt);if(wt=x.Util.makeHexColor(...ce),t(this,_,zn).style.color="",ot==="#000000"&&wt==="#ffffff"||ot===wt)return t(this,R);const pe=new Array(256);for(let yt=0;yt<=255;yt++){const nt=yt/255;pe[yt]=nt<=.03928?nt/12.92:((nt+.055)/1.055)**2.4}const de=pe.join(","),me=`g_${t(this,At)}_hcm_filter`,ye=ft(this,i,tt(this,mt,ui).call(this,me));tt(this,$t,Jn).call(this,de,de,de,ye),tt(this,at,Yi).call(this,ye);const se=(yt,nt)=>{const Y=Ut[yt]/255,Lt=ce[yt]/255,Et=new Array(nt+1);for(let Fe=0;Fe<=nt;Fe++)Et[Fe]=Y+Fe/nt*(Lt-Y);return Et.join(",")};return tt(this,$t,Jn).call(this,se(0,5),se(1,5),se(2,5),ye),ft(this,R,`url(#${me})`),t(this,R)}addHighlightHCMFilter(ot,wt,Wt,Ut){var Lt;const ce=`${ot}-${wt}-${Wt}-${Ut}`;if(t(this,a)===ce)return t(this,s);if(ft(this,a,ce),ft(this,s,"none"),(Lt=t(this,i))==null||Lt.remove(),!ot||!wt)return t(this,s);const[pe,de]=[ot,wt].map(tt(this,Ot,Zn).bind(this));let me=Math.round(.2126*pe[0]+.7152*pe[1]+.0722*pe[2]),ye=Math.round(.2126*de[0]+.7152*de[1]+.0722*de[2]),[se,Ce]=[Wt,Ut].map(tt(this,Ot,Zn).bind(this));ye<me&&([me,ye,se,Ce]=[ye,me,Ce,se]),t(this,_,zn).style.color="";const yt=(Et,Fe,We)=>{const st=new Array(256),Nt=(ye-me)/We,ee=Et/255,zt=(Fe-Et)/(255*We);let ne=0;for(let re=0;re<=We;re++){const Oe=Math.round(me+re*Nt),It=ee+re*zt;for(let ke=ne;ke<=Oe;ke++)st[ke]=It;ne=Oe+1}for(let re=ne;re<256;re++)st[re]=st[ne-1];return st.join(",")},nt=`g_${t(this,At)}_hcm_highlight_filter`,Y=ft(this,i,tt(this,mt,ui).call(this,nt));return tt(this,at,Yi).call(this,Y),tt(this,$t,Jn).call(this,yt(se[0],Ce[0],5),yt(se[1],Ce[1],5),yt(se[2],Ce[2],5),Y),ft(this,s,`url(#${nt})`),t(this,s)}destroy(ot=!1){ot&&(t(this,R)||t(this,s))||(t(this,$)&&(t(this,$).parentNode.parentNode.remove(),ft(this,$,null)),t(this,vt)&&(t(this,vt).clear(),ft(this,vt,null)),ft(this,c,0))}}vt=new WeakMap,$=new WeakMap,At=new WeakMap,kt=new WeakMap,Bt=new WeakMap,Vt=new WeakMap,R=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,h=new WeakSet,Wn=function(){return t(this,vt)||ft(this,vt,new Map)},_=new WeakSet,zn=function(){if(!t(this,$)){const ot=t(this,kt).createElement("div"),{style:wt}=ot;wt.visibility="hidden",wt.contain="strict",wt.width=wt.height=0,wt.position="absolute",wt.top=wt.left=0,wt.zIndex=-1;const Wt=t(this,kt).createElementNS(e,"svg");Wt.setAttribute("width",0),Wt.setAttribute("height",0),ft(this,$,t(this,kt).createElementNS(e,"defs")),ot.append(Wt),Wt.append(t(this,$)),t(this,kt).body.append(ot)}return t(this,$)},at=new WeakSet,Yi=function(ot){const wt=t(this,kt).createElementNS(e,"feColorMatrix");wt.setAttribute("type","matrix"),wt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ot.append(wt)},mt=new WeakSet,ui=function(ot){const wt=t(this,kt).createElementNS(e,"filter");return wt.setAttribute("color-interpolation-filters","sRGB"),wt.setAttribute("id",ot),t(this,_,zn).append(wt),wt},Dt=new WeakSet,fi=function(ot,wt,Wt){const Ut=t(this,kt).createElementNS(e,wt);Ut.setAttribute("type","discrete"),Ut.setAttribute("tableValues",Wt),ot.append(Ut)},$t=new WeakSet,Jn=function(ot,wt,Wt,Ut){const ce=t(this,kt).createElementNS(e,"feComponentTransfer");Ut.append(ce),tt(this,Dt,fi).call(this,ce,"feFuncR",ot),tt(this,Dt,fi).call(this,ce,"feFuncG",wt),tt(this,Dt,fi).call(this,ce,"feFuncB",Wt)},Ot=new WeakSet,Zn=function(ot){return t(this,_,zn).style.color=ot,S(getComputedStyle(t(this,_,zn)).getPropertyValue("color"))},m.DOMFilterFactory=Pt;class G extends g.BaseCanvasFactory{constructor({ownerDocument:dt=globalThis.document}={}){super(),this._document=dt}_createCanvas(dt,ot){const wt=this._document.createElement("canvas");return wt.width=dt,wt.height=ot,wt}}m.DOMCanvasFactory=G;async function I(Tt,dt=!1){if(P(Tt,document.baseURI)){const ot=await fetch(Tt);if(!ot.ok)throw new Error(ot.statusText);return dt?new Uint8Array(await ot.arrayBuffer()):(0,x.stringToBytes)(await ot.text())}return new Promise((ot,wt)=>{const Wt=new XMLHttpRequest;Wt.open("GET",Tt,!0),dt&&(Wt.responseType="arraybuffer"),Wt.onreadystatechange=()=>{if(Wt.readyState===XMLHttpRequest.DONE){if(Wt.status===200||Wt.status===0){let Ut;if(dt&&Wt.response?Ut=new Uint8Array(Wt.response):!dt&&Wt.responseText&&(Ut=(0,x.stringToBytes)(Wt.responseText)),Ut){ot(Ut);return}}wt(new Error(Wt.statusText))}},Wt.send(null)})}class f extends g.BaseCMapReaderFactory{_fetchData(dt,ot){return I(dt,this.isCompressed).then(wt=>({cMapData:wt,compressionType:ot}))}}m.DOMCMapReaderFactory=f;class H extends g.BaseStandardFontDataFactory{_fetchData(dt){return I(dt,!0)}}m.DOMStandardFontDataFactory=H;class U extends g.BaseSVGFactory{_createSVG(dt){return document.createElementNS(e,dt)}}m.DOMSVGFactory=U;class T{constructor({viewBox:dt,scale:ot,rotation:wt,offsetX:Wt=0,offsetY:Ut=0,dontFlip:ce=!1}){this.viewBox=dt,this.scale=ot,this.rotation=wt,this.offsetX=Wt,this.offsetY=Ut;const pe=(dt[2]+dt[0])/2,de=(dt[3]+dt[1])/2;let me,ye,se,Ce;switch(wt%=360,wt<0&&(wt+=360),wt){case 180:me=-1,ye=0,se=0,Ce=1;break;case 90:me=0,ye=1,se=1,Ce=0;break;case 270:me=0,ye=-1,se=-1,Ce=0;break;case 0:me=1,ye=0,se=0,Ce=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ce&&(se=-se,Ce=-Ce);let yt,nt,Y,Lt;me===0?(yt=Math.abs(de-dt[1])*ot+Wt,nt=Math.abs(pe-dt[0])*ot+Ut,Y=(dt[3]-dt[1])*ot,Lt=(dt[2]-dt[0])*ot):(yt=Math.abs(pe-dt[0])*ot+Wt,nt=Math.abs(de-dt[1])*ot+Ut,Y=(dt[2]-dt[0])*ot,Lt=(dt[3]-dt[1])*ot),this.transform=[me*ot,ye*ot,se*ot,Ce*ot,yt-me*ot*pe-se*ot*de,nt-ye*ot*pe-Ce*ot*de],this.width=Y,this.height=Lt}get rawDims(){const{viewBox:dt}=this;return(0,x.shadow)(this,"rawDims",{pageWidth:dt[2]-dt[0],pageHeight:dt[3]-dt[1],pageX:dt[0],pageY:dt[1]})}clone({scale:dt=this.scale,rotation:ot=this.rotation,offsetX:wt=this.offsetX,offsetY:Wt=this.offsetY,dontFlip:Ut=!1}={}){return new T({viewBox:this.viewBox.slice(),scale:dt,rotation:ot,offsetX:wt,offsetY:Wt,dontFlip:Ut})}convertToViewportPoint(dt,ot){return x.Util.applyTransform([dt,ot],this.transform)}convertToViewportRectangle(dt){const ot=x.Util.applyTransform([dt[0],dt[1]],this.transform),wt=x.Util.applyTransform([dt[2],dt[3]],this.transform);return[ot[0],ot[1],wt[0],wt[1]]}convertToPdfPoint(dt,ot){return x.Util.applyInverseTransform([dt,ot],this.transform)}}m.PageViewport=T;class A extends x.BaseException{constructor(dt,ot=0){super(dt,"RenderingCancelledException"),this.extraDelay=ot}}m.RenderingCancelledException=A;function C(Tt){const dt=Tt.length;let ot=0;for(;ot<dt&&Tt[ot].trim()==="";)ot++;return Tt.substring(ot,ot+5).toLowerCase()==="data:"}function v(Tt){return typeof Tt=="string"&&/\.pdf$/i.test(Tt)}function E(Tt,dt=!1){return dt||([Tt]=Tt.split(/[#?]/,1)),Tt.substring(Tt.lastIndexOf("/")+1)}function F(Tt,dt="document.pdf"){if(typeof Tt!="string")return dt;if(C(Tt))return(0,x.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),dt;const ot=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,wt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Wt=ot.exec(Tt);let Ut=wt.exec(Wt[1])||wt.exec(Wt[2])||wt.exec(Wt[3]);if(Ut&&(Ut=Ut[0],Ut.includes("%")))try{Ut=wt.exec(decodeURIComponent(Ut))[0]}catch{}return Ut||dt}class M{constructor(){Qe(this,"started",Object.create(null));Qe(this,"times",[])}time(dt){dt in this.started&&(0,x.warn)(`Timer is already running for ${dt}`),this.started[dt]=Date.now()}timeEnd(dt){dt in this.started||(0,x.warn)(`Timer has not been started for ${dt}`),this.times.push({name:dt,start:this.started[dt],end:Date.now()}),delete this.started[dt]}toString(){const dt=[];let ot=0;for(const{name:wt}of this.times)ot=Math.max(wt.length,ot);for(const{name:wt,start:Wt,end:Ut}of this.times)dt.push(`${wt.padEnd(ot)} ${Ut-Wt}ms
`);return dt.join("")}}m.StatTimer=M;function P(Tt,dt){try{const{protocol:ot}=dt?new URL(Tt,dt):new URL(Tt);return ot==="http:"||ot==="https:"}catch{return!1}}function o(Tt){Tt.preventDefault()}function d(Tt,dt=!1){return new Promise((ot,wt)=>{const Wt=document.createElement("script");Wt.src=Tt,Wt.onload=function(Ut){dt&&Wt.remove(),ot(Ut)},Wt.onerror=function(){wt(new Error(`Cannot load script at: ${Wt.src}`))},(document.head||document.documentElement).append(Wt)})}function D(Tt){console.log("Deprecated API usage: "+Tt)}let y;class l{static toDateObject(dt){if(!dt||typeof dt!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ot=y.exec(dt);if(!ot)return null;const wt=parseInt(ot[1],10);let Wt=parseInt(ot[2],10);Wt=Wt>=1&&Wt<=12?Wt-1:0;let Ut=parseInt(ot[3],10);Ut=Ut>=1&&Ut<=31?Ut:1;let ce=parseInt(ot[4],10);ce=ce>=0&&ce<=23?ce:0;let pe=parseInt(ot[5],10);pe=pe>=0&&pe<=59?pe:0;let de=parseInt(ot[6],10);de=de>=0&&de<=59?de:0;const me=ot[7]||"Z";let ye=parseInt(ot[8],10);ye=ye>=0&&ye<=23?ye:0;let se=parseInt(ot[9],10)||0;return se=se>=0&&se<=59?se:0,me==="-"?(ce+=ye,pe+=se):me==="+"&&(ce-=ye,pe-=se),new Date(Date.UTC(wt,Wt,Ut,ce,pe,de))}}m.PDFDateString=l;function L(Tt,{scale:dt=1,rotation:ot=0}){const{width:wt,height:Wt}=Tt.attributes.style,Ut=[0,0,parseInt(wt),parseInt(Wt)];return new T({viewBox:Ut,scale:dt,rotation:ot})}function S(Tt){if(Tt.startsWith("#")){const dt=parseInt(Tt.slice(1),16);return[(dt&16711680)>>16,(dt&65280)>>8,dt&255]}return Tt.startsWith("rgb(")?Tt.slice(4,-1).split(",").map(dt=>parseInt(dt)):Tt.startsWith("rgba(")?Tt.slice(5,-1).split(",").map(dt=>parseInt(dt)).slice(0,3):((0,x.warn)(`Not a valid color format: "${Tt}"`),[0,0,0])}function q(Tt){const dt=document.createElement("span");dt.style.visibility="hidden",document.body.append(dt);for(const ot of Tt.keys()){dt.style.color=ot;const wt=window.getComputedStyle(dt).color;Tt.set(ot,S(wt))}dt.remove()}function Z(Tt){const{a:dt,b:ot,c:wt,d:Wt,e:Ut,f:ce}=Tt.getTransform();return[dt,ot,wt,Wt,Ut,ce]}function k(Tt){const{a:dt,b:ot,c:wt,d:Wt,e:Ut,f:ce}=Tt.getTransform().invertSelf();return[dt,ot,wt,Wt,Ut,ce]}function et(Tt,dt,ot=!1,wt=!0){if(dt instanceof T){const{pageWidth:Wt,pageHeight:Ut}=dt.rawDims,{style:ce}=Tt,pe=x.FeatureTest.isCSSRoundSupported,de=`var(--scale-factor) * ${Wt}px`,me=`var(--scale-factor) * ${Ut}px`,ye=pe?`round(${de}, 1px)`:`calc(${de})`,se=pe?`round(${me}, 1px)`:`calc(${me})`;!ot||dt.rotation%180===0?(ce.width=ye,ce.height=se):(ce.width=se,ce.height=ye)}wt&&Tt.setAttribute("data-main-rotation",dt.rotation)}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.BaseStandardFontDataFactory=m.BaseSVGFactory=m.BaseFilterFactory=m.BaseCanvasFactory=m.BaseCMapReaderFactory=void 0;var g=bt(1);class x{constructor(){this.constructor===x&&(0,g.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,H){return"none"}addHighlightHCMFilter(f,H,U,T){return"none"}destroy(f=!1){}}m.BaseFilterFactory=x;class e{constructor(){this.constructor===e&&(0,g.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,H){if(f<=0||H<=0)throw new Error("Invalid canvas size");const U=this._createCanvas(f,H);return{canvas:U,context:U.getContext("2d")}}reset(f,H,U){if(!f.canvas)throw new Error("Canvas is not specified");if(H<=0||U<=0)throw new Error("Invalid canvas size");f.canvas.width=H,f.canvas.height=U}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,H){(0,g.unreachable)("Abstract method `_createCanvas` called.")}}m.BaseCanvasFactory=e;class Q{constructor({baseUrl:f=null,isCompressed:H=!0}){this.constructor===Q&&(0,g.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=H}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const H=this.baseUrl+f+(this.isCompressed?".bcmap":""),U=this.isCompressed?g.CMapCompressionType.BINARY:g.CMapCompressionType.NONE;return this._fetchData(H,U).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${H}`)})}_fetchData(f,H){(0,g.unreachable)("Abstract method `_fetchData` called.")}}m.BaseCMapReaderFactory=Q;class Pt{constructor({baseUrl:f=null}){this.constructor===Pt&&(0,g.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const H=`${this.baseUrl}${f}`;return this._fetchData(H).catch(U=>{throw new Error(`Unable to load font data at: ${H}`)})}_fetchData(f){(0,g.unreachable)("Abstract method `_fetchData` called.")}}m.BaseStandardFontDataFactory=Pt;class G{constructor(){this.constructor===G&&(0,g.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,H,U=!1){if(f<=0||H<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),U||(T.setAttribute("width",`${f}px`),T.setAttribute("height",`${H}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${f} ${H}`),T}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,g.unreachable)("Abstract method `_createSVG` called.")}}m.BaseSVGFactory=G},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MurmurHash3_64=void 0;var g=bt(1);const x=3285377520,e=4294901760,Q=65535;class Pt{constructor(I){this.h1=I?I&4294967295:x,this.h2=I?I&4294967295:x}update(I){let f,H;if(typeof I=="string"){f=new Uint8Array(I.length*2),H=0;for(let D=0,y=I.length;D<y;D++){const l=I.charCodeAt(D);l<=255?f[H++]=l:(f[H++]=l>>>8,f[H++]=l&255)}}else if((0,g.isArrayBuffer)(I))f=I.slice(),H=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const U=H>>2,T=H-U*4,A=new Uint32Array(f.buffer,0,U);let C=0,v=0,E=this.h1,F=this.h2;const M=3432918353,P=461845907,o=M&Q,d=P&Q;for(let D=0;D<U;D++)D&1?(C=A[D],C=C*M&e|C*o&Q,C=C<<15|C>>>17,C=C*P&e|C*d&Q,E^=C,E=E<<13|E>>>19,E=E*5+3864292196):(v=A[D],v=v*M&e|v*o&Q,v=v<<15|v>>>17,v=v*P&e|v*d&Q,F^=v,F=F<<13|F>>>19,F=F*5+3864292196);switch(C=0,T){case 3:C^=f[U*4+2]<<16;case 2:C^=f[U*4+1]<<8;case 1:C^=f[U*4],C=C*M&e|C*o&Q,C=C<<15|C>>>17,C=C*P&e|C*d&Q,U&1?E^=C:F^=C}this.h1=E,this.h2=F}hexdigest(){let I=this.h1,f=this.h2;return I^=f>>>1,I=I*3981806797&e|I*36045&Q,f=f*4283543511&e|((f<<16|I>>>16)*2950163797&e)>>>16,I^=f>>>1,I=I*444984403&e|I*60499&Q,f=f*3301882366&e|((f<<16|I>>>16)*3120437893&e)>>>16,I^=f>>>1,(I>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}m.MurmurHash3_64=Pt},(u,m,bt)=>{var Q;Object.defineProperty(m,"__esModule",{value:!0}),m.FontLoader=m.FontFaceObject=void 0;var g=bt(1);class x{constructor({ownerDocument:G=globalThis.document,styleElement:I=null}){W(this,Q,new Set);this._document=G,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(G){this.nativeFontFaces.add(G),this._document.fonts.add(G)}removeNativeFontFace(G){this.nativeFontFaces.delete(G),this._document.fonts.delete(G)}insertRule(G){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const I=this.styleElement.sheet;I.insertRule(G,I.cssRules.length)}clear(){for(const G of this.nativeFontFaces)this._document.fonts.delete(G);this.nativeFontFaces.clear(),t(this,Q).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(G){if(!(!G||t(this,Q).has(G.loadedName))){if((0,g.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:I,src:f,style:H}=G,U=new FontFace(I,f,H);this.addNativeFontFace(U);try{await U.load(),t(this,Q).add(I)}catch{(0,g.warn)(`Cannot load system font: ${G.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(U)}return}(0,g.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(G){if(G.attached||G.missingFile&&!G.systemFontInfo)return;if(G.attached=!0,G.systemFontInfo){await this.loadSystemFont(G.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=G.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(H){throw(0,g.warn)(`Failed to load font '${f.family}': '${H}'.`),G.disableFontFace=!0,H}}return}const I=G.createFontFaceRule();if(I){if(this.insertRule(I),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const H=this._queueLoadingCallback(f);this._prepareFontLoadEvent(G,H)})}}get isFontLoadingAPISupported(){var I;const G=!!((I=this._document)!=null&&I.fonts);return(0,g.shadow)(this,"isFontLoadingAPISupported",G)}get isSyncFontLoadingSupported(){let G=!1;return(g.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(G=!0),(0,g.shadow)(this,"isSyncFontLoadingSupported",G)}_queueLoadingCallback(G){function I(){for((0,g.assert)(!H.done,"completeRequest() cannot be called twice."),H.done=!0;f.length>0&&f[0].done;){const U=f.shift();setTimeout(U.callback,0)}}const{loadingRequests:f}=this,H={done:!1,complete:I,callback:G};return f.push(H),H}get _loadTestFont(){const G=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,g.shadow)(this,"_loadTestFont",G)}_prepareFontLoadEvent(G,I){function f(S,q){return S.charCodeAt(q)<<24|S.charCodeAt(q+1)<<16|S.charCodeAt(q+2)<<8|S.charCodeAt(q+3)&255}function H(S,q,Z,k){const et=S.substring(0,q),pt=S.substring(q+Z);return et+k+pt}let U,T;const A=this._document.createElement("canvas");A.width=1,A.height=1;const C=A.getContext("2d");let v=0;function E(S,q){if(++v>30){(0,g.warn)("Load test font never loaded."),q();return}if(C.font="30px "+S,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){q();return}setTimeout(E.bind(null,S,q))}const F=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=H(M,976,F.length,F);const o=16,d=1482184792;let D=f(M,o);for(U=0,T=F.length-3;U<T;U+=4)D=D-d+f(F,U)|0;U<F.length&&(D=D-d+f(F+"XXX",U)|0),M=H(M,o,4,(0,g.string32)(D));const y=`url(data:font/opentype;base64,${btoa(M)});`,l=`@font-face {font-family:"${F}";src:${y}}`;this.insertRule(l);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const S of[G.loadedName,F]){const q=this._document.createElement("span");q.textContent="Hi",q.style.fontFamily=S,L.append(q)}this._document.body.append(L),E(F,()=>{L.remove(),I.complete()})}}Q=new WeakMap,m.FontLoader=x;class e{constructor(G,{isEvalSupported:I=!0,disableFontFace:f=!1,ignoreErrors:H=!1,inspectFont:U=null}){this.compiledGlyphs=Object.create(null);for(const T in G)this[T]=G[T];this.isEvalSupported=I!==!1,this.disableFontFace=f===!0,this.ignoreErrors=H===!0,this._inspectFont=U}createNativeFontFace(){var I;if(!this.data||this.disableFontFace)return null;let G;if(!this.cssFontInfo)G=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),G=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(I=this._inspectFont)==null||I.call(this,this),G}createFontFaceRule(){var H;if(!this.data||this.disableFontFace)return null;const G=(0,g.bytesToString)(this.data),I=`url(data:${this.mimetype};base64,${btoa(G)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${I}}`;else{let U=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(U+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${U}src:${I}}`}return(H=this._inspectFont)==null||H.call(this,this,I),f}getPathGenerator(G,I){if(this.compiledGlyphs[I]!==void 0)return this.compiledGlyphs[I];let f;try{f=G.get(this.loadedName+"_path_"+I)}catch(H){if(!this.ignoreErrors)throw H;return(0,g.warn)(`getPathGenerator - ignoring character: "${H}".`),this.compiledGlyphs[I]=function(U,T){}}if(this.isEvalSupported&&g.FeatureTest.isEvalSupported){const H=[];for(const U of f){const T=U.args!==void 0?U.args.join(","):"";H.push("c.",U.cmd,"(",T,`);
`)}return this.compiledGlyphs[I]=new Function("c","size",H.join(""))}return this.compiledGlyphs[I]=function(H,U){for(const T of f)T.cmd==="scale"&&(T.args=[U,-U]),H[T.cmd].apply(H,T.args)}}}m.FontFaceObject=e},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NodeStandardFontDataFactory=m.NodeFilterFactory=m.NodeCanvasFactory=m.NodeCMapReaderFactory=void 0;var g=bt(7);bt(1);const x=function(I){return new Promise((f,H)=>{require$$5.readFile(I,(T,A)=>{if(T||!A){H(new Error(T));return}f(new Uint8Array(A))})})};class e extends g.BaseFilterFactory{}m.NodeFilterFactory=e;class Q extends g.BaseCanvasFactory{_createCanvas(f,H){return require$$5.createCanvas(f,H)}}m.NodeCanvasFactory=Q;class Pt extends g.BaseCMapReaderFactory{_fetchData(f,H){return x(f).then(U=>({cMapData:U,compressionType:H}))}}m.NodeCMapReaderFactory=Pt;class G extends g.BaseStandardFontDataFactory{_fetchData(f){return x(f)}}m.NodeStandardFontDataFactory=G},(u,m,bt)=>{var $,Ki,kt,Ji;Object.defineProperty(m,"__esModule",{value:!0}),m.CanvasGraphics=void 0;var g=bt(1),x=bt(6),e=bt(12),Q=bt(13);const Pt=16,G=100,I=4096,f=15,H=10,U=1e3,T=16;function A(R,i){if(R._removeMirroring)throw new Error("Context is already forwarding operations.");R.__originalSave=R.save,R.__originalRestore=R.restore,R.__originalRotate=R.rotate,R.__originalScale=R.scale,R.__originalTranslate=R.translate,R.__originalTransform=R.transform,R.__originalSetTransform=R.setTransform,R.__originalResetTransform=R.resetTransform,R.__originalClip=R.clip,R.__originalMoveTo=R.moveTo,R.__originalLineTo=R.lineTo,R.__originalBezierCurveTo=R.bezierCurveTo,R.__originalRect=R.rect,R.__originalClosePath=R.closePath,R.__originalBeginPath=R.beginPath,R._removeMirroring=()=>{R.save=R.__originalSave,R.restore=R.__originalRestore,R.rotate=R.__originalRotate,R.scale=R.__originalScale,R.translate=R.__originalTranslate,R.transform=R.__originalTransform,R.setTransform=R.__originalSetTransform,R.resetTransform=R.__originalResetTransform,R.clip=R.__originalClip,R.moveTo=R.__originalMoveTo,R.lineTo=R.__originalLineTo,R.bezierCurveTo=R.__originalBezierCurveTo,R.rect=R.__originalRect,R.closePath=R.__originalClosePath,R.beginPath=R.__originalBeginPath,delete R._removeMirroring},R.save=function(){i.save(),this.__originalSave()},R.restore=function(){i.restore(),this.__originalRestore()},R.translate=function(s,c){i.translate(s,c),this.__originalTranslate(s,c)},R.scale=function(s,c){i.scale(s,c),this.__originalScale(s,c)},R.transform=function(s,c,h,w,_,O){i.transform(s,c,h,w,_,O),this.__originalTransform(s,c,h,w,_,O)},R.setTransform=function(s,c,h,w,_,O){i.setTransform(s,c,h,w,_,O),this.__originalSetTransform(s,c,h,w,_,O)},R.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},R.rotate=function(s){i.rotate(s),this.__originalRotate(s)},R.clip=function(s){i.clip(s),this.__originalClip(s)},R.moveTo=function(a,s){i.moveTo(a,s),this.__originalMoveTo(a,s)},R.lineTo=function(a,s){i.lineTo(a,s),this.__originalLineTo(a,s)},R.bezierCurveTo=function(a,s,c,h,w,_){i.bezierCurveTo(a,s,c,h,w,_),this.__originalBezierCurveTo(a,s,c,h,w,_)},R.rect=function(a,s,c,h){i.rect(a,s,c,h),this.__originalRect(a,s,c,h)},R.closePath=function(){i.closePath(),this.__originalClosePath()},R.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class C{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,a,s){let c;return this.cache[i]!==void 0?(c=this.cache[i],this.canvasFactory.reset(c,a,s)):(c=this.canvasFactory.create(a,s),this.cache[i]=c),c}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const a=this.cache[i];this.canvasFactory.destroy(a),delete this.cache[i]}}}function v(R,i,a,s,c,h,w,_,O,at){const[ct,mt,St,Dt,Ct,$t]=(0,x.getCurrentTransform)(R);if(mt===0&&St===0){const Zt=w*ct+Ct,Tt=Math.round(Zt),dt=_*Dt+$t,ot=Math.round(dt),wt=(w+O)*ct+Ct,Wt=Math.abs(Math.round(wt)-Tt)||1,Ut=(_+at)*Dt+$t,ce=Math.abs(Math.round(Ut)-ot)||1;return R.setTransform(Math.sign(ct),0,0,Math.sign(Dt),Tt,ot),R.drawImage(i,a,s,c,h,0,0,Wt,ce),R.setTransform(ct,mt,St,Dt,Ct,$t),[Wt,ce]}if(ct===0&&Dt===0){const Zt=_*St+Ct,Tt=Math.round(Zt),dt=w*mt+$t,ot=Math.round(dt),wt=(_+at)*St+Ct,Wt=Math.abs(Math.round(wt)-Tt)||1,Ut=(w+O)*mt+$t,ce=Math.abs(Math.round(Ut)-ot)||1;return R.setTransform(0,Math.sign(mt),Math.sign(St),0,Tt,ot),R.drawImage(i,a,s,c,h,0,0,ce,Wt),R.setTransform(ct,mt,St,Dt,Ct,$t),[ce,Wt]}R.drawImage(i,a,s,c,h,w,_,O,at);const Qt=Math.hypot(ct,mt),Ot=Math.hypot(St,Dt);return[Qt*O,Ot*at]}function E(R){const{width:i,height:a}=R;if(i>U||a>U)return null;const s=1e3,c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=i+1;let w=new Uint8Array(h*(a+1)),_,O,at;const ct=i+7&-8;let mt=new Uint8Array(ct*a),St=0;for(const Ot of R.data){let Zt=128;for(;Zt>0;)mt[St++]=Ot&Zt?0:255,Zt>>=1}let Dt=0;for(St=0,mt[St]!==0&&(w[0]=1,++Dt),O=1;O<i;O++)mt[St]!==mt[St+1]&&(w[O]=mt[St]?2:1,++Dt),St++;for(mt[St]!==0&&(w[O]=2,++Dt),_=1;_<a;_++){St=_*ct,at=_*h,mt[St-ct]!==mt[St]&&(w[at]=mt[St]?1:8,++Dt);let Ot=(mt[St]?4:0)+(mt[St-ct]?8:0);for(O=1;O<i;O++)Ot=(Ot>>2)+(mt[St+1]?4:0)+(mt[St-ct+1]?8:0),c[Ot]&&(w[at+O]=c[Ot],++Dt),St++;if(mt[St-ct]!==mt[St]&&(w[at+O]=mt[St]?2:4,++Dt),Dt>s)return null}for(St=ct*(a-1),at=_*h,mt[St]!==0&&(w[at]=8,++Dt),O=1;O<i;O++)mt[St]!==mt[St+1]&&(w[at+O]=mt[St]?4:8,++Dt),St++;if(mt[St]!==0&&(w[at+O]=4,++Dt),Dt>s)return null;const Ct=new Int32Array([0,h,-1,0,-h,0,0,0,1]),$t=new Path2D;for(_=0;Dt&&_<=a;_++){let Ot=_*h;const Zt=Ot+i;for(;Ot<Zt&&!w[Ot];)Ot++;if(Ot===Zt)continue;$t.moveTo(Ot%h,_);const Tt=Ot;let dt=w[Ot];do{const ot=Ct[dt];do Ot+=ot;while(!w[Ot]);const wt=w[Ot];wt!==5&&wt!==10?(dt=wt,w[Ot]=0):(dt=wt&51*dt>>4,w[Ot]&=dt>>2|dt<<2),$t.lineTo(Ot%h,Ot/h|0),w[Ot]||--Dt}while(Tt!==Ot);--_}return mt=null,w=null,function(Ot){Ot.save(),Ot.scale(1/i,-1/a),Ot.translate(0,-a),Ot.fill($t),Ot.beginPath(),Ot.restore()}}class F{constructor(i,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=g.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=g.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,a])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,a){this.x=i,this.y=a}updatePathMinMax(i,a,s){[a,s]=g.Util.applyTransform([a,s],i),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(i,a){const s=g.Util.applyTransform(a,i),c=g.Util.applyTransform(a.slice(2),i);this.minX=Math.min(this.minX,s[0],c[0]),this.minY=Math.min(this.minY,s[1],c[1]),this.maxX=Math.max(this.maxX,s[0],c[0]),this.maxY=Math.max(this.maxY,s[1],c[1])}updateScalingPathMinMax(i,a){g.Util.scaleMinMax(i,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(i,a,s,c,h,w,_,O,at,ct){const mt=g.Util.bezierBoundingBox(a,s,c,h,w,_,O,at);if(ct){ct[0]=Math.min(ct[0],mt[0],mt[2]),ct[1]=Math.max(ct[1],mt[0],mt[2]),ct[2]=Math.min(ct[2],mt[1],mt[3]),ct[3]=Math.max(ct[3],mt[1],mt[3]);return}this.updateRectMinMax(i,mt)}getPathBoundingBox(i=e.PathType.FILL,a=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(i===e.PathType.STROKE){a||(0,g.unreachable)("Stroke bounding box must include transform.");const c=g.Util.singularValueDecompose2dScale(a),h=c[0]*this.lineWidth/2,w=c[1]*this.lineWidth/2;s[0]-=h,s[1]-=w,s[2]+=h,s[3]+=w}return s}updateClipFromPath(){const i=g.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=e.PathType.FILL,a=null){return g.Util.intersect(this.clipBox,this.getPathBoundingBox(i,a))}}function M(R,i){if(typeof ImageData<"u"&&i instanceof ImageData){R.putImageData(i,0,0);return}const a=i.height,s=i.width,c=a%T,h=(a-c)/T,w=c===0?h:h+1,_=R.createImageData(s,T);let O=0,at;const ct=i.data,mt=_.data;let St,Dt,Ct,$t;if(i.kind===g.ImageKind.GRAYSCALE_1BPP){const Qt=ct.byteLength,Ot=new Uint32Array(mt.buffer,0,mt.byteLength>>2),Zt=Ot.length,Tt=s+7>>3,dt=4294967295,ot=g.FeatureTest.isLittleEndian?4278190080:255;for(St=0;St<w;St++){for(Ct=St<h?T:c,at=0,Dt=0;Dt<Ct;Dt++){const wt=Qt-O;let Wt=0;const Ut=wt>Tt?s:wt*8-7,ce=Ut&-8;let pe=0,de=0;for(;Wt<ce;Wt+=8)de=ct[O++],Ot[at++]=de&128?dt:ot,Ot[at++]=de&64?dt:ot,Ot[at++]=de&32?dt:ot,Ot[at++]=de&16?dt:ot,Ot[at++]=de&8?dt:ot,Ot[at++]=de&4?dt:ot,Ot[at++]=de&2?dt:ot,Ot[at++]=de&1?dt:ot;for(;Wt<Ut;Wt++)pe===0&&(de=ct[O++],pe=128),Ot[at++]=de&pe?dt:ot,pe>>=1}for(;at<Zt;)Ot[at++]=0;R.putImageData(_,0,St*T)}}else if(i.kind===g.ImageKind.RGBA_32BPP){for(Dt=0,$t=s*T*4,St=0;St<h;St++)mt.set(ct.subarray(O,O+$t)),O+=$t,R.putImageData(_,0,Dt),Dt+=T;St<w&&($t=s*c*4,mt.set(ct.subarray(O,O+$t)),R.putImageData(_,0,Dt))}else if(i.kind===g.ImageKind.RGB_24BPP)for(Ct=T,$t=s*Ct,St=0;St<w;St++){for(St>=h&&(Ct=c,$t=s*Ct),at=0,Dt=$t;Dt--;)mt[at++]=ct[O++],mt[at++]=ct[O++],mt[at++]=ct[O++],mt[at++]=255;R.putImageData(_,0,St*T)}else throw new Error(`bad image kind: ${i.kind}`)}function P(R,i){if(i.bitmap){R.drawImage(i.bitmap,0,0);return}const a=i.height,s=i.width,c=a%T,h=(a-c)/T,w=c===0?h:h+1,_=R.createImageData(s,T);let O=0;const at=i.data,ct=_.data;for(let mt=0;mt<w;mt++){const St=mt<h?T:c;({srcPos:O}=(0,Q.convertBlackAndWhiteToRGBA)({src:at,srcPos:O,dest:ct,width:s,height:St,nonBlackColor:0})),R.putImageData(_,0,mt*T)}}function o(R,i){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of a)R[s]!==void 0&&(i[s]=R[s]);R.setLineDash!==void 0&&(i.setLineDash(R.getLineDash()),i.lineDashOffset=R.lineDashOffset)}function d(R){if(R.strokeStyle=R.fillStyle="#000000",R.fillRule="nonzero",R.globalAlpha=1,R.lineWidth=1,R.lineCap="butt",R.lineJoin="miter",R.miterLimit=10,R.globalCompositeOperation="source-over",R.font="10px sans-serif",R.setLineDash!==void 0&&(R.setLineDash([]),R.lineDashOffset=0),!g.isNodeJS){const{filter:i}=R;i!=="none"&&i!==""&&(R.filter="none")}}function D(R,i,a,s){const c=R.length;for(let h=3;h<c;h+=4){const w=R[h];if(w===0)R[h-3]=i,R[h-2]=a,R[h-1]=s;else if(w<255){const _=255-w;R[h-3]=R[h-3]*w+i*_>>8,R[h-2]=R[h-2]*w+a*_>>8,R[h-1]=R[h-1]*w+s*_>>8}}}function y(R,i,a){const s=R.length,c=1/255;for(let h=3;h<s;h+=4){const w=a?a[R[h]]:R[h];i[h]=i[h]*w*c|0}}function l(R,i,a){const s=R.length;for(let c=3;c<s;c+=4){const h=R[c-3]*77+R[c-2]*152+R[c-1]*28;i[c]=a?i[c]*a[h>>8]>>8:i[c]*h>>16}}function L(R,i,a,s,c,h,w,_,O,at,ct){const mt=!!h,St=mt?h[0]:0,Dt=mt?h[1]:0,Ct=mt?h[2]:0,$t=c==="Luminosity"?l:y,Ot=Math.min(s,Math.ceil(1048576/a));for(let Zt=0;Zt<s;Zt+=Ot){const Tt=Math.min(Ot,s-Zt),dt=R.getImageData(_-at,Zt+(O-ct),a,Tt),ot=i.getImageData(_,Zt+O,a,Tt);mt&&D(dt.data,St,Dt,Ct),$t(dt.data,ot.data,w),i.putImageData(ot,_,Zt+O)}}function S(R,i,a,s){const c=s[0],h=s[1],w=s[2]-c,_=s[3]-h;w===0||_===0||(L(i.context,a,w,_,i.subtype,i.backdrop,i.transferMap,c,h,i.offsetX,i.offsetY),R.save(),R.globalAlpha=1,R.globalCompositeOperation="source-over",R.setTransform(1,0,0,1,0,0),R.drawImage(a.canvas,0,0),R.restore())}function q(R,i){const a=g.Util.singularValueDecompose2dScale(R);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*x.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:a[0]<=s||a[1]<=s}const Z=["butt","round","square"],k=["miter","round","bevel"],et={},pt={},Vt=class Vt{constructor(i,a,s,c,h,{optionalContentConfig:w,markedContentStack:_=null},O,at){W(this,$);W(this,kt);this.ctx=i,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=s,this.canvasFactory=c,this.filterFactory=h,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=_||[],this.optionalContentConfig=w,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=O,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=at,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,a=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):a}beginDrawing({transform:i,viewport:a,transparency:s=!1,background:c=null}){const h=this.ctx.canvas.width,w=this.ctx.canvas.height,_=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,h,w),this.ctx.fillStyle=_,s){const O=this.cachedCanvases.getCanvas("transparent",h,w);this.compositeCtx=this.ctx,this.transparentCanvas=O.canvas,this.ctx=O.context,this.ctx.save(),this.ctx.transform(...(0,x.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,x.getCurrentTransform)(this.ctx)}executeOperatorList(i,a,s,c){const h=i.argsArray,w=i.fnArray;let _=a||0;const O=h.length;if(O===_)return _;const at=O-_>H&&typeof s=="function",ct=at?Date.now()+f:0;let mt=0;const St=this.commonObjs,Dt=this.objs;let Ct;for(;;){if(c!==void 0&&_===c.nextBreakPoint)return c.breakIt(_,s),_;if(Ct=w[_],Ct!==g.OPS.dependency)this[Ct].apply(this,h[_]);else for(const $t of h[_]){const Qt=$t.startsWith("g_")?St:Dt;if(!Qt.has($t))return Qt.get($t,s),_}if(_++,_===O)return _;if(at&&++mt>H){if(Date.now()>ct)return s(),_;mt=0}}}endDrawing(){tt(this,$,Ki).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const a of i.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);i.clear()}this._cachedBitmapsMap.clear(),tt(this,kt,Ji).call(this)}_scaleImage(i,a){const s=i.width,c=i.height;let h=Math.max(Math.hypot(a[0],a[1]),1),w=Math.max(Math.hypot(a[2],a[3]),1),_=s,O=c,at="prescale1",ct,mt;for(;h>2&&_>1||w>2&&O>1;){let St=_,Dt=O;h>2&&_>1&&(St=_>=16384?Math.floor(_/2)-1||1:Math.ceil(_/2),h/=_/St),w>2&&O>1&&(Dt=O>=16384?Math.floor(O/2)-1||1:Math.ceil(O)/2,w/=O/Dt),ct=this.cachedCanvases.getCanvas(at,St,Dt),mt=ct.context,mt.clearRect(0,0,St,Dt),mt.drawImage(i,0,0,_,O,0,0,St,Dt),i=ct.canvas,_=St,O=Dt,at=at==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:_,paintHeight:O}}_createMaskCanvas(i){const a=this.ctx,{width:s,height:c}=i,h=this.current.fillColor,w=this.current.patternFill,_=(0,x.getCurrentTransform)(a);let O,at,ct,mt;if((i.bitmap||i.data)&&i.count>1){const Wt=i.bitmap||i.data.buffer;at=JSON.stringify(w?_:[_.slice(0,4),h]),O=this._cachedBitmapsMap.get(Wt),O||(O=new Map,this._cachedBitmapsMap.set(Wt,O));const Ut=O.get(at);if(Ut&&!w){const ce=Math.round(Math.min(_[0],_[2])+_[4]),pe=Math.round(Math.min(_[1],_[3])+_[5]);return{canvas:Ut,offsetX:ce,offsetY:pe}}ct=Ut}ct||(mt=this.cachedCanvases.getCanvas("maskCanvas",s,c),P(mt.context,i));let St=g.Util.transform(_,[1/s,0,0,-1/c,0,0]);St=g.Util.transform(St,[1,0,0,1,0,-c]);const Dt=g.Util.applyTransform([0,0],St),Ct=g.Util.applyTransform([s,c],St),$t=g.Util.normalizeRect([Dt[0],Dt[1],Ct[0],Ct[1]]),Qt=Math.round($t[2]-$t[0])||1,Ot=Math.round($t[3]-$t[1])||1,Zt=this.cachedCanvases.getCanvas("fillCanvas",Qt,Ot),Tt=Zt.context,dt=Math.min(Dt[0],Ct[0]),ot=Math.min(Dt[1],Ct[1]);Tt.translate(-dt,-ot),Tt.transform(...St),ct||(ct=this._scaleImage(mt.canvas,(0,x.getCurrentTransformInverse)(Tt)),ct=ct.img,O&&w&&O.set(at,ct)),Tt.imageSmoothingEnabled=q((0,x.getCurrentTransform)(Tt),i.interpolate),v(Tt,ct,0,0,ct.width,ct.height,0,0,s,c),Tt.globalCompositeOperation="source-in";const wt=g.Util.transform((0,x.getCurrentTransformInverse)(Tt),[1,0,0,1,-dt,-ot]);return Tt.fillStyle=w?h.getPattern(a,this,wt,e.PathType.FILL):h,Tt.fillRect(0,0,s,c),O&&!w&&(this.cachedCanvases.delete("fillCanvas"),O.set(at,Zt.canvas)),{canvas:Zt.canvas,offsetX:Math.round(dt),offsetY:Math.round(ot)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=Z[i]}setLineJoin(i){this.ctx.lineJoin=k[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,a){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(i),s.lineDashOffset=a)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[a,s]of i)switch(a){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,a=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(s,i,a);this.suspendedCtx=this.ctx,this.ctx=c.context;const h=this.ctx;h.setTransform(...(0,x.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,h),A(h,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,s=this.suspendedCtx;S(s,a,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,a,s,c,h,w){this.ctx.transform(i,a,s,c,h,w),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,a,s){const c=this.ctx,h=this.current;let w=h.x,_=h.y,O,at;const ct=(0,x.getCurrentTransform)(c),mt=ct[0]===0&&ct[3]===0||ct[1]===0&&ct[2]===0,St=mt?s.slice(0):null;for(let Dt=0,Ct=0,$t=i.length;Dt<$t;Dt++)switch(i[Dt]|0){case g.OPS.rectangle:w=a[Ct++],_=a[Ct++];const Qt=a[Ct++],Ot=a[Ct++],Zt=w+Qt,Tt=_+Ot;c.moveTo(w,_),Qt===0||Ot===0?c.lineTo(Zt,Tt):(c.lineTo(Zt,_),c.lineTo(Zt,Tt),c.lineTo(w,Tt)),mt||h.updateRectMinMax(ct,[w,_,Zt,Tt]),c.closePath();break;case g.OPS.moveTo:w=a[Ct++],_=a[Ct++],c.moveTo(w,_),mt||h.updatePathMinMax(ct,w,_);break;case g.OPS.lineTo:w=a[Ct++],_=a[Ct++],c.lineTo(w,_),mt||h.updatePathMinMax(ct,w,_);break;case g.OPS.curveTo:O=w,at=_,w=a[Ct+4],_=a[Ct+5],c.bezierCurveTo(a[Ct],a[Ct+1],a[Ct+2],a[Ct+3],w,_),h.updateCurvePathMinMax(ct,O,at,a[Ct],a[Ct+1],a[Ct+2],a[Ct+3],w,_,St),Ct+=6;break;case g.OPS.curveTo2:O=w,at=_,c.bezierCurveTo(w,_,a[Ct],a[Ct+1],a[Ct+2],a[Ct+3]),h.updateCurvePathMinMax(ct,O,at,w,_,a[Ct],a[Ct+1],a[Ct+2],a[Ct+3],St),w=a[Ct+2],_=a[Ct+3],Ct+=4;break;case g.OPS.curveTo3:O=w,at=_,w=a[Ct+2],_=a[Ct+3],c.bezierCurveTo(a[Ct],a[Ct+1],w,_,w,_),h.updateCurvePathMinMax(ct,O,at,a[Ct],a[Ct+1],w,_,w,_,St),Ct+=4;break;case g.OPS.closePath:c.closePath();break}mt&&h.updateScalingPathMinMax(ct,St),h.setCurrentPoint(w,_)}closePath(){this.ctx.closePath()}stroke(i=!0){const a=this.ctx,s=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(a.save(),a.strokeStyle=s.getPattern(a,this,(0,x.getCurrentTransformInverse)(a),e.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const a=this.ctx,s=this.current.fillColor,c=this.current.patternFill;let h=!1;c&&(a.save(),a.fillStyle=s.getPattern(a,this,(0,x.getCurrentTransformInverse)(a),e.PathType.FILL),h=!0);const w=this.current.getClippedPathBoundingBox();this.contentVisible&&w!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),h&&a.restore(),i&&this.consumePath(w)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=et}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=g.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,a=this.ctx;if(i===void 0){a.beginPath();return}a.save(),a.beginPath();for(const s of i)a.setTransform(...s.transform),a.translate(s.x,s.y),s.addToPath(a,s.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,a){var ct;const s=this.commonObjs.get(i),c=this.current;if(!s)throw new Error(`Can't find font for ${i}`);if(c.fontMatrix=s.fontMatrix||g.FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&(0,g.warn)("Invalid font matrix for font "+i),a<0?(a=-a,c.fontDirection=-1):c.fontDirection=1,this.current.font=s,this.current.fontSize=a,s.isType3Font)return;const h=s.loadedName||"sans-serif",w=((ct=s.systemFontInfo)==null?void 0:ct.css)||`"${h}", ${s.fallbackName}`;let _="normal";s.black?_="900":s.bold&&(_="bold");const O=s.italic?"italic":"normal";let at=a;a<Pt?at=Pt:a>G&&(at=G),this.current.fontSizeScale=a/at,this.ctx.font=`${O} ${_} ${at}px ${w}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,a){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=a}setLeadingMoveText(i,a){this.setLeading(-a),this.moveText(i,a)}setTextMatrix(i,a,s,c,h,w){this.current.textMatrix=[i,a,s,c,h,w],this.current.textMatrixScale=Math.hypot(i,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,a,s,c){const h=this.ctx,w=this.current,_=w.font,O=w.textRenderingMode,at=w.fontSize/w.fontSizeScale,ct=O&g.TextRenderingMode.FILL_STROKE_MASK,mt=!!(O&g.TextRenderingMode.ADD_TO_PATH_FLAG),St=w.patternFill&&!_.missingFile;let Dt;(_.disableFontFace||mt||St)&&(Dt=_.getPathGenerator(this.commonObjs,i)),_.disableFontFace||St?(h.save(),h.translate(a,s),h.beginPath(),Dt(h,at),c&&h.setTransform(...c),(ct===g.TextRenderingMode.FILL||ct===g.TextRenderingMode.FILL_STROKE)&&h.fill(),(ct===g.TextRenderingMode.STROKE||ct===g.TextRenderingMode.FILL_STROKE)&&h.stroke(),h.restore()):((ct===g.TextRenderingMode.FILL||ct===g.TextRenderingMode.FILL_STROKE)&&h.fillText(i,a,s),(ct===g.TextRenderingMode.STROKE||ct===g.TextRenderingMode.FILL_STROKE)&&h.strokeText(i,a,s)),mt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,x.getCurrentTransform)(h),x:a,y:s,fontSize:at,addToPath:Dt})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const a=i.getImageData(0,0,10,10).data;let s=!1;for(let c=3;c<a.length;c+=4)if(a[c]>0&&a[c]<255){s=!0;break}return(0,g.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(i){const a=this.current,s=a.font;if(s.isType3Font)return this.showType3Text(i);const c=a.fontSize;if(c===0)return;const h=this.ctx,w=a.fontSizeScale,_=a.charSpacing,O=a.wordSpacing,at=a.fontDirection,ct=a.textHScale*at,mt=i.length,St=s.vertical,Dt=St?1:-1,Ct=s.defaultVMetrics,$t=c*a.fontMatrix[0],Qt=a.textRenderingMode===g.TextRenderingMode.FILL&&!s.disableFontFace&&!a.patternFill;h.save(),h.transform(...a.textMatrix),h.translate(a.x,a.y+a.textRise),at>0?h.scale(ct,-1):h.scale(ct,1);let Ot;if(a.patternFill){h.save();const wt=a.fillColor.getPattern(h,this,(0,x.getCurrentTransformInverse)(h),e.PathType.FILL);Ot=(0,x.getCurrentTransform)(h),h.restore(),h.fillStyle=wt}let Zt=a.lineWidth;const Tt=a.textMatrixScale;if(Tt===0||Zt===0){const wt=a.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;(wt===g.TextRenderingMode.STROKE||wt===g.TextRenderingMode.FILL_STROKE)&&(Zt=this.getSinglePixelWidth())}else Zt/=Tt;if(w!==1&&(h.scale(w,w),Zt/=w),h.lineWidth=Zt,s.isInvalidPDFjsFont){const wt=[];let Wt=0;for(const Ut of i)wt.push(Ut.unicode),Wt+=Ut.width;h.fillText(wt.join(""),0,0),a.x+=Wt*$t*ct,h.restore(),this.compose();return}let dt=0,ot;for(ot=0;ot<mt;++ot){const wt=i[ot];if(typeof wt=="number"){dt+=Dt*wt*c/1e3;continue}let Wt=!1;const Ut=(wt.isSpace?O:0)+_,ce=wt.fontChar,pe=wt.accent;let de,me,ye=wt.width;if(St){const Ce=wt.vmetric||Ct,yt=-(wt.vmetric?Ce[1]:ye*.5)*$t,nt=Ce[2]*$t;ye=Ce?-Ce[0]:ye,de=yt/w,me=(dt+nt)/w}else de=dt/w,me=0;if(s.remeasure&&ye>0){const Ce=h.measureText(ce).width*1e3/c*w;if(ye<Ce&&this.isFontSubpixelAAEnabled){const yt=ye/Ce;Wt=!0,h.save(),h.scale(yt,1),de/=yt}else ye!==Ce&&(de+=(ye-Ce)/2e3*c/w)}if(this.contentVisible&&(wt.isInFont||s.missingFile)){if(Qt&&!pe)h.fillText(ce,de,me);else if(this.paintChar(ce,de,me,Ot),pe){const Ce=de+c*pe.offset.x/w,yt=me-c*pe.offset.y/w;this.paintChar(pe.fontChar,Ce,yt,Ot)}}const se=St?ye*$t-Ut*at:ye*$t+Ut*at;dt+=se,Wt&&h.restore()}St?a.y-=dt:a.x+=dt*ct,h.restore(),this.compose()}showType3Text(i){const a=this.ctx,s=this.current,c=s.font,h=s.fontSize,w=s.fontDirection,_=c.vertical?1:-1,O=s.charSpacing,at=s.wordSpacing,ct=s.textHScale*w,mt=s.fontMatrix||g.FONT_IDENTITY_MATRIX,St=i.length,Dt=s.textRenderingMode===g.TextRenderingMode.INVISIBLE;let Ct,$t,Qt,Ot;if(!(Dt||h===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...s.textMatrix),a.translate(s.x,s.y),a.scale(ct,w),Ct=0;Ct<St;++Ct){if($t=i[Ct],typeof $t=="number"){Ot=_*$t*h/1e3,this.ctx.translate(Ot,0),s.x+=Ot*ct;continue}const Zt=($t.isSpace?at:0)+O,Tt=c.charProcOperatorList[$t.operatorListId];if(!Tt){(0,g.warn)(`Type3 character "${$t.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=$t,this.save(),a.scale(h,h),a.transform(...mt),this.executeOperatorList(Tt),this.restore()),Qt=g.Util.applyTransform([$t.width,0],mt)[0]*h+Zt,a.translate(Qt,0),s.x+=Qt*ct}a.restore(),this.processingType3=null}}setCharWidth(i,a){}setCharWidthAndBounds(i,a,s,c,h,w){this.ctx.rect(s,c,h-s,w-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let a;if(i[0]==="TilingPattern"){const s=i[1],c=this.baseTransform||(0,x.getCurrentTransform)(this.ctx),h={createCanvasGraphics:w=>new Vt(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new e.TilingPattern(i,s,this.ctx,h,c)}else a=this._getPattern(i[1],i[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,a,s){const c=g.Util.makeHexColor(i,a,s);this.ctx.strokeStyle=c,this.current.strokeColor=c}setFillRGBColor(i,a,s){const c=g.Util.makeHexColor(i,a,s);this.ctx.fillStyle=c,this.current.fillColor=c,this.current.patternFill=!1}_getPattern(i,a=null){let s;return this.cachedPatterns.has(i)?s=this.cachedPatterns.get(i):(s=(0,e.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,s)),a&&(s.matrix=a),s}shadingFill(i){if(!this.contentVisible)return;const a=this.ctx;this.save();const s=this._getPattern(i);a.fillStyle=s.getPattern(a,this,(0,x.getCurrentTransformInverse)(a),e.PathType.SHADING);const c=(0,x.getCurrentTransformInverse)(a);if(c){const{width:h,height:w}=a.canvas,[_,O,at,ct]=g.Util.getAxialAlignedBoundingBox([0,0,h,w],c);this.ctx.fillRect(_,O,at-_,ct-O)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,g.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,g.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,x.getCurrentTransform)(this.ctx),a)){const s=a[2]-a[0],c=a[3]-a[1];this.ctx.rect(a[0],a[1],s,c),this.current.updateRectMinMax((0,x.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;i.isolated||(0,g.info)("TODO: Support non-isolated groups."),i.knockout&&(0,g.warn)("Knockout groups not supported.");const s=(0,x.getCurrentTransform)(a);if(i.matrix&&a.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let c=g.Util.getAxialAlignedBoundingBox(i.bbox,(0,x.getCurrentTransform)(a));const h=[0,0,a.canvas.width,a.canvas.height];c=g.Util.intersect(c,h)||[0,0,0,0];const w=Math.floor(c[0]),_=Math.floor(c[1]);let O=Math.max(Math.ceil(c[2])-w,1),at=Math.max(Math.ceil(c[3])-_,1),ct=1,mt=1;O>I&&(ct=O/I,O=I),at>I&&(mt=at/I,at=I),this.current.startNewPathAndClipBox([0,0,O,at]);let St="groupAt"+this.groupLevel;i.smask&&(St+="_smask_"+this.smaskCounter++%2);const Dt=this.cachedCanvases.getCanvas(St,O,at),Ct=Dt.context;Ct.scale(1/ct,1/mt),Ct.translate(-w,-_),Ct.transform(...s),i.smask?this.smaskStack.push({canvas:Dt.canvas,context:Ct,offsetX:w,offsetY:_,scaleX:ct,scaleY:mt,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(w,_),a.scale(ct,mt),a.save()),o(a,Ct),this.ctx=Ct,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=(0,x.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const h=g.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],c);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(i,a,s,c,h){if(tt(this,$,Ki).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const w=a[2]-a[0],_=a[3]-a[1];if(h&&this.annotationCanvasMap){s=s.slice(),s[4]-=a[0],s[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=w,a[3]=_;const[O,at]=g.Util.singularValueDecompose2dScale((0,x.getCurrentTransform)(this.ctx)),{viewportScale:ct}=this,mt=Math.ceil(w*this.outputScaleX*ct),St=Math.ceil(_*this.outputScaleY*ct);this.annotationCanvas=this.canvasFactory.create(mt,St);const{canvas:Dt,context:Ct}=this.annotationCanvas;this.annotationCanvasMap.set(i,Dt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ct,this.ctx.save(),this.ctx.setTransform(O,0,0,-at,0,_*at),d(this.ctx)}else d(this.ctx),this.ctx.rect(a[0],a[1],w,_),this.ctx.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),tt(this,kt,Ji).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const a=i.count;i=this.getObject(i.data,i),i.count=a;const s=this.ctx,c=this.processingType3;if(c&&(c.compiled===void 0&&(c.compiled=E(i)),c.compiled)){c.compiled(s);return}const h=this._createMaskCanvas(i),w=h.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(w,h.offsetX,h.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(i,a,s=0,c=0,h,w){if(!this.contentVisible)return;i=this.getObject(i.data,i);const _=this.ctx;_.save();const O=(0,x.getCurrentTransform)(_);_.transform(a,s,c,h,0,0);const at=this._createMaskCanvas(i);_.setTransform(1,0,0,1,at.offsetX-O[4],at.offsetY-O[5]);for(let ct=0,mt=w.length;ct<mt;ct+=2){const St=g.Util.transform(O,[a,s,c,h,w[ct],w[ct+1]]),[Dt,Ct]=g.Util.applyTransform([0,0],St);_.drawImage(at.canvas,Dt,Ct)}_.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const a=this.ctx,s=this.current.fillColor,c=this.current.patternFill;for(const h of i){const{data:w,width:_,height:O,transform:at}=h,ct=this.cachedCanvases.getCanvas("maskCanvas",_,O),mt=ct.context;mt.save();const St=this.getObject(w,h);P(mt,St),mt.globalCompositeOperation="source-in",mt.fillStyle=c?s.getPattern(mt,this,(0,x.getCurrentTransformInverse)(a),e.PathType.FILL):s,mt.fillRect(0,0,_,O),mt.restore(),a.save(),a.transform(...at),a.scale(1,-1),v(a,ct.canvas,0,0,_,O,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const a=this.getObject(i);if(!a){(0,g.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(i,a,s,c){if(!this.contentVisible)return;const h=this.getObject(i);if(!h){(0,g.warn)("Dependent image isn't ready yet");return}const w=h.width,_=h.height,O=[];for(let at=0,ct=c.length;at<ct;at+=2)O.push({transform:[a,0,0,s,c[at],c[at+1]],x:0,y:0,w,h:_});this.paintInlineImageXObjectGroup(h,O)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:a,width:s,height:c}=i,h=this.cachedCanvases.getCanvas("inlineImage",s,c),w=h.context;return w.filter=this.current.transferMaps,w.drawImage(a,0,0),w.filter="none",h.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const a=i.width,s=i.height,c=this.ctx;if(this.save(),!g.isNodeJS){const{filter:_}=c;_!=="none"&&_!==""&&(c.filter="none")}c.scale(1/a,-1/s);let h;if(i.bitmap)h=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)h=i;else{const O=this.cachedCanvases.getCanvas("inlineImage",a,s).context;M(O,i),h=this.applyTransferMapsToCanvas(O)}const w=this._scaleImage(h,(0,x.getCurrentTransformInverse)(c));c.imageSmoothingEnabled=q((0,x.getCurrentTransform)(c),i.interpolate),v(c,w.img,0,0,w.paintWidth,w.paintHeight,0,-s,a,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,a){if(!this.contentVisible)return;const s=this.ctx;let c;if(i.bitmap)c=i.bitmap;else{const h=i.width,w=i.height,O=this.cachedCanvases.getCanvas("inlineImage",h,w).context;M(O,i),c=this.applyTransferMapsToCanvas(O)}for(const h of a)s.save(),s.transform(...h.transform),s.scale(1,-1),v(s,c,h.x,h.y,h.w,h.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,a){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,a){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip&&(a||(this.pendingClip===pt?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,x.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const a=Math.abs(i[0]*i[3]-i[2]*i[1]),s=Math.hypot(i[0],i[2]),c=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(s,c)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a,b:s,c,d:h}=this.ctx.getTransform();let w,_;if(s===0&&c===0){const O=Math.abs(a),at=Math.abs(h);if(O===at)if(i===0)w=_=1/O;else{const ct=O*i;w=_=ct<1?1/ct:1}else if(i===0)w=1/O,_=1/at;else{const ct=O*i,mt=at*i;w=ct<1?1/ct:1,_=mt<1?1/mt:1}}else{const O=Math.abs(a*h-s*c),at=Math.hypot(a,s),ct=Math.hypot(c,h);if(i===0)w=ct/O,_=at/O;else{const mt=i*O;w=ct>mt?ct/mt:1,_=at>mt?at/mt:1}}this._cachedScaleForStroking[0]=w,this._cachedScaleForStroking[1]=_}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:a}=this,{lineWidth:s}=this.current,[c,h]=this.getScaleForStroking();if(a.lineWidth=s||1,c===1&&h===1){a.stroke();return}const w=a.getLineDash();if(i&&a.save(),a.scale(c,h),w.length>0){const _=Math.max(c,h);a.setLineDash(w.map(O=>O/_)),a.lineDashOffset/=_}a.stroke(),i&&a.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};$=new WeakSet,Ki=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},kt=new WeakSet,Ji=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const a=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}};let vt=Vt;m.CanvasGraphics=vt;for(const R in g.OPS)vt.prototype[R]!==void 0&&(vt.prototype[g.OPS[R]]=vt.prototype[R])},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TilingPattern=m.PathType=void 0,m.getShadingPattern=T;var g=bt(1),x=bt(6);const e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};m.PathType=e;function Q(E,F){if(!F)return;const M=F[2]-F[0],P=F[3]-F[1],o=new Path2D;o.rect(F[0],F[1],M,P),E.clip(o)}class Pt{constructor(){this.constructor===Pt&&(0,g.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,g.unreachable)("Abstract method `getPattern` called.")}}class G extends Pt{constructor(F){super(),this._type=F[1],this._bbox=F[2],this._colorStops=F[3],this._p0=F[4],this._p1=F[5],this._r0=F[6],this._r1=F[7],this.matrix=null}_createGradient(F){let M;this._type==="axial"?M=F.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(M=F.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const P of this._colorStops)M.addColorStop(P[0],P[1]);return M}getPattern(F,M,P,o){let d;if(o===e.STROKE||o===e.FILL){const D=M.current.getClippedPathBoundingBox(o,(0,x.getCurrentTransform)(F))||[0,0,0,0],y=Math.ceil(D[2]-D[0])||1,l=Math.ceil(D[3]-D[1])||1,L=M.cachedCanvases.getCanvas("pattern",y,l,!0),S=L.context;S.clearRect(0,0,S.canvas.width,S.canvas.height),S.beginPath(),S.rect(0,0,S.canvas.width,S.canvas.height),S.translate(-D[0],-D[1]),P=g.Util.transform(P,[1,0,0,1,D[0],D[1]]),S.transform(...M.baseTransform),this.matrix&&S.transform(...this.matrix),Q(S,this._bbox),S.fillStyle=this._createGradient(S),S.fill(),d=F.createPattern(L.canvas,"no-repeat");const q=new DOMMatrix(P);d.setTransform(q)}else Q(F,this._bbox),d=this._createGradient(F);return d}}function I(E,F,M,P,o,d,D,y){const l=F.coords,L=F.colors,S=E.data,q=E.width*4;let Z;l[M+1]>l[P+1]&&(Z=M,M=P,P=Z,Z=d,d=D,D=Z),l[P+1]>l[o+1]&&(Z=P,P=o,o=Z,Z=D,D=y,y=Z),l[M+1]>l[P+1]&&(Z=M,M=P,P=Z,Z=d,d=D,D=Z);const k=(l[M]+F.offsetX)*F.scaleX,et=(l[M+1]+F.offsetY)*F.scaleY,pt=(l[P]+F.offsetX)*F.scaleX,vt=(l[P+1]+F.offsetY)*F.scaleY,$=(l[o]+F.offsetX)*F.scaleX,At=(l[o+1]+F.offsetY)*F.scaleY;if(et>=At)return;const kt=L[d],Bt=L[d+1],Vt=L[d+2],R=L[D],i=L[D+1],a=L[D+2],s=L[y],c=L[y+1],h=L[y+2],w=Math.round(et),_=Math.round(At);let O,at,ct,mt,St,Dt,Ct,$t;for(let Qt=w;Qt<=_;Qt++){if(Qt<vt){const ot=Qt<et?0:(et-Qt)/(et-vt);O=k-(k-pt)*ot,at=kt-(kt-R)*ot,ct=Bt-(Bt-i)*ot,mt=Vt-(Vt-a)*ot}else{let ot;Qt>At?ot=1:vt===At?ot=0:ot=(vt-Qt)/(vt-At),O=pt-(pt-$)*ot,at=R-(R-s)*ot,ct=i-(i-c)*ot,mt=a-(a-h)*ot}let Ot;Qt<et?Ot=0:Qt>At?Ot=1:Ot=(et-Qt)/(et-At),St=k-(k-$)*Ot,Dt=kt-(kt-s)*Ot,Ct=Bt-(Bt-c)*Ot,$t=Vt-(Vt-h)*Ot;const Zt=Math.round(Math.min(O,St)),Tt=Math.round(Math.max(O,St));let dt=q*Qt+Zt*4;for(let ot=Zt;ot<=Tt;ot++)Ot=(O-ot)/(O-St),Ot<0?Ot=0:Ot>1&&(Ot=1),S[dt++]=at-(at-Dt)*Ot|0,S[dt++]=ct-(ct-Ct)*Ot|0,S[dt++]=mt-(mt-$t)*Ot|0,S[dt++]=255}}function f(E,F,M){const P=F.coords,o=F.colors;let d,D;switch(F.type){case"lattice":const y=F.verticesPerRow,l=Math.floor(P.length/y)-1,L=y-1;for(d=0;d<l;d++){let S=d*y;for(let q=0;q<L;q++,S++)I(E,M,P[S],P[S+1],P[S+y],o[S],o[S+1],o[S+y]),I(E,M,P[S+y+1],P[S+1],P[S+y],o[S+y+1],o[S+1],o[S+y])}break;case"triangles":for(d=0,D=P.length;d<D;d+=3)I(E,M,P[d],P[d+1],P[d+2],o[d],o[d+1],o[d+2]);break;default:throw new Error("illegal figure")}}class H extends Pt{constructor(F){super(),this._coords=F[2],this._colors=F[3],this._figures=F[4],this._bounds=F[5],this._bbox=F[7],this._background=F[8],this.matrix=null}_createMeshCanvas(F,M,P){const y=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),L=Math.ceil(this._bounds[2])-y,S=Math.ceil(this._bounds[3])-l,q=Math.min(Math.ceil(Math.abs(L*F[0]*1.1)),3e3),Z=Math.min(Math.ceil(Math.abs(S*F[1]*1.1)),3e3),k=L/q,et=S/Z,pt={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-l,scaleX:1/k,scaleY:1/et},vt=q+2*2,$=Z+2*2,At=P.getCanvas("mesh",vt,$,!1),kt=At.context,Bt=kt.createImageData(q,Z);if(M){const R=Bt.data;for(let i=0,a=R.length;i<a;i+=4)R[i]=M[0],R[i+1]=M[1],R[i+2]=M[2],R[i+3]=255}for(const R of this._figures)f(Bt,R,pt);return kt.putImageData(Bt,2,2),{canvas:At.canvas,offsetX:y-2*k,offsetY:l-2*et,scaleX:k,scaleY:et}}getPattern(F,M,P,o){Q(F,this._bbox);let d;if(o===e.SHADING)d=g.Util.singularValueDecompose2dScale((0,x.getCurrentTransform)(F));else if(d=g.Util.singularValueDecompose2dScale(M.baseTransform),this.matrix){const y=g.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*y[0],d[1]*y[1]]}const D=this._createMeshCanvas(d,o===e.SHADING?null:this._background,M.cachedCanvases);return o!==e.SHADING&&(F.setTransform(...M.baseTransform),this.matrix&&F.transform(...this.matrix)),F.translate(D.offsetX,D.offsetY),F.scale(D.scaleX,D.scaleY),F.createPattern(D.canvas,"no-repeat")}}class U extends Pt{getPattern(){return"hotpink"}}function T(E){switch(E[0]){case"RadialAxial":return new G(E);case"Mesh":return new H(E);case"Dummy":return new U}throw new Error(`Unknown IR type: ${E[0]}`)}const A={COLORED:1,UNCOLORED:2},v=class v{constructor(F,M,P,o,d){this.operatorList=F[2],this.matrix=F[3]||[1,0,0,1,0,0],this.bbox=F[4],this.xstep=F[5],this.ystep=F[6],this.paintType=F[7],this.tilingType=F[8],this.color=M,this.ctx=P,this.canvasGraphicsFactory=o,this.baseTransform=d}createPatternCanvas(F){const M=this.operatorList,P=this.bbox,o=this.xstep,d=this.ystep,D=this.paintType,y=this.tilingType,l=this.color,L=this.canvasGraphicsFactory;(0,g.info)("TilingType: "+y);const S=P[0],q=P[1],Z=P[2],k=P[3],et=g.Util.singularValueDecompose2dScale(this.matrix),pt=g.Util.singularValueDecompose2dScale(this.baseTransform),vt=[et[0]*pt[0],et[1]*pt[1]],$=this.getSizeAndScale(o,this.ctx.canvas.width,vt[0]),At=this.getSizeAndScale(d,this.ctx.canvas.height,vt[1]),kt=F.cachedCanvases.getCanvas("pattern",$.size,At.size,!0),Bt=kt.context,Vt=L.createCanvasGraphics(Bt);Vt.groupLevel=F.groupLevel,this.setFillAndStrokeStyleToContext(Vt,D,l);let R=S,i=q,a=Z,s=k;return S<0&&(R=0,a+=Math.abs(S)),q<0&&(i=0,s+=Math.abs(q)),Bt.translate(-($.scale*R),-(At.scale*i)),Vt.transform($.scale,0,0,At.scale,0,0),Bt.save(),this.clipBbox(Vt,R,i,a,s),Vt.baseTransform=(0,x.getCurrentTransform)(Vt.ctx),Vt.executeOperatorList(M),Vt.endDrawing(),{canvas:kt.canvas,scaleX:$.scale,scaleY:At.scale,offsetX:R,offsetY:i}}getSizeAndScale(F,M,P){F=Math.abs(F);const o=Math.max(v.MAX_PATTERN_SIZE,M);let d=Math.ceil(F*P);return d>=o?d=o:P=d/F,{scale:P,size:d}}clipBbox(F,M,P,o,d){const D=o-M,y=d-P;F.ctx.rect(M,P,D,y),F.current.updateRectMinMax((0,x.getCurrentTransform)(F.ctx),[M,P,o,d]),F.clip(),F.endPath()}setFillAndStrokeStyleToContext(F,M,P){const o=F.ctx,d=F.current;switch(M){case A.COLORED:const D=this.ctx;o.fillStyle=D.fillStyle,o.strokeStyle=D.strokeStyle,d.fillColor=D.fillStyle,d.strokeColor=D.strokeStyle;break;case A.UNCOLORED:const y=g.Util.makeHexColor(P[0],P[1],P[2]);o.fillStyle=y,o.strokeStyle=y,d.fillColor=y,d.strokeColor=y;break;default:throw new g.FormatError(`Unsupported paint type: ${M}`)}}getPattern(F,M,P,o){let d=P;o!==e.SHADING&&(d=g.Util.transform(d,M.baseTransform),this.matrix&&(d=g.Util.transform(d,this.matrix)));const D=this.createPatternCanvas(M);let y=new DOMMatrix(d);y=y.translate(D.offsetX,D.offsetY),y=y.scale(1/D.scaleX,1/D.scaleY);const l=F.createPattern(D.canvas,"repeat");return l.setTransform(y),l}};Qe(v,"MAX_PATTERN_SIZE",3e3);let C=v;m.TilingPattern=C},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.convertBlackAndWhiteToRGBA=e,m.convertToRGBA=x,m.grayToRGBA=Pt;var g=bt(1);function x(G){switch(G.kind){case g.ImageKind.GRAYSCALE_1BPP:return e(G);case g.ImageKind.RGB_24BPP:return Q(G)}return null}function e({src:G,srcPos:I=0,dest:f,width:H,height:U,nonBlackColor:T=4294967295,inverseDecode:A=!1}){const C=g.FeatureTest.isLittleEndian?4278190080:255,[v,E]=A?[T,C]:[C,T],F=H>>3,M=H&7,P=G.length;f=new Uint32Array(f.buffer);let o=0;for(let d=0;d<U;d++){for(const y=I+F;I<y;I++){const l=I<P?G[I]:255;f[o++]=l&128?E:v,f[o++]=l&64?E:v,f[o++]=l&32?E:v,f[o++]=l&16?E:v,f[o++]=l&8?E:v,f[o++]=l&4?E:v,f[o++]=l&2?E:v,f[o++]=l&1?E:v}if(M===0)continue;const D=I<P?G[I++]:255;for(let y=0;y<M;y++)f[o++]=D&1<<7-y?E:v}return{srcPos:I,destPos:o}}function Q({src:G,srcPos:I=0,dest:f,destPos:H=0,width:U,height:T}){let A=0;const C=G.length>>2,v=new Uint32Array(G.buffer,I,C);if(g.FeatureTest.isLittleEndian){for(;A<C-2;A+=3,H+=4){const E=v[A],F=v[A+1],M=v[A+2];f[H]=E|4278190080,f[H+1]=E>>>24|F<<8|4278190080,f[H+2]=F>>>16|M<<16|4278190080,f[H+3]=M>>>8|4278190080}for(let E=A*4,F=G.length;E<F;E+=3)f[H++]=G[E]|G[E+1]<<8|G[E+2]<<16|4278190080}else{for(;A<C-2;A+=3,H+=4){const E=v[A],F=v[A+1],M=v[A+2];f[H]=E|255,f[H+1]=E<<24|F>>>8|255,f[H+2]=F<<16|M>>>16|255,f[H+3]=M<<8|255}for(let E=A*4,F=G.length;E<F;E+=3)f[H++]=G[E]<<24|G[E+1]<<16|G[E+2]<<8|255}return{srcPos:I,destPos:H}}function Pt(G,I){if(g.FeatureTest.isLittleEndian)for(let f=0,H=G.length;f<H;f++)I[f]=G[f]*65793|4278190080;else for(let f=0,H=G.length;f<H;f++)I[f]=G[f]*16843008|255}},(u,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GlobalWorkerOptions=void 0;const bt=Object.create(null);m.GlobalWorkerOptions=bt,bt.workerPort=null,bt.workerSrc=""},(u,m,bt)=>{var G,zr,f,Vr,U,pi;Object.defineProperty(m,"__esModule",{value:!0}),m.MessageHandler=void 0;var g=bt(1);const x={UNKNOWN:0,DATA:1,ERROR:2},e={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Q(A){switch(A instanceof Error||typeof A=="object"&&A!==null||(0,g.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new g.AbortException(A.message);case"MissingPDFException":return new g.MissingPDFException(A.message);case"PasswordException":return new g.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new g.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new g.UnknownErrorException(A.message,A.details);default:return new g.UnknownErrorException(A.message,A.toString())}}class Pt{constructor(C,v,E){W(this,G);W(this,f);W(this,U);this.sourceName=C,this.targetName=v,this.comObj=E,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=F=>{const M=F.data;if(M.targetName!==this.sourceName)return;if(M.stream){tt(this,f,Vr).call(this,M);return}if(M.callback){const o=M.callbackId,d=this.callbackCapabilities[o];if(!d)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],M.callback===x.DATA)d.resolve(M.data);else if(M.callback===x.ERROR)d.reject(Q(M.reason));else throw new Error("Unexpected callback case");return}const P=this.actionHandler[M.action];if(!P)throw new Error(`Unknown action from worker: ${M.action}`);if(M.callbackId){const o=this.sourceName,d=M.sourceName;new Promise(function(D){D(P(M.data))}).then(function(D){E.postMessage({sourceName:o,targetName:d,callback:x.DATA,callbackId:M.callbackId,data:D})},function(D){E.postMessage({sourceName:o,targetName:d,callback:x.ERROR,callbackId:M.callbackId,reason:Q(D)})});return}if(M.streamId){tt(this,G,zr).call(this,M);return}P(M.data)},E.addEventListener("message",this._onComObjOnMessage)}on(C,v){const E=this.actionHandler;if(E[C])throw new Error(`There is already an actionName called "${C}"`);E[C]=v}send(C,v,E){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,data:v},E)}sendWithPromise(C,v,E){const F=this.callbackId++,M=new g.PromiseCapability;this.callbackCapabilities[F]=M;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,callbackId:F,data:v},E)}catch(P){M.reject(P)}return M.promise}sendWithStream(C,v,E,F){const M=this.streamId++,P=this.sourceName,o=this.targetName,d=this.comObj;return new ReadableStream({start:D=>{const y=new g.PromiseCapability;return this.streamControllers[M]={controller:D,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:P,targetName:o,action:C,streamId:M,data:v,desiredSize:D.desiredSize},F),y.promise},pull:D=>{const y=new g.PromiseCapability;return this.streamControllers[M].pullCall=y,d.postMessage({sourceName:P,targetName:o,stream:e.PULL,streamId:M,desiredSize:D.desiredSize}),y.promise},cancel:D=>{(0,g.assert)(D instanceof Error,"cancel must have a valid reason");const y=new g.PromiseCapability;return this.streamControllers[M].cancelCall=y,this.streamControllers[M].isClosed=!0,d.postMessage({sourceName:P,targetName:o,stream:e.CANCEL,streamId:M,reason:Q(D)}),y.promise}},E)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}G=new WeakSet,zr=function(C){const v=C.streamId,E=this.sourceName,F=C.sourceName,M=this.comObj,P=this,o=this.actionHandler[C.action],d={enqueue(D,y=1,l){if(this.isCancelled)return;const L=this.desiredSize;this.desiredSize-=y,L>0&&this.desiredSize<=0&&(this.sinkCapability=new g.PromiseCapability,this.ready=this.sinkCapability.promise),M.postMessage({sourceName:E,targetName:F,stream:e.ENQUEUE,streamId:v,chunk:D},l)},close(){this.isCancelled||(this.isCancelled=!0,M.postMessage({sourceName:E,targetName:F,stream:e.CLOSE,streamId:v}),delete P.streamSinks[v])},error(D){(0,g.assert)(D instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,M.postMessage({sourceName:E,targetName:F,stream:e.ERROR,streamId:v,reason:Q(D)}))},sinkCapability:new g.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:C.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[v]=d,new Promise(function(D){D(o(C.data,d))}).then(function(){M.postMessage({sourceName:E,targetName:F,stream:e.START_COMPLETE,streamId:v,success:!0})},function(D){M.postMessage({sourceName:E,targetName:F,stream:e.START_COMPLETE,streamId:v,reason:Q(D)})})},f=new WeakSet,Vr=function(C){const v=C.streamId,E=this.sourceName,F=C.sourceName,M=this.comObj,P=this.streamControllers[v],o=this.streamSinks[v];switch(C.stream){case e.START_COMPLETE:C.success?P.startCall.resolve():P.startCall.reject(Q(C.reason));break;case e.PULL_COMPLETE:C.success?P.pullCall.resolve():P.pullCall.reject(Q(C.reason));break;case e.PULL:if(!o){M.postMessage({sourceName:E,targetName:F,stream:e.PULL_COMPLETE,streamId:v,success:!0});break}o.desiredSize<=0&&C.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=C.desiredSize,new Promise(function(d){var D;d((D=o.onPull)==null?void 0:D.call(o))}).then(function(){M.postMessage({sourceName:E,targetName:F,stream:e.PULL_COMPLETE,streamId:v,success:!0})},function(d){M.postMessage({sourceName:E,targetName:F,stream:e.PULL_COMPLETE,streamId:v,reason:Q(d)})});break;case e.ENQUEUE:if((0,g.assert)(P,"enqueue should have stream controller"),P.isClosed)break;P.controller.enqueue(C.chunk);break;case e.CLOSE:if((0,g.assert)(P,"close should have stream controller"),P.isClosed)break;P.isClosed=!0,P.controller.close(),tt(this,U,pi).call(this,P,v);break;case e.ERROR:(0,g.assert)(P,"error should have stream controller"),P.controller.error(Q(C.reason)),tt(this,U,pi).call(this,P,v);break;case e.CANCEL_COMPLETE:C.success?P.cancelCall.resolve():P.cancelCall.reject(Q(C.reason)),tt(this,U,pi).call(this,P,v);break;case e.CANCEL:if(!o)break;new Promise(function(d){var D;d((D=o.onCancel)==null?void 0:D.call(o,Q(C.reason)))}).then(function(){M.postMessage({sourceName:E,targetName:F,stream:e.CANCEL_COMPLETE,streamId:v,success:!0})},function(d){M.postMessage({sourceName:E,targetName:F,stream:e.CANCEL_COMPLETE,streamId:v,reason:Q(d)})}),o.sinkCapability.reject(Q(C.reason)),o.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}},U=new WeakSet,pi=async function(C,v){var E,F,M;await Promise.allSettled([(E=C.startCall)==null?void 0:E.promise,(F=C.pullCall)==null?void 0:F.promise,(M=C.cancelCall)==null?void 0:M.promise]),delete this.streamControllers[v]},m.MessageHandler=Pt},(u,m,bt)=>{var e,Q;Object.defineProperty(m,"__esModule",{value:!0}),m.Metadata=void 0;var g=bt(1);class x{constructor({parsedData:G,rawData:I}){W(this,e,void 0);W(this,Q,void 0);ft(this,e,G),ft(this,Q,I)}getRaw(){return t(this,Q)}get(G){return t(this,e).get(G)??null}getAll(){return(0,g.objectFromMap)(t(this,e))}has(G){return t(this,e).has(G)}}e=new WeakMap,Q=new WeakMap,m.Metadata=x},(u,m,bt)=>{var G,I,f,H,U,T,Zi;Object.defineProperty(m,"__esModule",{value:!0}),m.OptionalContentConfig=void 0;var g=bt(1),x=bt(8);const e=Symbol("INTERNAL");class Q{constructor(v,E){W(this,G,!0);this.name=v,this.intent=E}get visible(){return t(this,G)}_setVisible(v,E){v!==e&&(0,g.unreachable)("Internal method `_setVisible` called."),ft(this,G,E)}}G=new WeakMap;class Pt{constructor(v){W(this,T);W(this,I,null);W(this,f,new Map);W(this,H,null);W(this,U,null);if(this.name=null,this.creator=null,v!==null){this.name=v.name,this.creator=v.creator,ft(this,U,v.order);for(const E of v.groups)t(this,f).set(E.id,new Q(E.name,E.intent));if(v.baseState==="OFF")for(const E of t(this,f).values())E._setVisible(e,!1);for(const E of v.on)t(this,f).get(E)._setVisible(e,!0);for(const E of v.off)t(this,f).get(E)._setVisible(e,!1);ft(this,H,this.getHash())}}isVisible(v){if(t(this,f).size===0)return!0;if(!v)return(0,g.warn)("Optional content group not defined."),!0;if(v.type==="OCG")return t(this,f).has(v.id)?t(this,f).get(v.id).visible:((0,g.warn)(`Optional content group not found: ${v.id}`),!0);if(v.type==="OCMD"){if(v.expression)return tt(this,T,Zi).call(this,v.expression);if(!v.policy||v.policy==="AnyOn"){for(const E of v.ids){if(!t(this,f).has(E))return(0,g.warn)(`Optional content group not found: ${E}`),!0;if(t(this,f).get(E).visible)return!0}return!1}else if(v.policy==="AllOn"){for(const E of v.ids){if(!t(this,f).has(E))return(0,g.warn)(`Optional content group not found: ${E}`),!0;if(!t(this,f).get(E).visible)return!1}return!0}else if(v.policy==="AnyOff"){for(const E of v.ids){if(!t(this,f).has(E))return(0,g.warn)(`Optional content group not found: ${E}`),!0;if(!t(this,f).get(E).visible)return!0}return!1}else if(v.policy==="AllOff"){for(const E of v.ids){if(!t(this,f).has(E))return(0,g.warn)(`Optional content group not found: ${E}`),!0;if(t(this,f).get(E).visible)return!1}return!0}return(0,g.warn)(`Unknown optional content policy ${v.policy}.`),!0}return(0,g.warn)(`Unknown group type ${v.type}.`),!0}setVisibility(v,E=!0){if(!t(this,f).has(v)){(0,g.warn)(`Optional content group not found: ${v}`);return}t(this,f).get(v)._setVisible(e,!!E),ft(this,I,null)}get hasInitialVisibility(){return t(this,H)===null||this.getHash()===t(this,H)}getOrder(){return t(this,f).size?t(this,U)?t(this,U).slice():[...t(this,f).keys()]:null}getGroups(){return t(this,f).size>0?(0,g.objectFromMap)(t(this,f)):null}getGroup(v){return t(this,f).get(v)||null}getHash(){if(t(this,I)!==null)return t(this,I);const v=new x.MurmurHash3_64;for(const[E,F]of t(this,f))v.update(`${E}:${F.visible}`);return ft(this,I,v.hexdigest())}}I=new WeakMap,f=new WeakMap,H=new WeakMap,U=new WeakMap,T=new WeakSet,Zi=function(v){const E=v.length;if(E<2)return!0;const F=v[0];for(let M=1;M<E;M++){const P=v[M];let o;if(Array.isArray(P))o=tt(this,T,Zi).call(this,P);else if(t(this,f).has(P))o=t(this,f).get(P).visible;else return(0,g.warn)(`Optional content group not found: ${P}`),!0;switch(F){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return F==="And"},m.OptionalContentConfig=Pt},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFDataTransportStream=void 0;var g=bt(1),x=bt(6);class e{constructor({length:I,initialData:f,progressiveDone:H=!1,contentDispositionFilename:U=null,disableRange:T=!1,disableStream:A=!1},C){if((0,g.assert)(C,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=H,this._contentDispositionFilename=U,(f==null?void 0:f.length)>0){const v=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=C,this._isStreamingSupported=!A,this._isRangeSupported=!T,this._contentLength=I,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,E)=>{this._onReceiveData({begin:v,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((v,E)=>{this._onProgress({loaded:v,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:I,chunk:f}){const H=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(I===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(H):this._queuedChunks.push(H);else{const U=this._rangeReaders.some(function(T){return T._begin!==I?!1:(T._enqueue(H),!0)});(0,g.assert)(U,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var I;return((I=this._fullRequestReader)==null?void 0:I._loaded)??0}_onProgress(I){var f,H,U,T;I.total===void 0?(H=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||H.call(f,{loaded:I.loaded}):(T=(U=this._fullRequestReader)==null?void 0:U.onProgress)==null||T.call(U,{loaded:I.loaded,total:I.total})}_onProgressiveDone(){var I;(I=this._fullRequestReader)==null||I.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(I){const f=this._rangeReaders.indexOf(I);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,g.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const I=this._queuedChunks;return this._queuedChunks=null,new Q(this,I,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(I,f){if(f<=this._progressiveDataLength)return null;const H=new Pt(this,I,f);return this._pdfDataRangeTransport.requestDataRange(I,f),this._rangeReaders.push(H),H}cancelAllRequests(I){var f;(f=this._fullRequestReader)==null||f.cancel(I);for(const H of this._rangeReaders.slice(0))H.cancel(I);this._pdfDataRangeTransport.abort()}}m.PDFDataTransportStream=e;class Q{constructor(I,f,H=!1,U=null){this._stream=I,this._done=H||!1,this._filename=(0,x.isPdfFile)(U)?U:null,this._queuedChunks=f||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),I._fullRequestReader=this,this.onProgress=null}_enqueue(I){this._done||(this._requests.length>0?this._requests.shift().resolve({value:I,done:!1}):this._queuedChunks.push(I),this._loaded+=I.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const I=new g.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Pt{constructor(I,f,H){this._stream=I,this._begin=f,this._end=H,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(I){if(!this._done){if(this._requests.length===0)this._queuedChunk=I;else{this._requests.shift().resolve({value:I,done:!1});for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const I=new g.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFFetchStream=void 0;var g=bt(1),x=bt(20);function e(H,U,T){return{method:"GET",headers:H,signal:T.signal,mode:"cors",credentials:U?"include":"same-origin",redirect:"follow"}}function Q(H){const U=new Headers;for(const T in H){const A=H[T];A!==void 0&&U.append(T,A)}return U}function Pt(H){return H instanceof Uint8Array?H.buffer:H instanceof ArrayBuffer?H:((0,g.warn)(`getArrayBuffer - unexpected data format: ${H}`),new Uint8Array(H).buffer)}class G{constructor(U){this.source=U,this.isHttp=/^https?:/i.test(U.url),this.httpHeaders=this.isHttp&&U.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var U;return((U=this._fullRequestReader)==null?void 0:U._loaded)??0}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new I(this),this._fullRequestReader}getRangeReader(U,T){if(T<=this._progressiveDataLength)return null;const A=new f(this,U,T);return this._rangeRequestReaders.push(A),A}cancelAllRequests(U){var T;(T=this._fullRequestReader)==null||T.cancel(U);for(const A of this._rangeRequestReaders.slice(0))A.cancel(U)}}m.PDFFetchStream=G;class I{constructor(U){this._stream=U,this._reader=null,this._loaded=0,this._filename=null;const T=U.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=new g.PromiseCapability,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=Q(this._stream.httpHeaders);const A=T.url;fetch(A,e(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,x.validateResponseStatus)(C.status))throw(0,x.createResponseStatusError)(C.status,A);this._reader=C.body.getReader(),this._headersCapability.resolve();const v=M=>C.headers.get(M),{allowRangeRequests:E,suggestedLength:F}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=F||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new g.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._headersCapability.promise;const{value:U,done:T}=await this._reader.read();return T?{value:U,done:T}:(this._loaded+=U.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Pt(U),done:!1})}cancel(U){var T;(T=this._reader)==null||T.cancel(U),this._abortController.abort()}}class f{constructor(U,T,A){this._stream=U,this._reader=null,this._loaded=0;const C=U.source;this._withCredentials=C.withCredentials||!1,this._readCapability=new g.PromiseCapability,this._isStreamingSupported=!C.disableStream,this._abortController=new AbortController,this._headers=Q(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${A-1}`);const v=C.url;fetch(v,e(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,x.validateResponseStatus)(E.status))throw(0,x.createResponseStatusError)(E.status,v);this._readCapability.resolve(),this._reader=E.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._readCapability.promise;const{value:U,done:T}=await this._reader.read();return T?{value:U,done:T}:(this._loaded+=U.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:Pt(U),done:!1})}cancel(U){var T;(T=this._reader)==null||T.cancel(U),this._abortController.abort()}}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.createResponseStatusError=G,m.extractFilenameFromHeader=Pt,m.validateRangeRequestCapabilities=Q,m.validateResponseStatus=I;var g=bt(1),x=bt(21),e=bt(6);function Q({getResponseHeader:f,isHttp:H,rangeChunkSize:U,disableRange:T}){const A={allowRangeRequests:!1,suggestedLength:void 0},C=parseInt(f("Content-Length"),10);return!Number.isInteger(C)||(A.suggestedLength=C,C<=2*U)||T||!H||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function Pt(f){const H=f("Content-Disposition");if(H){let U=(0,x.getFilenameFromContentDispositionHeader)(H);if(U.includes("%"))try{U=decodeURIComponent(U)}catch{}if((0,e.isPdfFile)(U))return U}return null}function G(f,H){return f===404||f===0&&H.startsWith("file:")?new g.MissingPDFException('Missing PDF "'+H+'".'):new g.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${H}".`,f)}function I(f){return f===200||f===206}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.getFilenameFromContentDispositionHeader=x;var g=bt(1);function x(e){let Q=!0,Pt=G("filename\\*","i").exec(e);if(Pt){Pt=Pt[1];let C=U(Pt);return C=unescape(C),C=T(C),C=A(C),f(C)}if(Pt=H(e),Pt){const C=A(Pt);return f(C)}if(Pt=G("filename","i").exec(e),Pt){Pt=Pt[1];let C=U(Pt);return C=A(C),f(C)}function G(C,v){return new RegExp("(?:^|;)\\s*"+C+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function I(C,v){if(C){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const E=new TextDecoder(C,{fatal:!0}),F=(0,g.stringToBytes)(v);v=E.decode(F),Q=!1}catch{}}return v}function f(C){return Q&&/[\x80-\xff]/.test(C)&&(C=I("utf-8",C),Q&&(C=I("iso-8859-1",C))),C}function H(C){const v=[];let E;const F=G("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(E=F.exec(C))!==null;){let[,P,o,d]=E;if(P=parseInt(P,10),P in v){if(P===0)break;continue}v[P]=[o,d]}const M=[];for(let P=0;P<v.length&&P in v;++P){let[o,d]=v[P];d=U(d),o&&(d=unescape(d),P===0&&(d=T(d))),M.push(d)}return M.join("")}function U(C){if(C.startsWith('"')){const v=C.slice(1).split('\\"');for(let E=0;E<v.length;++E){const F=v[E].indexOf('"');F!==-1&&(v[E]=v[E].slice(0,F),v.length=E+1),v[E]=v[E].replaceAll(/\\(.)/g,"$1")}C=v.join('"')}return C}function T(C){const v=C.indexOf("'");if(v===-1)return C;const E=C.slice(0,v),M=C.slice(v+1).replace(/^[^']*'/,"");return I(E,M)}function A(C){return!C.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(C)?C:C.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,E,F,M){if(F==="q"||F==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(P,o){return String.fromCharCode(parseInt(o,16))}),I(E,M);try{M=atob(M)}catch{}return I(E,M)})}return""}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNetworkStream=void 0;var g=bt(1),x=bt(20);const e=200,Q=206;function Pt(U){const T=U.response;return typeof T!="string"?T:(0,g.stringToBytes)(T).buffer}class G{constructor(T,A={}){this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&A.httpHeaders||Object.create(null),this.withCredentials=A.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,A,C){const v={begin:T,end:A};for(const E in C)v[E]=C[E];return this.request(v)}requestFull(T){return this.request(T)}request(T){const A=new XMLHttpRequest,C=this.currXhrId++,v=this.pendingRequests[C]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const E in this.httpHeaders){const F=this.httpHeaders[E];F!==void 0&&A.setRequestHeader(E,F)}return this.isHttp&&"begin"in T&&"end"in T?(A.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),v.expectedStatus=Q):v.expectedStatus=e,A.responseType="arraybuffer",T.onError&&(A.onerror=function(E){T.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,C),A.onprogress=this.onProgress.bind(this,C),v.onHeadersReceived=T.onHeadersReceived,v.onDone=T.onDone,v.onError=T.onError,v.onProgress=T.onProgress,A.send(null),C}onProgress(T,A){var v;const C=this.pendingRequests[T];C&&((v=C.onProgress)==null||v.call(C,A))}onStateChange(T,A){var P,o,d;const C=this.pendingRequests[T];if(!C)return;const v=C.xhr;if(v.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),v.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],v.status===0&&this.isHttp){(P=C.onError)==null||P.call(C,v.status);return}const E=v.status||e;if(!(E===e&&C.expectedStatus===Q)&&E!==C.expectedStatus){(o=C.onError)==null||o.call(C,v.status);return}const M=Pt(v);if(E===Q){const D=v.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(D);C.onDone({begin:parseInt(y[1],10),chunk:M})}else M?C.onDone({begin:0,chunk:M}):(d=C.onError)==null||d.call(C,v.status)}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const A=this.pendingRequests[T].xhr;delete this.pendingRequests[T],A.abort()}}class I{constructor(T){this._source=T,this._manager=new G(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const A=this._rangeRequestReaders.indexOf(T);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(T,A){const C=new H(this._manager,T,A);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}cancelAllRequests(T){var A;(A=this._fullRequestReader)==null||A.cancel(T);for(const C of this._rangeRequestReaders.slice(0))C.cancel(T)}}m.PDFNetworkStream=I;class f{constructor(T,A){this._manager=T;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=T.requestFull(C),this._headersReceivedCapability=new g.PromiseCapability,this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,A=this._manager.getRequestXhr(T),C=F=>A.getResponseHeader(F),{allowRangeRequests:v,suggestedLength:E}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=E||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,x.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var A;(A=this.onProgress)==null||A.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new g.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H{constructor(T,A,C){this._manager=T;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(A,C,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)==null||T.call(this,this)}_onDone(T){const A=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,x.createResponseStatusError)(T,this._url);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){var A;this.isStreamingSupported||(A=this.onProgress)==null||A.call(this,{loaded:T.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new g.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNodeStream=void 0;var g=bt(1),x=bt(20);const e=/^file:\/\/\/[a-zA-Z]:\//;function Q(C){const v=require$$5,E=v.parse(C);return E.protocol==="file:"||E.host?E:/^[a-z]:[/\\]/i.test(C)?v.parse(`file:///${C}`):(E.host||(E.protocol="file:"),E)}class Pt{constructor(v){this.source=v,this.url=Q(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new H(this),this._fullRequestReader}getRangeReader(v,E){if(E<=this._progressiveDataLength)return null;const F=this.isFsUrl?new A(this,v,E):new U(this,v,E);return this._rangeRequestReaders.push(F),F}cancelAllRequests(v){var E;(E=this._fullRequestReader)==null||E.cancel(v);for(const F of this._rangeRequestReaders.slice(0))F.cancel(v)}}m.PDFNodeStream=Pt;class G{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const E=v.source;this._contentLength=E.length,this._loaded=0,this._filename=null,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._readableStream=null,this._readCapability=new g.PromiseCapability,this._headersCapability=new g.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new g.PromiseCapability,this.read()):(this._loaded+=v.length,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",E=>{this._error(E)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new g.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class I{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new g.PromiseCapability;const E=v.source;this._isStreamingSupported=!E.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new g.PromiseCapability,this.read()):(this._loaded+=v.length,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",E=>{this._error(E)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(C,v){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:v}}class H extends G{constructor(v){super(v);const E=F=>{if(F.statusCode===404){const d=new g.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(F);const M=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:P,suggestedLength:o}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=o||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(M)};if(this._request=null,this._url.protocol==="http:"){const F=require$$5;this._request=F.request(f(this._url,v.httpHeaders),E)}else{const F=require$$5;this._request=F.request(f(this._url,v.httpHeaders),E)}this._request.on("error",F=>{this._storedError=F,this._headersCapability.reject(F)}),this._request.end()}}class U extends I{constructor(v,E,F){super(v),this._httpHeaders={};for(const P in v.httpHeaders){const o=v.httpHeaders[P];o!==void 0&&(this._httpHeaders[P]=o)}this._httpHeaders.Range=`bytes=${E}-${F-1}`;const M=P=>{if(P.statusCode===404){const o=new g.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(P)};if(this._request=null,this._url.protocol==="http:"){const P=require$$5;this._request=P.request(f(this._url,this._httpHeaders),M)}else{const P=require$$5;this._request=P.request(f(this._url,this._httpHeaders),M)}this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class T extends G{constructor(v){super(v);let E=decodeURIComponent(this._url.path);e.test(this._url.href)&&(E=E.replace(/^\//,""));const F=require$$5;F.lstat(E,(M,P)=>{if(M){M.code==="ENOENT"&&(M=new g.MissingPDFException(`Missing PDF "${E}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=P.size,this._setReadableStream(F.createReadStream(E)),this._headersCapability.resolve()})}}class A extends I{constructor(v,E,F){super(v);let M=decodeURIComponent(this._url.path);e.test(this._url.href)&&(M=M.replace(/^\//,""));const P=require$$5;this._setReadableStream(P.createReadStream(M,{start:E,end:F-1}))}}},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SVGGraphics=void 0;var g=bt(6),x=bt(1);const e={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Q="http://www.w3.org/XML/1998/namespace",Pt="http://www.w3.org/1999/xlink",G=["butt","round","square"],I=["miter","round","bevel"],f=function(P,o="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([P],{type:o}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${o};base64,`;for(let l=0,L=P.length;l<L;l+=3){const S=P[l]&255,q=P[l+1]&255,Z=P[l+2]&255,k=S>>2,et=(S&3)<<4|q>>4,pt=l+1<L?(q&15)<<2|Z>>6:64,vt=l+2<L?Z&63:64;y+=D[k]+D[et]+D[pt]+D[vt]}return y},H=function(){const P=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,d=new Int32Array(256);for(let Z=0;Z<256;Z++){let k=Z;for(let et=0;et<8;et++)k=k&1?3988292384^k>>1&2147483647:k>>1&2147483647;d[Z]=k}function D(Z,k,et){let pt=-1;for(let vt=k;vt<et;vt++){const $=(pt^Z[vt])&255,At=d[$];pt=pt>>>8^At}return pt^-1}function y(Z,k,et,pt){let vt=pt;const $=k.length;et[vt]=$>>24&255,et[vt+1]=$>>16&255,et[vt+2]=$>>8&255,et[vt+3]=$&255,vt+=4,et[vt]=Z.charCodeAt(0)&255,et[vt+1]=Z.charCodeAt(1)&255,et[vt+2]=Z.charCodeAt(2)&255,et[vt+3]=Z.charCodeAt(3)&255,vt+=4,et.set(k,vt),vt+=k.length;const At=D(et,pt+4,vt);et[vt]=At>>24&255,et[vt+1]=At>>16&255,et[vt+2]=At>>8&255,et[vt+3]=At&255}function l(Z,k,et){let pt=1,vt=0;for(let $=k;$<et;++$)pt=(pt+(Z[$]&255))%65521,vt=(vt+pt)%65521;return vt<<16|pt}function L(Z){if(!x.isNodeJS)return S(Z);try{const k=parseInt(process.versions.node)>=8?Z:Buffer.from(Z),et=require$$5.deflateSync(k,{level:9});return et instanceof Uint8Array?et:new Uint8Array(et)}catch(k){(0,x.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+k)}return S(Z)}function S(Z){let k=Z.length;const et=65535,pt=Math.ceil(k/et),vt=new Uint8Array(2+k+pt*5+4);let $=0;vt[$++]=120,vt[$++]=156;let At=0;for(;k>et;)vt[$++]=0,vt[$++]=255,vt[$++]=255,vt[$++]=0,vt[$++]=0,vt.set(Z.subarray(At,At+et),$),$+=et,At+=et,k-=et;vt[$++]=1,vt[$++]=k&255,vt[$++]=k>>8&255,vt[$++]=~k&65535&255,vt[$++]=(~k&65535)>>8&255,vt.set(Z.subarray(At),$),$+=Z.length-At;const kt=l(Z,0,Z.length);return vt[$++]=kt>>24&255,vt[$++]=kt>>16&255,vt[$++]=kt>>8&255,vt[$++]=kt&255,vt}function q(Z,k,et,pt){const vt=Z.width,$=Z.height;let At,kt,Bt;const Vt=Z.data;switch(k){case x.ImageKind.GRAYSCALE_1BPP:kt=0,At=1,Bt=vt+7>>3;break;case x.ImageKind.RGB_24BPP:kt=2,At=8,Bt=vt*3;break;case x.ImageKind.RGBA_32BPP:kt=6,At=8,Bt=vt*4;break;default:throw new Error("invalid format")}const R=new Uint8Array((1+Bt)*$);let i=0,a=0;for(let O=0;O<$;++O)R[i++]=0,R.set(Vt.subarray(a,a+Bt),i),a+=Bt,i+=Bt;if(k===x.ImageKind.GRAYSCALE_1BPP&&pt){i=0;for(let O=0;O<$;O++){i++;for(let at=0;at<Bt;at++)R[i++]^=255}}const s=new Uint8Array([vt>>24&255,vt>>16&255,vt>>8&255,vt&255,$>>24&255,$>>16&255,$>>8&255,$&255,At,kt,0,0,0]),c=L(R),h=P.length+o*3+s.length+c.length,w=new Uint8Array(h);let _=0;return w.set(P,_),_+=P.length,y("IHDR",s,w,_),_+=o+s.length,y("IDATA",c,w,_),_+=o+c.length,y("IEND",new Uint8Array(0),w,_),f(w,"image/png",et)}return function(k,et,pt){const vt=k.kind===void 0?x.ImageKind.GRAYSCALE_1BPP:k.kind;return q(k,vt,et,pt)}}();class U{constructor(){this.fontSizeScale=1,this.fontWeight=e.fontWeight,this.fontSize=0,this.textMatrix=x.IDENTITY_MATRIX,this.fontMatrix=x.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=x.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=e.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,d){this.x=o,this.y=d}}function T(P){let o=[];const d=[];for(const D of P){if(D.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),d.push(o),o=o.at(-1).items;continue}D.fn==="restore"?o=d.pop():o.push(D)}return o}function A(P){if(Number.isInteger(P))return P.toString();const o=P.toFixed(10);let d=o.length-1;if(o[d]!=="0")return o;do d--;while(o[d]==="0");return o.substring(0,o[d]==="."?d:d+1)}function C(P){if(P[4]===0&&P[5]===0){if(P[1]===0&&P[2]===0)return P[0]===1&&P[3]===1?"":`scale(${A(P[0])} ${A(P[3])})`;if(P[0]===P[3]&&P[1]===-P[2]){const o=Math.acos(P[0])*180/Math.PI;return`rotate(${A(o)})`}}else if(P[0]===1&&P[1]===0&&P[2]===0&&P[3]===1)return`translate(${A(P[4])} ${A(P[5])})`;return`matrix(${A(P[0])} ${A(P[1])} ${A(P[2])} ${A(P[3])} ${A(P[4])} ${A(P[5])})`}let v=0,E=0,F=0;class M{constructor(o,d,D=!1){(0,g.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new g.DOMSVGFactory,this.current=new U,this.transformMatrix=x.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const y in x.OPS)this._operatorIdMapping[x.OPS[y]]=y}getObject(o,d=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):d}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const d=o.fnArray,D=o.argsArray;for(let y=0,l=d.length;y<l;y++)if(d[y]===x.OPS.dependency)for(const L of D[y]){const S=L.startsWith("g_")?this.commonObjs:this.objs,q=new Promise(Z=>{S.get(L,Z)});this.current.dependencies.push(q)}return Promise.all(this.current.dependencies)}transform(o,d,D,y,l,L){const S=[o,d,D,y,l,L];this.transformMatrix=x.Util.transform(this.transformMatrix,S),this.tgrp=null}getSVG(o,d){this.viewport=d;const D=this._initialize(d);return this.loadDependencies(o).then(()=>(this.transformMatrix=x.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),D))}convertOpList(o){const d=this._operatorIdMapping,D=o.argsArray,y=o.fnArray,l=[];for(let L=0,S=y.length;L<S;L++){const q=y[L];l.push({fnId:q,fn:d[q],args:D[L]})}return T(l)}executeOpTree(o){for(const d of o){const D=d.fn,y=d.fnId,l=d.args;switch(y|0){case x.OPS.beginText:this.beginText();break;case x.OPS.dependency:break;case x.OPS.setLeading:this.setLeading(l);break;case x.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case x.OPS.setFont:this.setFont(l);break;case x.OPS.showText:this.showText(l[0]);break;case x.OPS.showSpacedText:this.showText(l[0]);break;case x.OPS.endText:this.endText();break;case x.OPS.moveText:this.moveText(l[0],l[1]);break;case x.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case x.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case x.OPS.setHScale:this.setHScale(l[0]);break;case x.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case x.OPS.setTextRise:this.setTextRise(l[0]);break;case x.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case x.OPS.setLineWidth:this.setLineWidth(l[0]);break;case x.OPS.setLineJoin:this.setLineJoin(l[0]);break;case x.OPS.setLineCap:this.setLineCap(l[0]);break;case x.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case x.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case x.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case x.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case x.OPS.setFillColorN:this.setFillColorN(l);break;case x.OPS.shadingFill:this.shadingFill(l[0]);break;case x.OPS.setDash:this.setDash(l[0],l[1]);break;case x.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case x.OPS.setFlatness:this.setFlatness(l[0]);break;case x.OPS.setGState:this.setGState(l[0]);break;case x.OPS.fill:this.fill();break;case x.OPS.eoFill:this.eoFill();break;case x.OPS.stroke:this.stroke();break;case x.OPS.fillStroke:this.fillStroke();break;case x.OPS.eoFillStroke:this.eoFillStroke();break;case x.OPS.clip:this.clip("nonzero");break;case x.OPS.eoClip:this.clip("evenodd");break;case x.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case x.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case x.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case x.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case x.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case x.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case x.OPS.closePath:this.closePath();break;case x.OPS.closeStroke:this.closeStroke();break;case x.OPS.closeFillStroke:this.closeFillStroke();break;case x.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case x.OPS.nextLine:this.nextLine();break;case x.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case x.OPS.constructPath:this.constructPath(l[0],l[1]);break;case x.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,x.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,d,D,y,l,L){const S=this.current;S.textMatrix=S.lineMatrix=[o,d,D,y,l,L],S.textMatrixScale=Math.hypot(o,d),S.x=S.lineX=0,S.y=S.lineY=0,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${A(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",A(-S.y)),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtElement.append(S.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=x.IDENTITY_MATRIX,o.lineMatrix=x.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,d){const D=this.current;D.x=D.lineX+=o,D.y=D.lineY+=d,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${A(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",A(-D.y))}showText(o){const d=this.current,D=d.font,y=d.fontSize;if(y===0)return;const l=d.fontSizeScale,L=d.charSpacing,S=d.wordSpacing,q=d.fontDirection,Z=d.textHScale*q,k=D.vertical,et=k?1:-1,pt=D.defaultVMetrics,vt=y*d.fontMatrix[0];let $=0;for(const Bt of o){if(Bt===null){$+=q*S;continue}else if(typeof Bt=="number"){$+=et*Bt*y/1e3;continue}const Vt=(Bt.isSpace?S:0)+L,R=Bt.fontChar;let i,a,s=Bt.width;if(k){let h;const w=Bt.vmetric||pt;h=Bt.vmetric?w[1]:s*.5,h=-h*vt;const _=w[2]*vt;s=w?-w[0]:s,i=h/l,a=($+_)/l}else i=$/l,a=0;(Bt.isInFont||D.missingFile)&&(d.xcoords.push(d.x+i),k&&d.ycoords.push(-d.y+a),d.tspan.textContent+=R);const c=k?s*vt-Vt*q:s*vt+Vt*q;$+=c}d.tspan.setAttributeNS(null,"x",d.xcoords.map(A).join(" ")),k?d.tspan.setAttributeNS(null,"y",d.ycoords.map(A).join(" ")):d.tspan.setAttributeNS(null,"y",A(-d.y)),k?d.y-=$:d.x+=$*Z,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${A(d.fontSize)}px`),d.fontStyle!==e.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==e.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const At=d.textRenderingMode&x.TextRenderingMode.FILL_STROKE_MASK;if(At===x.TextRenderingMode.FILL||At===x.TextRenderingMode.FILL_STROKE?(d.fillColor!==e.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===x.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),At===x.TextRenderingMode.STROKE||At===x.TextRenderingMode.FILL_STROKE){const Bt=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,Bt)}let kt=d.textMatrix;d.textRise!==0&&(kt=kt.slice(),kt[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${C(kt)} scale(${A(Z)}, -1)`),d.txtElement.setAttributeNS(Q,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(o,d){this.setLeading(-d),this.moveText(o,d)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=f(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${d}); }
`}setFont(o){const d=this.current,D=this.commonObjs.get(o[0]);let y=o[1];d.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),d.fontMatrix=D.fontMatrix||x.FONT_IDENTITY_MATRIX;let l="normal";D.black?l="900":D.bold&&(l="bold");const L=D.italic?"italic":"normal";y<0?(y=-y,d.fontDirection=-1):d.fontDirection=1,d.fontSize=y,d.fontFamily=D.loadedName,d.fontWeight=l,d.fontStyle=L,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",A(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const o=this.current;o.textRenderingMode&x.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=o.txtElement)!=null&&d.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=G[o]}setLineJoin(o){this.current.lineJoin=I[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,d,D){this.current.strokeColor=x.Util.makeHexColor(o,d,D)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,d,D){this.current.fillColor=x.Util.makeHexColor(o,d,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:d,height:D}=this.viewport,y=x.Util.inverseTransform(this.transformMatrix),[l,L,S,q]=x.Util.getAxialAlignedBoundingBox([0,0,d,D],y),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",l),Z.setAttributeNS(null,"y",L),Z.setAttributeNS(null,"width",S-l),Z.setAttributeNS(null,"height",q-L),Z.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Z)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const d=o[1],D=o[2],y=o[3]||x.IDENTITY_MATRIX,[l,L,S,q]=o[4],Z=o[5],k=o[6],et=o[7],pt=`shading${F++}`,[vt,$,At,kt]=x.Util.normalizeRect([...x.Util.applyTransform([l,L],y),...x.Util.applyTransform([S,q],y)]),[Bt,Vt]=x.Util.singularValueDecompose2dScale(y),R=Z*Bt,i=k*Vt,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",pt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",R),a.setAttributeNS(null,"height",i),a.setAttributeNS(null,"x",`${vt}`),a.setAttributeNS(null,"y",`${$}`);const s=this.svg,c=this.transformMatrix,h=this.current.fillColor,w=this.current.strokeColor,_=this.svgFactory.create(At-vt,kt-$);if(this.svg=_,this.transformMatrix=y,et===2){const O=x.Util.makeHexColor(...d);this.current.fillColor=O,this.current.strokeColor=O}return this.executeOpTree(this.convertOpList(D)),this.svg=s,this.transformMatrix=c,this.current.fillColor=h,this.current.strokeColor=w,a.append(_.childNodes[0]),this.defs.append(a),`url(#${pt})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const d=`shading${F++}`,D=o[3];let y;switch(o[1]){case"axial":const l=o[4],L=o[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",d),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",l[0]),y.setAttributeNS(null,"y1",l[1]),y.setAttributeNS(null,"x2",L[0]),y.setAttributeNS(null,"y2",L[1]);break;case"radial":const S=o[4],q=o[5],Z=o[6],k=o[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",d),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",q[0]),y.setAttributeNS(null,"cy",q[1]),y.setAttributeNS(null,"r",k),y.setAttributeNS(null,"fx",S[0]),y.setAttributeNS(null,"fy",S[1]),y.setAttributeNS(null,"fr",Z);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const l of D){const L=this.svgFactory.createElement("svg:stop");L.setAttributeNS(null,"offset",l[0]),L.setAttributeNS(null,"stop-color",l[1]),y.append(L)}return this.defs.append(y),`url(#${d})`;case"Mesh":return(0,x.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,d){this.current.dashArray=o,this.current.dashPhase=d}constructPath(o,d){const D=this.current;let y=D.x,l=D.y,L=[],S=0;for(const q of o)switch(q|0){case x.OPS.rectangle:y=d[S++],l=d[S++];const Z=d[S++],k=d[S++],et=y+Z,pt=l+k;L.push("M",A(y),A(l),"L",A(et),A(l),"L",A(et),A(pt),"L",A(y),A(pt),"Z");break;case x.OPS.moveTo:y=d[S++],l=d[S++],L.push("M",A(y),A(l));break;case x.OPS.lineTo:y=d[S++],l=d[S++],L.push("L",A(y),A(l));break;case x.OPS.curveTo:y=d[S+4],l=d[S+5],L.push("C",A(d[S]),A(d[S+1]),A(d[S+2]),A(d[S+3]),A(y),A(l)),S+=6;break;case x.OPS.curveTo2:L.push("C",A(y),A(l),A(d[S]),A(d[S+1]),A(d[S+2]),A(d[S+3])),y=d[S+2],l=d[S+3],S+=4;break;case x.OPS.curveTo3:y=d[S+2],l=d[S+3],L.push("C",A(d[S]),A(d[S+1]),A(y),A(l),A(y),A(l)),S+=4;break;case x.OPS.closePath:L.push("Z");break}L=L.join(" "),D.path&&o.length>0&&o[0]!==x.OPS.rectangle&&o[0]!==x.OPS.moveTo?L=D.path.getAttributeNS(null,"d")+L:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",L),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(y,l)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const d=`clippath${v++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",d),D.setAttributeNS(null,"transform",C(this.transformMatrix));const y=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(y),this.defs.append(D),o.activeClipUrl){o.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;D.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const d=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",d)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[d,D]of o)switch(d){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,x.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,d=1){const D=this.current;let y=D.dashArray;d!==1&&y.length>0&&(y=y.map(function(l){return d*l})),o.setAttributeNS(null,"stroke",D.strokeColor),o.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",A(D.miterLimit)),o.setAttributeNS(null,"stroke-linecap",D.lineCap),o.setAttributeNS(null,"stroke-linejoin",D.lineJoin),o.setAttributeNS(null,"stroke-width",A(d*D.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",y.map(A).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",A(d*D.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const d=this.getObject(o);if(!d){(0,x.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(o,d){const D=o.width,y=o.height,l=H(o,this.forceDataSchema,!!d),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",A(D)),L.setAttributeNS(null,"height",A(y)),this.current.element=L,this.clip("nonzero");const S=this.svgFactory.createElement("svg:image");S.setAttributeNS(Pt,"xlink:href",l),S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y",A(-y)),S.setAttributeNS(null,"width",A(D)+"px"),S.setAttributeNS(null,"height",A(y)+"px"),S.setAttributeNS(null,"transform",`scale(${A(1/D)} ${A(-1/y)})`),d?d.append(S):this._ensureTransformGroup().append(S)}paintImageMaskXObject(o){const d=this.getObject(o.data,o);if(d.bitmap){(0,x.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,y=d.width,l=d.height,L=D.fillColor;D.maskId=`mask${E++}`;const S=this.svgFactory.createElement("svg:mask");S.setAttributeNS(null,"id",D.maskId);const q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",A(y)),q.setAttributeNS(null,"height",A(l)),q.setAttributeNS(null,"fill",L),q.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(S),this._ensureTransformGroup().append(q),this.paintInlineImageXObject(d,S)}paintFormXObjectBegin(o,d){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),d){const D=d[2]-d[0],y=d[3]-d[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",d[0]),l.setAttributeNS(null,"y",d[1]),l.setAttributeNS(null,"width",A(D)),l.setAttributeNS(null,"height",A(y)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const d=this.svgFactory.create(o.width,o.height),D=this.svgFactory.createElement("svg:defs");d.append(D),this.defs=D;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",C(o.transform)),d.append(y),this.svg=y,d}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",C(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}m.SVGGraphics=M},(u,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaText=void 0;class bt{static textContent(x){const e=[],Q={items:e,styles:Object.create(null)};function Pt(G){var H;if(!G)return;let I=null;const f=G.name;if(f==="#text")I=G.value;else if(bt.shouldBuildText(f))(H=G==null?void 0:G.attributes)!=null&&H.textContent?I=G.attributes.textContent:G.value&&(I=G.value);else return;if(I!==null&&e.push({str:I}),!!G.children)for(const U of G.children)Pt(U)}return Pt(x),Q}static shouldBuildText(x){return!(x==="textarea"||x==="input"||x==="option"||x==="select")}}m.XfaText=bt},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TextLayerRenderTask=void 0,m.renderTextLayer=C,m.updateTextLayer=v;var g=bt(1),x=bt(6);const e=1e5,Q=30,Pt=.8,G=new Map;function I(E,F){let M;if(F&&g.FeatureTest.isOffscreenCanvasSupported)M=new OffscreenCanvas(E,E).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=E,M=P.getContext("2d",{alpha:!1})}return M}function f(E,F){const M=G.get(E);if(M)return M;const P=I(Q,F);P.font=`${Q}px ${E}`;const o=P.measureText("");let d=o.fontBoundingBoxAscent,D=Math.abs(o.fontBoundingBoxDescent);if(d){const l=d/(d+D);return G.set(E,l),P.canvas.width=P.canvas.height=0,l}P.strokeStyle="red",P.clearRect(0,0,Q,Q),P.strokeText("g",0,0);let y=P.getImageData(0,0,Q,Q).data;D=0;for(let l=y.length-1-3;l>=0;l-=4)if(y[l]>0){D=Math.ceil(l/4/Q);break}P.clearRect(0,0,Q,Q),P.strokeText("A",0,Q),y=P.getImageData(0,0,Q,Q).data,d=0;for(let l=0,L=y.length;l<L;l+=4)if(y[l]>0){d=Q-Math.floor(l/4/Q);break}if(P.canvas.width=P.canvas.height=0,d){const l=d/(d+D);return G.set(E,l),l}return G.set(E,Pt),Pt}function H(E,F,M){const P=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:F.str!=="",hasEOL:F.hasEOL,fontSize:0};E._textDivs.push(P);const d=g.Util.transform(E._transform,F.transform);let D=Math.atan2(d[1],d[0]);const y=M[F.fontName];y.vertical&&(D+=Math.PI/2);const l=Math.hypot(d[2],d[3]),L=l*f(y.fontFamily,E._isOffscreenCanvasSupported);let S,q;D===0?(S=d[4],q=d[5]-L):(S=d[4]+L*Math.sin(D),q=d[5]-L*Math.cos(D));const Z="calc(var(--scale-factor)*",k=P.style;E._container===E._rootContainer?(k.left=`${(100*S/E._pageWidth).toFixed(2)}%`,k.top=`${(100*q/E._pageHeight).toFixed(2)}%`):(k.left=`${Z}${S.toFixed(2)}px)`,k.top=`${Z}${q.toFixed(2)}px)`),k.fontSize=`${Z}${l.toFixed(2)}px)`,k.fontFamily=y.fontFamily,o.fontSize=l,P.setAttribute("role","presentation"),P.textContent=F.str,P.dir=F.dir,E._fontInspectorEnabled&&(P.dataset.fontName=F.fontName),D!==0&&(o.angle=D*(180/Math.PI));let et=!1;if(F.str.length>1)et=!0;else if(F.str!==" "&&F.transform[0]!==F.transform[3]){const pt=Math.abs(F.transform[0]),vt=Math.abs(F.transform[3]);pt!==vt&&Math.max(pt,vt)/Math.min(pt,vt)>1.5&&(et=!0)}et&&(o.canvasWidth=y.vertical?F.height:F.width),E._textDivProperties.set(P,o),E._isReadableStream&&E._layoutText(P)}function U(E){const{div:F,scale:M,properties:P,ctx:o,prevFontSize:d,prevFontFamily:D}=E,{style:y}=F;let l="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:L}=y,{canvasWidth:S,fontSize:q}=P;(d!==q||D!==L)&&(o.font=`${q*M}px ${L}`,E.prevFontSize=q,E.prevFontFamily=L);const{width:Z}=o.measureText(F.textContent);Z>0&&(l=`scaleX(${S*M/Z})`)}P.angle!==0&&(l=`rotate(${P.angle}deg) ${l}`),l.length>0&&(y.transform=l)}function T(E){if(E._canceled)return;const F=E._textDivs,M=E._capability;if(F.length>e){M.resolve();return}if(!E._isReadableStream)for(const o of F)E._layoutText(o);M.resolve()}class A{constructor({textContentSource:F,container:M,viewport:P,textDivs:o,textDivProperties:d,textContentItemsStr:D,isOffscreenCanvasSupported:y}){var Z;this._textContentSource=F,this._isReadableStream=F instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=o||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!((Z=globalThis.FontInspector)!=null&&Z.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new g.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:I(0,y)};const{pageWidth:l,pageHeight:L,pageX:S,pageY:q}=P.rawDims;this._transform=[1,0,0,-1,-S,q+L],this._pageWidth=l,this._pageHeight=L,(0,x.setLayerDimensions)(M,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new g.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new g.AbortException("TextLayer task cancelled."))}_processItems(F,M){for(const P of F){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),o.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),H(this,P,M)}}_layoutText(F){const M=this._layoutTextParams.properties=this._textDivProperties.get(F);if(this._layoutTextParams.div=F,U(this._layoutTextParams),M.hasText&&this._container.append(F),M.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const F=new g.PromiseCapability;let M=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:o,done:d})=>{if(d){F.resolve();return}Object.assign(M,o.styles),this._processItems(o.items,M),P()},F.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:o}=this._textContentSource;this._processItems(P,o),F.resolve()}else throw new Error('No "textContentSource" parameter specified.');F.promise.then(()=>{M=null,T(this)},this._capability.reject)}}m.TextLayerRenderTask=A;function C(E){!E.textContentSource&&(E.textContent||E.textContentStream)&&((0,x.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),E.textContentSource=E.textContent||E.textContentStream);const{container:F,viewport:M}=E,P=getComputedStyle(F),o=P.getPropertyValue("visibility"),d=parseFloat(P.getPropertyValue("--scale-factor"));o==="visible"&&(!d||Math.abs(d-M.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new A(E);return D._render(),D}function v({container:E,viewport:F,textDivs:M,textDivProperties:P,isOffscreenCanvasSupported:o,mustRotate:d=!0,mustRescale:D=!0}){if(d&&(0,x.setLayerDimensions)(E,{rotation:F.rotation}),D){const y=I(0,o),L={prevFontSize:null,prevFontFamily:null,div:null,scale:F.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const S of M)L.properties=P.get(S),L.div=S,U(L)}}},(u,m,bt)=>{var f,H,U,T,A,C,v,E,F,M,P,Qi,d,gi,y,tr,L,er;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditorLayer=void 0;var g=bt(1),x=bt(4),e=bt(28),Q=bt(33),Pt=bt(6),G=bt(34);const q=class q{constructor({uiManager:k,pageIndex:et,div:pt,accessibilityManager:vt,annotationLayer:$,viewport:At,l10n:kt}){W(this,P);W(this,d);W(this,y);W(this,L);W(this,f,void 0);W(this,H,!1);W(this,U,null);W(this,T,this.pointerup.bind(this));W(this,A,this.pointerdown.bind(this));W(this,C,new Map);W(this,v,!1);W(this,E,!1);W(this,F,!1);W(this,M,void 0);const Bt=[e.FreeTextEditor,Q.InkEditor,G.StampEditor];if(!q._initialized){q._initialized=!0;for(const Vt of Bt)Vt.initialize(kt)}k.registerEditorTypes(Bt),ft(this,M,k),this.pageIndex=et,this.div=pt,ft(this,f,vt),ft(this,U,$),this.viewport=At,t(this,M).addLayer(this)}get isEmpty(){return t(this,C).size===0}updateToolbar(k){t(this,M).updateToolbar(k)}updateMode(k=t(this,M).getMode()){tt(this,L,er).call(this),k===g.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),k!==g.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",k===g.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",k===g.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",k===g.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(k){if(!k&&t(this,M).getMode()!==g.AnnotationEditorType.INK)return;if(!k){for(const pt of t(this,C).values())if(pt.isEmpty()){pt.setInBackground();return}}tt(this,d,gi).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(k){t(this,M).setEditingState(k)}addCommands(k){t(this,M).addCommands(k)}enable(){this.div.style.pointerEvents="auto";const k=new Set;for(const pt of t(this,C).values())pt.enableEditing(),pt.annotationElementId&&k.add(pt.annotationElementId);if(!t(this,U))return;const et=t(this,U).getEditableAnnotations();for(const pt of et){if(pt.hide(),t(this,M).isDeletedAnnotationElement(pt.data.id)||k.has(pt.data.id))continue;const vt=this.deserialize(pt);vt&&(this.addOrRebuild(vt),vt.enableEditing())}}disable(){var et;ft(this,F,!0),this.div.style.pointerEvents="none";const k=new Set;for(const pt of t(this,C).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){k.add(pt.annotationElementId);continue}(et=this.getEditableAnnotation(pt.annotationElementId))==null||et.show(),pt.remove()}if(t(this,U)){const pt=t(this,U).getEditableAnnotations();for(const vt of pt){const{id:$}=vt.data;k.has($)||t(this,M).isDeletedAnnotationElement($)||vt.show()}}tt(this,L,er).call(this),this.isEmpty&&(this.div.hidden=!0),ft(this,F,!1)}getEditableAnnotation(k){var et;return((et=t(this,U))==null?void 0:et.getEditableAnnotation(k))||null}setActiveEditor(k){t(this,M).getActive()!==k&&t(this,M).setActiveEditor(k)}enableClick(){this.div.addEventListener("pointerdown",t(this,A)),this.div.addEventListener("pointerup",t(this,T))}disableClick(){this.div.removeEventListener("pointerdown",t(this,A)),this.div.removeEventListener("pointerup",t(this,T))}attach(k){t(this,C).set(k.id,k);const{annotationElementId:et}=k;et&&t(this,M).isDeletedAnnotationElement(et)&&t(this,M).removeDeletedAnnotationElement(k)}detach(k){var et;t(this,C).delete(k.id),(et=t(this,f))==null||et.removePointerInTextLayer(k.contentDiv),!t(this,F)&&k.annotationElementId&&t(this,M).addDeletedAnnotationElement(k)}remove(k){this.detach(k),t(this,M).removeEditor(k),k.div.contains(document.activeElement)&&setTimeout(()=>{t(this,M).focusMainContainer()},0),k.div.remove(),k.isAttachedToDOM=!1,t(this,E)||this.addInkEditorIfNeeded(!1)}changeParent(k){var et;k.parent!==this&&(k.annotationElementId&&(t(this,M).addDeletedAnnotationElement(k.annotationElementId),x.AnnotationEditor.deleteAnnotationElement(k),k.annotationElementId=null),this.attach(k),(et=k.parent)==null||et.detach(k),k.setParent(this),k.div&&k.isAttachedToDOM&&(k.div.remove(),this.div.append(k.div)))}add(k){if(this.changeParent(k),t(this,M).addEditor(k),this.attach(k),!k.isAttachedToDOM){const et=k.render();this.div.append(et),k.isAttachedToDOM=!0}k.fixAndSetPosition(),k.onceAdded(),t(this,M).addToAnnotationStorage(k)}moveEditorInDOM(k){var pt;if(!k.isAttachedToDOM)return;const{activeElement:et}=document;k.div.contains(et)&&(k._focusEventsAllowed=!1,setTimeout(()=>{k.div.contains(document.activeElement)?k._focusEventsAllowed=!0:(k.div.addEventListener("focusin",()=>{k._focusEventsAllowed=!0},{once:!0}),et.focus())},0)),k._structTreeParentId=(pt=t(this,f))==null?void 0:pt.moveElementInDOM(this.div,k.div,k.contentDiv,!0)}addOrRebuild(k){k.needsToBeRebuilt()?k.rebuild():this.add(k)}addUndoableEditor(k){const et=()=>k._uiManager.rebuild(k),pt=()=>{k.remove()};this.addCommands({cmd:et,undo:pt,mustExec:!1})}getNextId(){return t(this,M).getId()}pasteEditor(k,et){t(this,M).updateToolbar(k),t(this,M).updateMode(k);const{offsetX:pt,offsetY:vt}=tt(this,y,tr).call(this),$=this.getNextId(),At=tt(this,P,Qi).call(this,{parent:this,id:$,x:pt,y:vt,uiManager:t(this,M),isCentered:!0,...et});At&&this.add(At)}deserialize(k){switch(k.annotationType??k.annotationEditorType){case g.AnnotationEditorType.FREETEXT:return e.FreeTextEditor.deserialize(k,this,t(this,M));case g.AnnotationEditorType.INK:return Q.InkEditor.deserialize(k,this,t(this,M));case g.AnnotationEditorType.STAMP:return G.StampEditor.deserialize(k,this,t(this,M))}return null}addNewEditor(){tt(this,d,gi).call(this,tt(this,y,tr).call(this),!0)}setSelected(k){t(this,M).setSelected(k)}toggleSelected(k){t(this,M).toggleSelected(k)}isSelected(k){return t(this,M).isSelected(k)}unselect(k){t(this,M).unselect(k)}pointerup(k){const{isMac:et}=g.FeatureTest.platform;if(!(k.button!==0||k.ctrlKey&&et)&&k.target===this.div&&t(this,v)){if(ft(this,v,!1),!t(this,H)){ft(this,H,!0);return}if(t(this,M).getMode()===g.AnnotationEditorType.STAMP){t(this,M).unselectAll();return}tt(this,d,gi).call(this,k,!1)}}pointerdown(k){if(t(this,v)){ft(this,v,!1);return}const{isMac:et}=g.FeatureTest.platform;if(k.button!==0||k.ctrlKey&&et||k.target!==this.div)return;ft(this,v,!0);const pt=t(this,M).getActive();ft(this,H,!pt||pt.isEmpty())}findNewParent(k,et,pt){const vt=t(this,M).findParent(et,pt);return vt===null||vt===this?!1:(vt.changeParent(k),!0)}destroy(){var k,et;((k=t(this,M).getActive())==null?void 0:k.parent)===this&&(t(this,M).commitOrRemove(),t(this,M).setActiveEditor(null));for(const pt of t(this,C).values())(et=t(this,f))==null||et.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,t(this,C).clear(),t(this,M).removeLayer(this)}render({viewport:k}){this.viewport=k,(0,Pt.setLayerDimensions)(this.div,k);for(const et of t(this,M).getEditors(this.pageIndex))this.add(et);this.updateMode()}update({viewport:k}){t(this,M).commitOrRemove(),this.viewport=k,(0,Pt.setLayerDimensions)(this.div,{rotation:k.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:k,pageHeight:et}=this.viewport.rawDims;return[k,et]}};f=new WeakMap,H=new WeakMap,U=new WeakMap,T=new WeakMap,A=new WeakMap,C=new WeakMap,v=new WeakMap,E=new WeakMap,F=new WeakMap,M=new WeakMap,P=new WeakSet,Qi=function(k){switch(t(this,M).getMode()){case g.AnnotationEditorType.FREETEXT:return new e.FreeTextEditor(k);case g.AnnotationEditorType.INK:return new Q.InkEditor(k);case g.AnnotationEditorType.STAMP:return new G.StampEditor(k)}return null},d=new WeakSet,gi=function(k,et){const pt=this.getNextId(),vt=tt(this,P,Qi).call(this,{parent:this,id:pt,x:k.offsetX,y:k.offsetY,uiManager:t(this,M),isCentered:et});return vt&&this.add(vt),vt},y=new WeakSet,tr=function(){const{x:k,y:et,width:pt,height:vt}=this.div.getBoundingClientRect(),$=Math.max(0,k),At=Math.max(0,et),kt=Math.min(window.innerWidth,k+pt),Bt=Math.min(window.innerHeight,et+vt),Vt=($+kt)/2-k,R=(At+Bt)/2-et,[i,a]=this.viewport.rotation%180===0?[Vt,R]:[R,Vt];return{offsetX:i,offsetY:a}},L=new WeakSet,er=function(){ft(this,E,!0);for(const k of t(this,C).values())k.isEmpty()&&k.remove();ft(this,E,!1)},Qe(q,"_initialized",!1);let I=q;m.AnnotationEditorLayer=I},(u,m,bt)=>{var G,I,f,H,U,T,A,C,v,E,Gr,M,qr,o,Xr,D,Qn,l,nr,S,$r,Z,ir;Object.defineProperty(m,"__esModule",{value:!0}),m.FreeTextEditor=void 0;var g=bt(1),x=bt(5),e=bt(4),Q=bt(29);const et=class et extends e.AnnotationEditor{constructor($){super({...$,name:"freeTextEditor"});W(this,E);W(this,M);W(this,o);W(this,D);W(this,l);W(this,S);W(this,Z);W(this,G,this.editorDivBlur.bind(this));W(this,I,this.editorDivFocus.bind(this));W(this,f,this.editorDivInput.bind(this));W(this,H,this.editorDivKeydown.bind(this));W(this,U,void 0);W(this,T,"");W(this,A,`${this.id}-editor`);W(this,C,void 0);W(this,v,null);ft(this,U,$.color||et._defaultColor||e.AnnotationEditor._defaultLineColor),ft(this,C,$.fontSize||et._defaultFontSize)}static get _keyboardManager(){const $=et.prototype,At=Vt=>Vt.isEmpty(),kt=x.AnnotationEditorUIManager.TRANSLATE_SMALL,Bt=x.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,g.shadow)(this,"_keyboardManager",new x.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],$.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],$.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],$._translateEmpty,{args:[-kt,0],checker:At}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$._translateEmpty,{args:[-Bt,0],checker:At}],[["ArrowRight","mac+ArrowRight"],$._translateEmpty,{args:[kt,0],checker:At}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$._translateEmpty,{args:[Bt,0],checker:At}],[["ArrowUp","mac+ArrowUp"],$._translateEmpty,{args:[0,-kt],checker:At}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$._translateEmpty,{args:[0,-Bt],checker:At}],[["ArrowDown","mac+ArrowDown"],$._translateEmpty,{args:[0,kt],checker:At}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$._translateEmpty,{args:[0,Bt],checker:At}]]))}static initialize($){e.AnnotationEditor.initialize($,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const At=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(At.getPropertyValue("--freetext-padding"))}static updateDefaultParams($,At){switch($){case g.AnnotationEditorParamsType.FREETEXT_SIZE:et._defaultFontSize=At;break;case g.AnnotationEditorParamsType.FREETEXT_COLOR:et._defaultColor=At;break}}updateParams($,At){switch($){case g.AnnotationEditorParamsType.FREETEXT_SIZE:tt(this,E,Gr).call(this,At);break;case g.AnnotationEditorParamsType.FREETEXT_COLOR:tt(this,M,qr).call(this,At);break}}static get defaultPropertiesToUpdate(){return[[g.AnnotationEditorParamsType.FREETEXT_SIZE,et._defaultFontSize],[g.AnnotationEditorParamsType.FREETEXT_COLOR,et._defaultColor||e.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[g.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,C)],[g.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,U)]]}_translateEmpty($,At){this._uiManager.translateSelectedEditors($,At,!0)}getInitialTranslation(){const $=this.parentScale;return[-et._internalPadding*$,-(et._internalPadding+t(this,C))*$]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(g.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,H)),this.editorDiv.addEventListener("focus",t(this,I)),this.editorDiv.addEventListener("blur",t(this,G)),this.editorDiv.addEventListener("input",t(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,A)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,H)),this.editorDiv.removeEventListener("focus",t(this,I)),this.editorDiv.removeEventListener("blur",t(this,G)),this.editorDiv.removeEventListener("input",t(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin($){this._focusEventsAllowed&&(super.focusin($),$.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var $;if(this.width){tt(this,Z,ir).call(this);return}this.enableEditMode(),this.editorDiv.focus(),($=this._initialOptions)!=null&&$.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const $=t(this,T),At=ft(this,T,tt(this,o,Xr).call(this).trimEnd());if($===At)return;const kt=Bt=>{if(ft(this,T,Bt),!Bt){this.remove();return}tt(this,l,nr).call(this),this._uiManager.rebuild(this),tt(this,D,Qn).call(this)};this.addCommands({cmd:()=>{kt(At)},undo:()=>{kt($)},mustExec:!1}),tt(this,D,Qn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick($){this.enterInEditMode()}keydown($){$.target===this.div&&$.key==="Enter"&&(this.enterInEditMode(),$.preventDefault())}editorDivKeydown($){et._keyboardManager.exec(this,$)}editorDivFocus($){this.isEditing=!0}editorDivBlur($){this.isEditing=!1}editorDivInput($){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let $,At;this.width&&($=this.x,At=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,A)),this.enableEditing(),e.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Bt=>{var Vt;return(Vt=this.editorDiv)==null?void 0:Vt.setAttribute("aria-label",Bt)}),e.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Bt=>{var Vt;return(Vt=this.editorDiv)==null?void 0:Vt.setAttribute("default-content",Bt)}),this.editorDiv.contentEditable=!0;const{style:kt}=this.editorDiv;if(kt.fontSize=`calc(${t(this,C)}px * var(--scale-factor))`,kt.color=t(this,U),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,x.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Bt,Vt]=this.parentDimensions;if(this.annotationElementId){const{position:R}=t(this,v);let[i,a]=this.getInitialTranslation();[i,a]=this.pageTranslationToScreen(i,a);const[s,c]=this.pageDimensions,[h,w]=this.pageTranslation;let _,O;switch(this.rotation){case 0:_=$+(R[0]-h)/s,O=At+this.height-(R[1]-w)/c;break;case 90:_=$+(R[0]-h)/s,O=At-(R[1]-w)/c,[i,a]=[a,-i];break;case 180:_=$-this.width+(R[0]-h)/s,O=At-(R[1]-w)/c,[i,a]=[-i,-a];break;case 270:_=$+(R[0]-h-this.height*c)/s,O=At+(R[1]-w-this.width*s)/c,[i,a]=[-a,i];break}this.setAt(_*Bt,O*Vt,i,a)}else this.setAt($*Bt,At*Vt,this.width*Bt,this.height*Vt);tt(this,l,nr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize($,At,kt){let Bt=null;if($ instanceof Q.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:R,fontColor:i},rect:a,rotation:s,id:c},textContent:h,textPosition:w,parent:{page:{pageNumber:_}}}=$;if(!h||h.length===0)return null;Bt=$={annotationType:g.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:R,value:h.join(`
`),position:w,pageIndex:_-1,rect:a,rotation:s,id:c,deleted:!1}}const Vt=super.deserialize($,At,kt);return ft(Vt,C,$.fontSize),ft(Vt,U,g.Util.makeHexColor(...$.color)),ft(Vt,T,$.value),Vt.annotationElementId=$.id||null,ft(Vt,v,Bt),Vt}serialize($=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const At=et._internalPadding*this.parentScale,kt=this.getRect(At,At),Bt=e.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,U)),Vt={annotationType:g.AnnotationEditorType.FREETEXT,color:Bt,fontSize:t(this,C),value:t(this,T),pageIndex:this.pageIndex,rect:kt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return $?Vt:this.annotationElementId&&!tt(this,S,$r).call(this,Vt)?null:(Vt.id=this.annotationElementId,Vt)}};G=new WeakMap,I=new WeakMap,f=new WeakMap,H=new WeakMap,U=new WeakMap,T=new WeakMap,A=new WeakMap,C=new WeakMap,v=new WeakMap,E=new WeakSet,Gr=function($){const At=Bt=>{this.editorDiv.style.fontSize=`calc(${Bt}px * var(--scale-factor))`,this.translate(0,-(Bt-t(this,C))*this.parentScale),ft(this,C,Bt),tt(this,D,Qn).call(this)},kt=t(this,C);this.addCommands({cmd:()=>{At($)},undo:()=>{At(kt)},mustExec:!0,type:g.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,qr=function($){const At=t(this,U);this.addCommands({cmd:()=>{ft(this,U,this.editorDiv.style.color=$)},undo:()=>{ft(this,U,this.editorDiv.style.color=At)},mustExec:!0,type:g.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Xr=function(){const $=this.editorDiv.getElementsByTagName("div");if($.length===0)return this.editorDiv.innerText;const At=[];for(const kt of $)At.push(kt.innerText.replace(/\r\n?|\n/,""));return At.join(`
`)},D=new WeakSet,Qn=function(){const[$,At]=this.parentDimensions;let kt;if(this.isAttachedToDOM)kt=this.div.getBoundingClientRect();else{const{currentLayer:Bt,div:Vt}=this,R=Vt.style.display;Vt.style.display="hidden",Bt.div.append(this.div),kt=Vt.getBoundingClientRect(),Vt.remove(),Vt.style.display=R}this.rotation%180===this.parentRotation%180?(this.width=kt.width/$,this.height=kt.height/At):(this.width=kt.height/$,this.height=kt.width/At),this.fixAndSetPosition()},l=new WeakSet,nr=function(){if(this.editorDiv.replaceChildren(),!!t(this,T))for(const $ of t(this,T).split(`
`)){const At=document.createElement("div");At.append($?document.createTextNode($):document.createElement("br")),this.editorDiv.append(At)}},S=new WeakSet,$r=function($){const{value:At,fontSize:kt,color:Bt,rect:Vt,pageIndex:R}=t(this,v);return $.value!==At||$.fontSize!==kt||$.rect.some((i,a)=>Math.abs(i-Vt[a])>=1)||$.color.some((i,a)=>i!==Bt[a])||$.pageIndex!==R},Z=new WeakSet,ir=function($=!1){if(!this.annotationElementId)return;if(tt(this,D,Qn).call(this),!$&&(this.width===0||this.height===0)){setTimeout(()=>tt(this,Z,ir).call(this,!0),0);return}const At=et._internalPadding*this.parentScale;t(this,v).rect=this.getRect(At,At)},Qe(et,"_freeTextDefaultContent",""),Qe(et,"_internalPadding",0),Qe(et,"_defaultColor",null),Qe(et,"_defaultFontSize",10),Qe(et,"_type","freetext");let Pt=et;m.FreeTextEditor=Pt},(u,m,bt)=>{var a,c,Nn,w,Yr,O,at,ct,mt,St,Dt,Ct,$t,Qt,Ot,Zt,Tt,dt,ot,wt,Wt,Ut,ce,Kr,de,mi,ye,rr,Ce,sr,nt,Y,Lt,Et,Fe,We,st,ar,ee,zt,ne,re,Jr,It,or;Object.defineProperty(m,"__esModule",{value:!0}),m.StampAnnotationElement=m.InkAnnotationElement=m.FreeTextAnnotationElement=m.AnnotationLayer=void 0;var g=bt(1),x=bt(6),e=bt(3),Q=bt(30),Pt=bt(31),G=bt(32);const I=1e3,f=9,H=new WeakSet;function U(te){return{width:te[2]-te[0],height:te[3]-te[1]}}class T{static create(B){switch(B.data.annotationType){case g.AnnotationType.LINK:return new C(B);case g.AnnotationType.TEXT:return new v(B);case g.AnnotationType.WIDGET:switch(B.data.fieldType){case"Tx":return new F(B);case"Btn":return B.data.radioButton?new o(B):B.data.checkBox?new P(B):new d(B);case"Ch":return new D(B);case"Sig":return new M(B)}return new E(B);case g.AnnotationType.POPUP:return new y(B);case g.AnnotationType.FREETEXT:return new L(B);case g.AnnotationType.LINE:return new S(B);case g.AnnotationType.SQUARE:return new q(B);case g.AnnotationType.CIRCLE:return new Z(B);case g.AnnotationType.POLYLINE:return new k(B);case g.AnnotationType.CARET:return new pt(B);case g.AnnotationType.INK:return new vt(B);case g.AnnotationType.POLYGON:return new et(B);case g.AnnotationType.HIGHLIGHT:return new $(B);case g.AnnotationType.UNDERLINE:return new At(B);case g.AnnotationType.SQUIGGLY:return new kt(B);case g.AnnotationType.STRIKEOUT:return new Bt(B);case g.AnnotationType.STAMP:return new Vt(B);case g.AnnotationType.FILEATTACHMENT:return new R(B);default:return new A(B)}}}const s=class s{constructor(B,{isRenderable:n=!1,ignoreBorder:b=!1,createQuadrilaterals:j=!1}={}){W(this,a,!1);this.isRenderable=n,this.data=B.data,this.layer=B.layer,this.linkService=B.linkService,this.downloadManager=B.downloadManager,this.imageResourcesPath=B.imageResourcesPath,this.renderForms=B.renderForms,this.svgFactory=B.svgFactory,this.annotationStorage=B.annotationStorage,this.enableScripting=B.enableScripting,this.hasJSActions=B.hasJSActions,this._fieldObjects=B.fieldObjects,this.parent=B.parent,n&&(this.container=this._createContainer(b)),j&&this._createQuadrilaterals()}static _hasPopupData({titleObj:B,contentsObj:n,richText:b}){return!!(B!=null&&B.str||n!=null&&n.str||b!=null&&b.str)}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(B){const{data:n,parent:{page:b,viewport:j}}=this,K=document.createElement("section");K.setAttribute("data-annotation-id",n.id),this instanceof E||(K.tabIndex=I),K.style.zIndex=this.parent.zIndex++,this.data.popupRef&&K.setAttribute("aria-haspopup","dialog"),n.noRotate&&K.classList.add("norotate");const{pageWidth:it,pageHeight:gt,pageX:Mt,pageY:Xt}=j.rawDims;if(!n.rect||this instanceof y){const{rotation:he}=n;return!n.hasOwnCanvas&&he!==0&&this.setRotation(he,K),K}const{width:Gt,height:be}=U(n.rect),Kt=g.Util.normalizeRect([n.rect[0],b.view[3]-n.rect[1]+b.view[1],n.rect[2],b.view[3]-n.rect[3]+b.view[1]]);if(!B&&n.borderStyle.width>0){K.style.borderWidth=`${n.borderStyle.width}px`;const he=n.borderStyle.horizontalCornerRadius,we=n.borderStyle.verticalCornerRadius;if(he>0||we>0){const Ue=`calc(${he}px * var(--scale-factor)) / calc(${we}px * var(--scale-factor))`;K.style.borderRadius=Ue}else if(this instanceof o){const Ue=`calc(${Gt}px * var(--scale-factor)) / calc(${be}px * var(--scale-factor))`;K.style.borderRadius=Ue}switch(n.borderStyle.style){case g.AnnotationBorderStyleType.SOLID:K.style.borderStyle="solid";break;case g.AnnotationBorderStyleType.DASHED:K.style.borderStyle="dashed";break;case g.AnnotationBorderStyleType.BEVELED:(0,g.warn)("Unimplemented border style: beveled");break;case g.AnnotationBorderStyleType.INSET:(0,g.warn)("Unimplemented border style: inset");break;case g.AnnotationBorderStyleType.UNDERLINE:K.style.borderBottomStyle="solid";break}const Ie=n.borderColor||null;Ie?(ft(this,a,!0),K.style.borderColor=g.Util.makeHexColor(Ie[0]|0,Ie[1]|0,Ie[2]|0)):K.style.borderWidth=0}K.style.left=`${100*(Kt[0]-Mt)/it}%`,K.style.top=`${100*(Kt[1]-Xt)/gt}%`;const{rotation:Jt}=n;return n.hasOwnCanvas||Jt===0?(K.style.width=`${100*Gt/it}%`,K.style.height=`${100*be/gt}%`):this.setRotation(Jt,K),K}setRotation(B,n=this.container){if(!this.data.rect)return;const{pageWidth:b,pageHeight:j}=this.parent.viewport.rawDims,{width:K,height:it}=U(this.data.rect);let gt,Mt;B%180===0?(gt=100*K/b,Mt=100*it/j):(gt=100*it/b,Mt=100*K/j),n.style.width=`${gt}%`,n.style.height=`${Mt}%`,n.setAttribute("data-main-rotation",(360-B)%360)}get _commonActions(){const B=(n,b,j)=>{const K=j.detail[n],it=K[0],gt=K.slice(1);j.target.style[b]=Q.ColorConverters[`${it}_HTML`](gt),this.annotationStorage.setValue(this.data.id,{[b]:Q.ColorConverters[`${it}_rgb`](gt)})};return(0,g.shadow)(this,"_commonActions",{display:n=>{const{display:b}=n.detail,j=b%2===1;this.container.style.visibility=j?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:j,noPrint:b===1||b===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:b}=n.detail;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:b,noView:b})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{B("bgColor","backgroundColor",n)},fillColor:n=>{B("fillColor","backgroundColor",n)},fgColor:n=>{B("fgColor","color",n)},textColor:n=>{B("textColor","color",n)},borderColor:n=>{B("borderColor","borderColor",n)},strokeColor:n=>{B("strokeColor","borderColor",n)},rotation:n=>{const b=n.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(B,n){const b=this._commonActions;for(const j of Object.keys(n.detail)){const K=B[j]||b[j];K==null||K(n)}}_setDefaultPropertiesFromJS(B){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const b=this._commonActions;for(const[j,K]of Object.entries(n)){const it=b[j];if(it){const gt={detail:{[j]:K},target:B};it(gt),delete n[j]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:B}=this.data;if(!B)return;const[n,b,j,K]=this.data.rect;if(B.length===1){const[,{x:we,y:Ie},{x:Ue,y:hn}]=B[0];if(j===we&&K===Ie&&n===Ue&&b===hn)return}const{style:it}=this.container;let gt;if(t(this,a)){const{borderColor:we,borderWidth:Ie}=it;it.borderWidth=0,gt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${we}" stroke-width="${Ie}">`],this.container.classList.add("hasBorder")}const Mt=j-n,Xt=K-b,{svgFactory:Gt}=this,be=Gt.createElement("svg");be.classList.add("quadrilateralsContainer"),be.setAttribute("width",0),be.setAttribute("height",0);const Kt=Gt.createElement("defs");be.append(Kt);const Jt=Gt.createElement("clipPath"),he=`clippath_${this.data.id}`;Jt.setAttribute("id",he),Jt.setAttribute("clipPathUnits","objectBoundingBox"),Kt.append(Jt);for(const[,{x:we,y:Ie},{x:Ue,y:hn}]of B){const tn=Gt.createElement("rect"),_n=(Ue-n)/Mt,An=(K-Ie)/Xt,Pn=(we-Ue)/Mt,ni=(Ie-hn)/Xt;tn.setAttribute("x",_n),tn.setAttribute("y",An),tn.setAttribute("width",Pn),tn.setAttribute("height",ni),Jt.append(tn),gt==null||gt.push(`<rect vector-effect="non-scaling-stroke" x="${_n}" y="${An}" width="${Pn}" height="${ni}"/>`)}t(this,a)&&(gt.push("</g></svg>')"),it.backgroundImage=gt.join("")),this.container.append(be),this.container.style.clipPath=`url(#${he})`}_createPopup(){const{container:B,data:n}=this;B.setAttribute("aria-haspopup","dialog");const b=new y({data:{color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation},parent:this.parent,elements:[this]});this.parent.div.append(b.render())}render(){(0,g.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(B,n=null){const b=[];if(this._fieldObjects){const j=this._fieldObjects[B];if(j)for(const{page:K,id:it,exportValues:gt}of j){if(K===-1||it===n)continue;const Mt=typeof gt=="string"?gt:null,Xt=document.querySelector(`[data-element-id="${it}"]`);if(Xt&&!H.has(Xt)){(0,g.warn)(`_getElementsByName - element not allowed: ${it}`);continue}b.push({id:it,exportValue:Mt,domElement:Xt})}return b}for(const j of document.getElementsByName(B)){const{exportValue:K}=j,it=j.getAttribute("data-element-id");it!==n&&H.has(j)&&b.push({id:it,exportValue:K,domElement:j})}return b}show(){var B;this.container&&(this.container.hidden=!1),(B=this.popup)==null||B.maybeShow()}hide(){var B;this.container&&(this.container.hidden=!0),(B=this.popup)==null||B.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const B=this.getElementsToTriggerPopup();if(Array.isArray(B))for(const n of B)n.classList.add("highlightArea");else B.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:B,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("switchannotationeditormode",{source:this,mode:B,editId:n})})}};a=new WeakMap;let A=s;class C extends A{constructor(n,b=null){super(n,{isRenderable:!0,ignoreBorder:!!(b!=null&&b.ignoreBorder),createQuadrilaterals:!0});W(this,c);W(this,w);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:b}=this,j=document.createElement("a");j.setAttribute("data-element-id",n.id);let K=!1;return n.url?(b.addLinkAttributes(j,n.url,n.newWindow),K=!0):n.action?(this._bindNamedAction(j,n.action),K=!0):n.attachment?(this._bindAttachment(j,n.attachment),K=!0):n.setOCGState?(tt(this,w,Yr).call(this,j,n.setOCGState),K=!0):n.dest?(this._bindLink(j,n.dest),K=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,n),K=!0),n.resetForm?(this._bindResetFormAction(j,n.resetForm),K=!0):this.isTooltipOnly&&!K&&(this._bindLink(j,""),K=!0)),this.container.classList.add("linkAnnotation"),K&&this.container.append(j),this.container}_bindLink(n,b){n.href=this.linkService.getDestinationHash(b),n.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&tt(this,c,Nn).call(this)}_bindNamedAction(n,b){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(b),!1),tt(this,c,Nn).call(this)}_bindAttachment(n,b){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(this.container,b.content,b.filename),!1},tt(this,c,Nn).call(this)}_bindJSAction(n,b){n.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(b.actions)){const it=j.get(K);it&&(n[it]=()=>{var gt;return(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:K}}),!1})}n.onclick||(n.onclick=()=>!1),tt(this,c,Nn).call(this)}_bindResetFormAction(n,b){const j=n.onclick;if(j||(n.href=this.linkService.getAnchorUrl("")),tt(this,c,Nn).call(this),!this._fieldObjects){(0,g.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(n.onclick=()=>!1);return}n.onclick=()=>{var be;j==null||j();const{fields:K,refs:it,include:gt}=b,Mt=[];if(K.length!==0||it.length!==0){const Kt=new Set(it);for(const Jt of K){const he=this._fieldObjects[Jt]||[];for(const{id:we}of he)Kt.add(we)}for(const Jt of Object.values(this._fieldObjects))for(const he of Jt)Kt.has(he.id)===gt&&Mt.push(he)}else for(const Kt of Object.values(this._fieldObjects))Mt.push(...Kt);const Xt=this.annotationStorage,Gt=[];for(const Kt of Mt){const{id:Jt}=Kt;switch(Gt.push(Jt),Kt.type){case"text":{const we=Kt.defaultValue||"";Xt.setValue(Jt,{value:we});break}case"checkbox":case"radiobutton":{const we=Kt.defaultValue===Kt.exportValues;Xt.setValue(Jt,{value:we});break}case"combobox":case"listbox":{const we=Kt.defaultValue||"";Xt.setValue(Jt,{value:we});break}default:continue}const he=document.querySelector(`[data-element-id="${Jt}"]`);if(he){if(!H.has(he)){(0,g.warn)(`_bindResetFormAction - element not allowed: ${Jt}`);continue}}else continue;he.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Gt,name:"ResetForm"}})),!1}}}c=new WeakSet,Nn=function(){this.container.setAttribute("data-internal-link","")},w=new WeakSet,Yr=function(n,b){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(b),!1),tt(this,c,Nn).call(this)};class v extends A{constructor(B){super(B,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const B=document.createElement("img");return B.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",B.alt="[{{type}} Annotation]",B.dataset.l10nId="text_annotation_type",B.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(B),this.container}}class E extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(B){var n;this.data.hasOwnCanvas&&(((n=B.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(B.previousSibling.hidden=!0),B.hidden=!1)}_getKeyModifier(B){const{isWin:n,isMac:b}=g.FeatureTest.platform;return n&&B.ctrlKey||b&&B.metaKey}_setEventListener(B,n,b,j,K){b.includes("mouse")?B.addEventListener(b,it=>{var gt;(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:K(it),shift:it.shiftKey,modifier:this._getKeyModifier(it)}})}):B.addEventListener(b,it=>{var gt;if(b==="blur"){if(!n.focused||!it.relatedTarget)return;n.focused=!1}else if(b==="focus"){if(n.focused)return;n.focused=!0}K&&((gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:K(it)}}))})}_setEventListeners(B,n,b,j){var K,it,gt;for(const[Mt,Xt]of b)(Xt==="Action"||(K=this.data.actions)!=null&&K[Xt])&&((Xt==="Focus"||Xt==="Blur")&&(n||(n={focused:!1})),this._setEventListener(B,n,Mt,Xt,j),Xt==="Focus"&&!((it=this.data.actions)!=null&&it.Blur)?this._setEventListener(B,n,"blur","Blur",null):Xt==="Blur"&&!((gt=this.data.actions)!=null&&gt.Focus)&&this._setEventListener(B,n,"focus","Focus",null))}_setBackgroundColor(B){const n=this.data.backgroundColor||null;B.style.backgroundColor=n===null?"transparent":g.Util.makeHexColor(n[0],n[1],n[2])}_setTextStyle(B){const n=["left","center","right"],{fontColor:b}=this.data.defaultAppearanceData,j=this.data.defaultAppearanceData.fontSize||f,K=B.style;let it;const gt=2,Mt=Xt=>Math.round(10*Xt)/10;if(this.data.multiLine){const Xt=Math.abs(this.data.rect[3]-this.data.rect[1]-gt),Gt=Math.round(Xt/(g.LINE_FACTOR*j))||1,be=Xt/Gt;it=Math.min(j,Mt(be/g.LINE_FACTOR))}else{const Xt=Math.abs(this.data.rect[3]-this.data.rect[1]-gt);it=Math.min(j,Mt(Xt/g.LINE_FACTOR))}K.fontSize=`calc(${it}px * var(--scale-factor))`,K.color=g.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(K.textAlign=n[this.data.textAlignment])}_setRequired(B,n){n?B.setAttribute("required",!0):B.removeAttribute("required"),B.setAttribute("aria-required",n)}}class F extends E{constructor(B){const n=B.renderForms||!B.data.hasAppearance&&!!B.data.fieldValue;super(B,{isRenderable:n})}setPropertyOnSiblings(B,n,b,j){const K=this.annotationStorage;for(const it of this._getElementsByName(B.name,B.id))it.domElement&&(it.domElement[n]=b),K.setValue(it.id,{[j]:b})}render(){var j,K;const B=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let b=null;if(this.renderForms){const it=B.getValue(n,{value:this.data.fieldValue});let gt=it.value||"";const Mt=B.getValue(n,{charLimit:this.data.maxLen}).charLimit;Mt&&gt.length>Mt&&(gt=gt.slice(0,Mt));let Xt=it.formattedValue||((j=this.data.textContent)==null?void 0:j.join(`
`))||null;Xt&&this.data.comb&&(Xt=Xt.replaceAll(/\s+/g,""));const Gt={userValue:gt,formattedValue:Xt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(b=document.createElement("textarea"),b.textContent=Xt??gt,this.data.doNotScroll&&(b.style.overflowY="hidden")):(b=document.createElement("input"),b.type="text",b.setAttribute("value",Xt??gt),this.data.doNotScroll&&(b.style.overflowX="hidden")),this.data.hasOwnCanvas&&(b.hidden=!0),H.add(b),b.setAttribute("data-element-id",n),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.tabIndex=I,this._setRequired(b,this.data.required),Mt&&(b.maxLength=Mt),b.addEventListener("input",Kt=>{B.setValue(n,{value:Kt.target.value}),this.setPropertyOnSiblings(b,"value",Kt.target.value,"value"),Gt.formattedValue=null}),b.addEventListener("resetform",Kt=>{const Jt=this.data.defaultFieldValue??"";b.value=Gt.userValue=Jt,Gt.formattedValue=null});let be=Kt=>{const{formattedValue:Jt}=Gt;Jt!=null&&(Kt.target.value=Jt),Kt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){b.addEventListener("focus",Jt=>{if(Gt.focused)return;const{target:he}=Jt;Gt.userValue&&(he.value=Gt.userValue),Gt.lastCommittedValue=he.value,Gt.commitKey=1,Gt.focused=!0}),b.addEventListener("updatefromsandbox",Jt=>{this.showElementAndHideCanvas(Jt.target);const he={value(we){Gt.userValue=we.detail.value??"",B.setValue(n,{value:Gt.userValue.toString()}),we.target.value=Gt.userValue},formattedValue(we){const{formattedValue:Ie}=we.detail;Gt.formattedValue=Ie,Ie!=null&&we.target!==document.activeElement&&(we.target.value=Ie),B.setValue(n,{formattedValue:Ie})},selRange(we){we.target.setSelectionRange(...we.detail.selRange)},charLimit:we=>{var tn;const{charLimit:Ie}=we.detail,{target:Ue}=we;if(Ie===0){Ue.removeAttribute("maxLength");return}Ue.setAttribute("maxLength",Ie);let hn=Gt.userValue;!hn||hn.length<=Ie||(hn=hn.slice(0,Ie),Ue.value=Gt.userValue=hn,B.setValue(n,{value:hn}),(tn=this.linkService.eventBus)==null||tn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:hn,willCommit:!0,commitKey:1,selStart:Ue.selectionStart,selEnd:Ue.selectionEnd}}))}};this._dispatchEventFromSandbox(he,Jt)}),b.addEventListener("keydown",Jt=>{var Ie;Gt.commitKey=1;let he=-1;if(Jt.key==="Escape"?he=0:Jt.key==="Enter"&&!this.data.multiLine?he=2:Jt.key==="Tab"&&(Gt.commitKey=3),he===-1)return;const{value:we}=Jt.target;Gt.lastCommittedValue!==we&&(Gt.lastCommittedValue=we,Gt.userValue=we,(Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:we,willCommit:!0,commitKey:he,selStart:Jt.target.selectionStart,selEnd:Jt.target.selectionEnd}}))});const Kt=be;be=null,b.addEventListener("blur",Jt=>{var we;if(!Gt.focused||!Jt.relatedTarget)return;Gt.focused=!1;const{value:he}=Jt.target;Gt.userValue=he,Gt.lastCommittedValue!==he&&((we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:he,willCommit:!0,commitKey:Gt.commitKey,selStart:Jt.target.selectionStart,selEnd:Jt.target.selectionEnd}})),Kt(Jt)}),(K=this.data.actions)!=null&&K.Keystroke&&b.addEventListener("beforeinput",Jt=>{var An;Gt.lastCommittedValue=null;const{data:he,target:we}=Jt,{value:Ie,selectionStart:Ue,selectionEnd:hn}=we;let tn=Ue,_n=hn;switch(Jt.inputType){case"deleteWordBackward":{const Pn=Ie.substring(0,Ue).match(/\w*[^\w]*$/);Pn&&(tn-=Pn[0].length);break}case"deleteWordForward":{const Pn=Ie.substring(Ue).match(/^[^\w]*\w*/);Pn&&(_n+=Pn[0].length);break}case"deleteContentBackward":Ue===hn&&(tn-=1);break;case"deleteContentForward":Ue===hn&&(_n+=1);break}Jt.preventDefault(),(An=this.linkService.eventBus)==null||An.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Ie,change:he||"",willCommit:!1,selStart:tn,selEnd:_n}})}),this._setEventListeners(b,Gt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Jt=>Jt.target.value)}if(be&&b.addEventListener("blur",be),this.data.comb){const Jt=(this.data.rect[2]-this.data.rect[0])/Mt;b.classList.add("comb"),b.style.letterSpacing=`calc(${Jt}px * var(--scale-factor) - 1ch)`}}else b=document.createElement("div"),b.textContent=this.data.fieldValue,b.style.verticalAlign="middle",b.style.display="table-cell";return this._setTextStyle(b),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.append(b),this.container}}class M extends E{constructor(B){super(B,{isRenderable:!!B.data.hasOwnCanvas})}}class P extends E{constructor(B){super(B,{isRenderable:B.renderForms})}render(){const B=this.annotationStorage,n=this.data,b=n.id;let j=B.getValue(b,{value:n.exportValue===n.fieldValue}).value;typeof j=="string"&&(j=j!=="Off",B.setValue(b,{value:j})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const K=document.createElement("input");return H.add(K),K.setAttribute("data-element-id",b),K.disabled=n.readOnly,this._setRequired(K,this.data.required),K.type="checkbox",K.name=n.fieldName,j&&K.setAttribute("checked",!0),K.setAttribute("exportValue",n.exportValue),K.tabIndex=I,K.addEventListener("change",it=>{const{name:gt,checked:Mt}=it.target;for(const Xt of this._getElementsByName(gt,b)){const Gt=Mt&&Xt.exportValue===n.exportValue;Xt.domElement&&(Xt.domElement.checked=Gt),B.setValue(Xt.id,{value:Gt})}B.setValue(b,{value:Mt})}),K.addEventListener("resetform",it=>{const gt=n.defaultFieldValue||"Off";it.target.checked=gt===n.exportValue}),this.enableScripting&&this.hasJSActions&&(K.addEventListener("updatefromsandbox",it=>{const gt={value(Mt){Mt.target.checked=Mt.detail.value!=="Off",B.setValue(b,{value:Mt.target.checked})}};this._dispatchEventFromSandbox(gt,it)}),this._setEventListeners(K,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class o extends E{constructor(B){super(B,{isRenderable:B.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const B=this.annotationStorage,n=this.data,b=n.id;let j=B.getValue(b,{value:n.fieldValue===n.buttonValue}).value;typeof j=="string"&&(j=j!==n.buttonValue,B.setValue(b,{value:j}));const K=document.createElement("input");if(H.add(K),K.setAttribute("data-element-id",b),K.disabled=n.readOnly,this._setRequired(K,this.data.required),K.type="radio",K.name=n.fieldName,j&&K.setAttribute("checked",!0),K.tabIndex=I,K.addEventListener("change",it=>{const{name:gt,checked:Mt}=it.target;for(const Xt of this._getElementsByName(gt,b))B.setValue(Xt.id,{value:!1});B.setValue(b,{value:Mt})}),K.addEventListener("resetform",it=>{const gt=n.defaultFieldValue;it.target.checked=gt!=null&&gt===n.buttonValue}),this.enableScripting&&this.hasJSActions){const it=n.buttonValue;K.addEventListener("updatefromsandbox",gt=>{const Mt={value:Xt=>{const Gt=it===Xt.detail.value;for(const be of this._getElementsByName(Xt.target.name)){const Kt=Gt&&be.id===b;be.domElement&&(be.domElement.checked=Kt),B.setValue(be.id,{value:Kt})}}};this._dispatchEventFromSandbox(Mt,gt)}),this._setEventListeners(K,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gt=>gt.target.checked)}return this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class d extends C{constructor(B){super(B,{ignoreBorder:B.data.hasAppearance})}render(){const B=super.render();B.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(B.title=this.data.alternativeText);const n=B.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({},b)})),B}}class D extends E{constructor(B){super(B,{isRenderable:B.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const B=this.annotationStorage,n=this.data.id,b=B.getValue(n,{value:this.data.fieldValue}),j=document.createElement("select");H.add(j),j.setAttribute("data-element-id",n),j.disabled=this.data.readOnly,this._setRequired(j,this.data.required),j.name=this.data.fieldName,j.tabIndex=I;let K=this.data.combo&&this.data.options.length>0;this.data.combo||(j.size=this.data.options.length,this.data.multiSelect&&(j.multiple=!0)),j.addEventListener("resetform",Gt=>{const be=this.data.defaultFieldValue;for(const Kt of j.options)Kt.selected=Kt.value===be});for(const Gt of this.data.options){const be=document.createElement("option");be.textContent=Gt.displayValue,be.value=Gt.exportValue,b.value.includes(Gt.exportValue)&&(be.setAttribute("selected",!0),K=!1),j.append(be)}let it=null;if(K){const Gt=document.createElement("option");Gt.value=" ",Gt.setAttribute("hidden",!0),Gt.setAttribute("selected",!0),j.prepend(Gt),it=()=>{Gt.remove(),j.removeEventListener("input",it),it=null},j.addEventListener("input",it)}const gt=Gt=>{const be=Gt?"value":"textContent",{options:Kt,multiple:Jt}=j;return Jt?Array.prototype.filter.call(Kt,he=>he.selected).map(he=>he[be]):Kt.selectedIndex===-1?null:Kt[Kt.selectedIndex][be]};let Mt=gt(!1);const Xt=Gt=>{const be=Gt.target.options;return Array.prototype.map.call(be,Kt=>({displayValue:Kt.textContent,exportValue:Kt.value}))};return this.enableScripting&&this.hasJSActions?(j.addEventListener("updatefromsandbox",Gt=>{const be={value(Kt){it==null||it();const Jt=Kt.detail.value,he=new Set(Array.isArray(Jt)?Jt:[Jt]);for(const we of j.options)we.selected=he.has(we.value);B.setValue(n,{value:gt(!0)}),Mt=gt(!1)},multipleSelection(Kt){j.multiple=!0},remove(Kt){const Jt=j.options,he=Kt.detail.remove;Jt[he].selected=!1,j.remove(he),Jt.length>0&&Array.prototype.findIndex.call(Jt,Ie=>Ie.selected)===-1&&(Jt[0].selected=!0),B.setValue(n,{value:gt(!0),items:Xt(Kt)}),Mt=gt(!1)},clear(Kt){for(;j.length!==0;)j.remove(0);B.setValue(n,{value:null,items:[]}),Mt=gt(!1)},insert(Kt){const{index:Jt,displayValue:he,exportValue:we}=Kt.detail.insert,Ie=j.children[Jt],Ue=document.createElement("option");Ue.textContent=he,Ue.value=we,Ie?Ie.before(Ue):j.append(Ue),B.setValue(n,{value:gt(!0),items:Xt(Kt)}),Mt=gt(!1)},items(Kt){const{items:Jt}=Kt.detail;for(;j.length!==0;)j.remove(0);for(const he of Jt){const{displayValue:we,exportValue:Ie}=he,Ue=document.createElement("option");Ue.textContent=we,Ue.value=Ie,j.append(Ue)}j.options.length>0&&(j.options[0].selected=!0),B.setValue(n,{value:gt(!0),items:Xt(Kt)}),Mt=gt(!1)},indices(Kt){const Jt=new Set(Kt.detail.indices);for(const he of Kt.target.options)he.selected=Jt.has(he.index);B.setValue(n,{value:gt(!0)}),Mt=gt(!1)},editable(Kt){Kt.target.disabled=!Kt.detail.editable}};this._dispatchEventFromSandbox(be,Gt)}),j.addEventListener("input",Gt=>{var Kt;const be=gt(!0);B.setValue(n,{value:be}),Gt.preventDefault(),(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Mt,changeEx:be,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(j,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Gt=>Gt.target.value)):j.addEventListener("input",function(Gt){B.setValue(n,{value:gt(!0)})}),this.data.combo&&this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class y extends A{constructor(B){const{data:n,elements:b}=B;super(B,{isRenderable:A._hasPopupData(n)}),this.elements=b}render(){this.container.classList.add("popupAnnotation");const B=new l({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const b of this.elements)b.popup=B,n.push(b.data.id),b.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(b=>`${g.AnnotationPrefix}${b}`).join(",")),this.container}}class l{constructor({container:B,color:n,elements:b,titleObj:j,modificationDate:K,contentsObj:it,richText:gt,parent:Mt,rect:Xt,parentRect:Gt,open:be}){W(this,ce);W(this,de);W(this,ye);W(this,Ce);W(this,O,null);W(this,at,tt(this,ce,Kr).bind(this));W(this,ct,tt(this,Ce,sr).bind(this));W(this,mt,tt(this,ye,rr).bind(this));W(this,St,tt(this,de,mi).bind(this));W(this,Dt,null);W(this,Ct,null);W(this,$t,null);W(this,Qt,null);W(this,Ot,null);W(this,Zt,null);W(this,Tt,!1);W(this,dt,null);W(this,ot,null);W(this,wt,null);W(this,Wt,null);W(this,Ut,!1);var Jt;ft(this,Ct,B),ft(this,Wt,j),ft(this,$t,it),ft(this,wt,gt),ft(this,Ot,Mt),ft(this,Dt,n),ft(this,ot,Xt),ft(this,Zt,Gt),ft(this,Qt,b);const Kt=x.PDFDateString.toDateObject(K);Kt&&ft(this,O,Mt.l10n.get("annotation_date_string",{date:Kt.toLocaleDateString(),time:Kt.toLocaleTimeString()})),this.trigger=b.flatMap(he=>he.getElementsToTriggerPopup());for(const he of this.trigger)he.addEventListener("click",t(this,St)),he.addEventListener("mouseenter",t(this,mt)),he.addEventListener("mouseleave",t(this,ct)),he.classList.add("popupTriggerArea");for(const he of b)(Jt=he.container)==null||Jt.addEventListener("keydown",t(this,at));t(this,Ct).hidden=!0,be&&tt(this,de,mi).call(this)}render(){if(t(this,dt))return;const{page:{view:B},viewport:{rawDims:{pageWidth:n,pageHeight:b,pageX:j,pageY:K}}}=t(this,Ot),it=ft(this,dt,document.createElement("div"));if(it.className="popup",t(this,Dt)){const tn=it.style.outlineColor=g.Util.makeHexColor(...t(this,Dt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?it.style.backgroundColor=`color-mix(in srgb, ${tn} 30%, white)`:it.style.backgroundColor=g.Util.makeHexColor(...t(this,Dt).map(An=>Math.floor(.7*(255-An)+An)))}const gt=document.createElement("span");gt.className="header";const Mt=document.createElement("h1");if(gt.append(Mt),{dir:Mt.dir,str:Mt.textContent}=t(this,Wt),it.append(gt),t(this,O)){const tn=document.createElement("span");tn.classList.add("popupDate"),t(this,O).then(_n=>{tn.textContent=_n}),gt.append(tn)}const Xt=t(this,$t),Gt=t(this,wt);if(Gt!=null&&Gt.str&&(!(Xt!=null&&Xt.str)||Xt.str===Gt.str))G.XfaLayer.render({xfaHtml:Gt.html,intent:"richText",div:it}),it.lastChild.classList.add("richText","popupContent");else{const tn=this._formatContents(Xt);it.append(tn)}let be=!!t(this,Zt),Kt=be?t(this,Zt):t(this,ot);for(const tn of t(this,Qt))if(!Kt||g.Util.intersect(tn.data.rect,Kt)!==null){Kt=tn.data.rect,be=!0;break}const Jt=g.Util.normalizeRect([Kt[0],B[3]-Kt[1]+B[1],Kt[2],B[3]-Kt[3]+B[1]]),he=5,we=be?Kt[2]-Kt[0]+he:0,Ie=Jt[0]+we,Ue=Jt[1],{style:hn}=t(this,Ct);hn.left=`${100*(Ie-j)/n}%`,hn.top=`${100*(Ue-K)/b}%`,t(this,Ct).append(it)}_formatContents({str:B,dir:n}){const b=document.createElement("p");b.classList.add("popupContent"),b.dir=n;const j=B.split(/(?:\r\n?|\n)/);for(let K=0,it=j.length;K<it;++K){const gt=j[K];b.append(document.createTextNode(gt)),K<it-1&&b.append(document.createElement("br"))}return b}forceHide(){ft(this,Ut,this.isVisible),t(this,Ut)&&(t(this,Ct).hidden=!0)}maybeShow(){t(this,Ut)&&(ft(this,Ut,!1),t(this,Ct).hidden=!1)}get isVisible(){return t(this,Ct).hidden===!1}}O=new WeakMap,at=new WeakMap,ct=new WeakMap,mt=new WeakMap,St=new WeakMap,Dt=new WeakMap,Ct=new WeakMap,$t=new WeakMap,Qt=new WeakMap,Ot=new WeakMap,Zt=new WeakMap,Tt=new WeakMap,dt=new WeakMap,ot=new WeakMap,wt=new WeakMap,Wt=new WeakMap,Ut=new WeakMap,ce=new WeakSet,Kr=function(B){B.altKey||B.shiftKey||B.ctrlKey||B.metaKey||(B.key==="Enter"||B.key==="Escape"&&t(this,Tt))&&tt(this,de,mi).call(this)},de=new WeakSet,mi=function(){ft(this,Tt,!t(this,Tt)),t(this,Tt)?(tt(this,ye,rr).call(this),t(this,Ct).addEventListener("click",t(this,St)),t(this,Ct).addEventListener("keydown",t(this,at))):(tt(this,Ce,sr).call(this),t(this,Ct).removeEventListener("click",t(this,St)),t(this,Ct).removeEventListener("keydown",t(this,at)))},ye=new WeakSet,rr=function(){t(this,dt)||this.render(),this.isVisible?t(this,Tt)&&t(this,Ct).classList.add("focused"):(t(this,Ct).hidden=!1,t(this,Ct).style.zIndex=parseInt(t(this,Ct).style.zIndex)+1e3)},Ce=new WeakSet,sr=function(){t(this,Ct).classList.remove("focused"),!(t(this,Tt)||!this.isVisible)&&(t(this,Ct).hidden=!0,t(this,Ct).style.zIndex=parseInt(t(this,Ct).style.zIndex)-1e3)};class L extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0}),this.textContent=B.data.textContent,this.textPosition=B.data.textPosition,this.annotationEditorType=g.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const B=document.createElement("div");B.classList.add("annotationTextContent"),B.setAttribute("role","comment");for(const n of this.textContent){const b=document.createElement("span");b.textContent=n,B.append(b)}this.container.append(B)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}m.FreeTextAnnotationElement=L;class S extends A{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});W(this,nt,null)}render(){this.container.classList.add("lineAnnotation");const n=this.data,{width:b,height:j}=U(n.rect),K=this.svgFactory.create(b,j,!0),it=ft(this,nt,this.svgFactory.createElement("svg:line"));return it.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),it.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),it.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),it.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),it.setAttribute("stroke-width",n.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),K.append(it),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}nt=new WeakMap;class q extends A{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});W(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const n=this.data,{width:b,height:j}=U(n.rect),K=this.svgFactory.create(b,j,!0),it=n.borderStyle.width,gt=ft(this,Y,this.svgFactory.createElement("svg:rect"));return gt.setAttribute("x",it/2),gt.setAttribute("y",it/2),gt.setAttribute("width",b-it),gt.setAttribute("height",j-it),gt.setAttribute("stroke-width",it||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),K.append(gt),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class Z extends A{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});W(this,Lt,null)}render(){this.container.classList.add("circleAnnotation");const n=this.data,{width:b,height:j}=U(n.rect),K=this.svgFactory.create(b,j,!0),it=n.borderStyle.width,gt=ft(this,Lt,this.svgFactory.createElement("svg:ellipse"));return gt.setAttribute("cx",b/2),gt.setAttribute("cy",j/2),gt.setAttribute("rx",b/2-it/2),gt.setAttribute("ry",j/2-it/2),gt.setAttribute("stroke-width",it||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),K.append(gt),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lt=new WeakMap;class k extends A{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});W(this,Et,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const n=this.data,{width:b,height:j}=U(n.rect),K=this.svgFactory.create(b,j,!0);let it=[];for(const Mt of n.vertices){const Xt=Mt.x-n.rect[0],Gt=n.rect[3]-Mt.y;it.push(Xt+","+Gt)}it=it.join(" ");const gt=ft(this,Et,this.svgFactory.createElement(this.svgElementName));return gt.setAttribute("points",it),gt.setAttribute("stroke-width",n.borderStyle.width||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),K.append(gt),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Et)}addHighlightArea(){this.container.classList.add("highlightArea")}}Et=new WeakMap;class et extends k{constructor(B){super(B),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class vt extends A{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});W(this,Fe,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=g.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const n=this.data,{width:b,height:j}=U(n.rect),K=this.svgFactory.create(b,j,!0);for(const it of n.inkLists){let gt=[];for(const Xt of it){const Gt=Xt.x-n.rect[0],be=n.rect[3]-Xt.y;gt.push(`${Gt},${be}`)}gt=gt.join(" ");const Mt=this.svgFactory.createElement(this.svgElementName);t(this,Fe).push(Mt),Mt.setAttribute("points",gt),Mt.setAttribute("stroke-width",n.borderStyle.width||1),Mt.setAttribute("stroke","transparent"),Mt.setAttribute("fill","transparent"),!n.popupRef&&this.hasPopupData&&this._createPopup(),K.append(Mt)}return this.container.append(K),this.container}getElementsToTriggerPopup(){return t(this,Fe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fe=new WeakMap,m.InkAnnotationElement=vt;class $ extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class At extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class kt extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Bt extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Vt extends A{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}m.StampAnnotationElement=Vt;class R extends A{constructor(n){var K;super(n,{isRenderable:!0});W(this,st);W(this,We,null);const{filename:b,content:j}=this.data.file;this.filename=(0,x.getFilenameFromUrl)(b,!0),this.content=j,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:b,content:j})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:b}=this;let j;b.hasAppearance||b.fillAlpha===0?j=document.createElement("div"):(j=document.createElement("img"),j.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(b.name)?"paperclip":"pushpin"}.svg`,b.fillAlpha&&b.fillAlpha<1&&(j.style=`filter: opacity(${Math.round(b.fillAlpha*100)}%);`)),j.addEventListener("dblclick",tt(this,st,ar).bind(this)),ft(this,We,j);const{isMac:K}=g.FeatureTest.platform;return n.addEventListener("keydown",it=>{it.key==="Enter"&&(K?it.metaKey:it.ctrlKey)&&tt(this,st,ar).call(this)}),!b.popupRef&&this.hasPopupData?this._createPopup():j.classList.add("popupTriggerArea"),n.append(j),n}getElementsToTriggerPopup(){return t(this,We)}addHighlightArea(){this.container.classList.add("highlightArea")}}We=new WeakMap,st=new WeakSet,ar=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:B,accessibilityManager:n,annotationCanvasMap:b,l10n:j,page:K,viewport:it}){W(this,re);W(this,It);W(this,ee,null);W(this,zt,null);W(this,ne,new Map);this.div=B,ft(this,ee,n),ft(this,zt,b),this.l10n=j,this.page=K,this.viewport=it,this.zIndex=0,this.l10n||(this.l10n=Pt.NullL10n)}async render(B){const{annotations:n}=B,b=this.div;(0,x.setLayerDimensions)(b,this.viewport);const j=new Map,K={data:null,layer:b,linkService:B.linkService,downloadManager:B.downloadManager,imageResourcesPath:B.imageResourcesPath||"",renderForms:B.renderForms!==!1,svgFactory:new x.DOMSVGFactory,annotationStorage:B.annotationStorage||new e.AnnotationStorage,enableScripting:B.enableScripting===!0,hasJSActions:B.hasJSActions,fieldObjects:B.fieldObjects,parent:this,elements:null};for(const it of n){if(it.noHTML)continue;const gt=it.annotationType===g.AnnotationType.POPUP;if(gt){const Gt=j.get(it.id);if(!Gt)continue;K.elements=Gt}else{const{width:Gt,height:be}=U(it.rect);if(Gt<=0||be<=0)continue}K.data=it;const Mt=T.create(K);if(!Mt.isRenderable)continue;if(!gt&&it.popupRef){const Gt=j.get(it.popupRef);Gt?Gt.push(Mt):j.set(it.popupRef,[Mt])}Mt.annotationEditorType>0&&t(this,ne).set(Mt.data.id,Mt);const Xt=Mt.render();it.hidden&&(Xt.style.visibility="hidden"),tt(this,re,Jr).call(this,Xt,it.id)}tt(this,It,or).call(this),await this.l10n.translate(b)}update({viewport:B}){const n=this.div;this.viewport=B,(0,x.setLayerDimensions)(n,{rotation:B.rotation}),tt(this,It,or).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(t(this,ne).values())}getEditableAnnotation(B){return t(this,ne).get(B)}}ee=new WeakMap,zt=new WeakMap,ne=new WeakMap,re=new WeakSet,Jr=function(B,n){var j;const b=B.firstChild||B;b.id=`${g.AnnotationPrefix}${n}`,this.div.append(B),(j=t(this,ee))==null||j.moveElementInDOM(this.div,B,b,!1)},It=new WeakSet,or=function(){if(!t(this,zt))return;const B=this.div;for(const[n,b]of t(this,zt)){const j=B.querySelector(`[data-annotation-id="${n}"]`);if(!j)continue;const{firstChild:K}=j;K?K.nodeName==="CANVAS"?K.replaceWith(b):K.before(b):j.append(b)}t(this,zt).clear()},m.AnnotationLayer=i},(u,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.ColorConverters=void 0;function bt(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,"0")}function g(e){return Math.max(0,Math.min(255,255*e))}class x{static CMYK_G([Q,Pt,G,I]){return["G",1-Math.min(1,.3*Q+.59*G+.11*Pt+I)]}static G_CMYK([Q]){return["CMYK",0,0,0,1-Q]}static G_RGB([Q]){return["RGB",Q,Q,Q]}static G_rgb([Q]){return Q=g(Q),[Q,Q,Q]}static G_HTML([Q]){const Pt=bt(Q);return`#${Pt}${Pt}${Pt}`}static RGB_G([Q,Pt,G]){return["G",.3*Q+.59*Pt+.11*G]}static RGB_rgb(Q){return Q.map(g)}static RGB_HTML(Q){return`#${Q.map(bt).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Q,Pt,G,I]){return["RGB",1-Math.min(1,Q+I),1-Math.min(1,G+I),1-Math.min(1,Pt+I)]}static CMYK_rgb([Q,Pt,G,I]){return[g(1-Math.min(1,Q+I)),g(1-Math.min(1,G+I)),g(1-Math.min(1,Pt+I))]}static CMYK_HTML(Q){const Pt=this.CMYK_RGB(Q).slice(1);return this.RGB_HTML(Pt)}static RGB_CMYK([Q,Pt,G]){const I=1-Q,f=1-Pt,H=1-G,U=Math.min(I,f,H);return["CMYK",I,f,H,U]}}m.ColorConverters=x},(u,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NullL10n=void 0,m.getL10nFallback=g;const bt={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};bt.print_progress_percent="{{progress}}%";function g(Q,Pt){switch(Q){case"find_match_count":Q=`find_match_count[${Pt.total===1?"one":"other"}]`;break;case"find_match_count_limit":Q=`find_match_count_limit[${Pt.limit===1?"one":"other"}]`;break}return bt[Q]||""}function x(Q,Pt){return Pt?Q.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(G,I)=>I in Pt?Pt[I]:"{{"+I+"}}"):Q}const e={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Q,Pt=null,G=g(Q,Pt)){return x(G,Pt)},async translate(Q){}};m.NullL10n=e},(u,m,bt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaLayer=void 0;var g=bt(25);class x{static setupStorage(Q,Pt,G,I,f){const H=I.getValue(Pt,{value:null});switch(G.name){case"textarea":if(H.value!==null&&(Q.textContent=H.value),f==="print")break;Q.addEventListener("input",U=>{I.setValue(Pt,{value:U.target.value})});break;case"input":if(G.attributes.type==="radio"||G.attributes.type==="checkbox"){if(H.value===G.attributes.xfaOn?Q.setAttribute("checked",!0):H.value===G.attributes.xfaOff&&Q.removeAttribute("checked"),f==="print")break;Q.addEventListener("change",U=>{I.setValue(Pt,{value:U.target.checked?U.target.getAttribute("xfaOn"):U.target.getAttribute("xfaOff")})})}else{if(H.value!==null&&Q.setAttribute("value",H.value),f==="print")break;Q.addEventListener("input",U=>{I.setValue(Pt,{value:U.target.value})})}break;case"select":if(H.value!==null){Q.setAttribute("value",H.value);for(const U of G.children)U.attributes.value===H.value?U.attributes.selected=!0:U.attributes.hasOwnProperty("selected")&&delete U.attributes.selected}Q.addEventListener("input",U=>{const T=U.target.options,A=T.selectedIndex===-1?"":T[T.selectedIndex].value;I.setValue(Pt,{value:A})});break}}static setAttributes({html:Q,element:Pt,storage:G=null,intent:I,linkService:f}){const{attributes:H}=Pt,U=Q instanceof HTMLAnchorElement;H.type==="radio"&&(H.name=`${H.name}-${I}`);for(const[T,A]of Object.entries(H))if(A!=null)switch(T){case"class":A.length&&Q.setAttribute(T,A.join(" "));break;case"dataId":break;case"id":Q.setAttribute("data-element-id",A);break;case"style":Object.assign(Q.style,A);break;case"textContent":Q.textContent=A;break;default:(!U||T!=="href"&&T!=="newWindow")&&Q.setAttribute(T,A)}U&&f.addLinkAttributes(Q,H.href,H.newWindow),G&&H.dataId&&this.setupStorage(Q,H.dataId,Pt,G)}static render(Q){var C;const Pt=Q.annotationStorage,G=Q.linkService,I=Q.xfaHtml,f=Q.intent||"display",H=document.createElement(I.name);I.attributes&&this.setAttributes({html:H,element:I,intent:f,linkService:G});const U=[[I,-1,H]],T=Q.div;if(T.append(H),Q.viewport){const v=`matrix(${Q.viewport.transform.join(",")})`;T.style.transform=v}f!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const A=[];for(;U.length>0;){const[v,E,F]=U.at(-1);if(E+1===v.children.length){U.pop();continue}const M=v.children[++U.at(-1)[1]];if(M===null)continue;const{name:P}=M;if(P==="#text"){const d=document.createTextNode(M.value);A.push(d),F.append(d);continue}const o=(C=M==null?void 0:M.attributes)!=null&&C.xmlns?document.createElementNS(M.attributes.xmlns,P):document.createElement(P);if(F.append(o),M.attributes&&this.setAttributes({html:o,element:M,storage:Pt,intent:f,linkService:G}),M.children&&M.children.length>0)U.push([M,-1,o]);else if(M.value){const d=document.createTextNode(M.value);g.XfaText.shouldBuildText(P)&&A.push(d),o.append(d)}}for(const v of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:A}}static update(Q){const Pt=`matrix(${Q.viewport.transform.join(",")})`;Q.div.style.transform=Pt,Q.div.hidden=!1}}m.XfaLayer=x},(u,m,bt)=>{var I,f,H,U,T,A,C,v,E,F,M,P,o,d,D,Zr,l,Qr,S,ts,Z,es,et,lr,vt,ns,At,cr,Bt,is,R,rs,a,ss,c,as,w,os,O,kn,ct,hr,St,vi,Ct,bi,Qt,Vn,Zt,dr,dt,_i,wt,ls,Ut,ur,pe,cs,me,hs,se,fr,yt,yi,Y,Gn;Object.defineProperty(m,"__esModule",{value:!0}),m.InkEditor=void 0;var g=bt(1),x=bt(4),e=bt(29),Q=bt(6),Pt=bt(5);const Et=class Et extends x.AnnotationEditor{constructor(st){super({...st,name:"inkEditor"});W(this,D);W(this,l);W(this,S);W(this,Z);W(this,et);W(this,vt);W(this,At);W(this,Bt);W(this,R);W(this,a);W(this,c);W(this,w);W(this,O);W(this,ct);W(this,St);W(this,Ct);W(this,Qt);W(this,Zt);W(this,dt);W(this,me);W(this,se);W(this,yt);W(this,Y);W(this,I,0);W(this,f,0);W(this,H,this.canvasPointermove.bind(this));W(this,U,this.canvasPointerleave.bind(this));W(this,T,this.canvasPointerup.bind(this));W(this,A,this.canvasPointerdown.bind(this));W(this,C,new Path2D);W(this,v,!1);W(this,E,!1);W(this,F,!1);W(this,M,null);W(this,P,0);W(this,o,0);W(this,d,null);this.color=st.color||null,this.thickness=st.thickness||null,this.opacity=st.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(st){x.AnnotationEditor.initialize(st,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(st,Nt){switch(st){case g.AnnotationEditorParamsType.INK_THICKNESS:Et._defaultThickness=Nt;break;case g.AnnotationEditorParamsType.INK_COLOR:Et._defaultColor=Nt;break;case g.AnnotationEditorParamsType.INK_OPACITY:Et._defaultOpacity=Nt/100;break}}updateParams(st,Nt){switch(st){case g.AnnotationEditorParamsType.INK_THICKNESS:tt(this,D,Zr).call(this,Nt);break;case g.AnnotationEditorParamsType.INK_COLOR:tt(this,l,Qr).call(this,Nt);break;case g.AnnotationEditorParamsType.INK_OPACITY:tt(this,S,ts).call(this,Nt);break}}static get defaultPropertiesToUpdate(){return[[g.AnnotationEditorParamsType.INK_THICKNESS,Et._defaultThickness],[g.AnnotationEditorParamsType.INK_COLOR,Et._defaultColor||x.AnnotationEditor._defaultLineColor],[g.AnnotationEditorParamsType.INK_OPACITY,Math.round(Et._defaultOpacity*100)]]}get propertiesToUpdate(){return[[g.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Et._defaultThickness],[g.AnnotationEditorParamsType.INK_COLOR,this.color||Et._defaultColor||x.AnnotationEditor._defaultLineColor],[g.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Et._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(tt(this,St,vi).call(this),tt(this,Ct,bi).call(this)),this.isAttachedToDOM||(this.parent.add(this),tt(this,Qt,Vn).call(this)),tt(this,Y,Gn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,M).disconnect(),ft(this,M,null),super.remove())}setParent(st){!this.parent&&st?this._uiManager.removeShouldRescale(this):this.parent&&st===null&&this._uiManager.addShouldRescale(this),super.setParent(st)}onScaleChanging(){const[st,Nt]=this.parentDimensions,ee=this.width*st,zt=this.height*Nt;this.setDimensions(ee,zt)}enableEditMode(){t(this,v)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,A)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,A)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,v)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ft(this,v,!0),this.div.classList.add("disabled"),tt(this,Y,Gn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(st){this._focusEventsAllowed&&(super.focusin(st),this.enableEditMode())}canvasPointerdown(st){st.button!==0||!this.isInEditMode()||t(this,v)||(this.setInForeground(),st.preventDefault(),st.type!=="mouse"&&this.div.focus(),tt(this,vt,ns).call(this,st.offsetX,st.offsetY))}canvasPointermove(st){st.preventDefault(),tt(this,At,cr).call(this,st.offsetX,st.offsetY)}canvasPointerup(st){st.preventDefault(),tt(this,ct,hr).call(this,st)}canvasPointerleave(st){tt(this,ct,hr).call(this,st)}get isResizable(){return!this.isEmpty()&&t(this,v)}render(){if(this.div)return this.div;let st,Nt;this.width&&(st=this.x,Nt=this.y),super.render(),x.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Oe=>{var It;return(It=this.div)==null?void 0:It.setAttribute("aria-label",Oe)});const[ee,zt,ne,re]=tt(this,Z,es).call(this);if(this.setAt(ee,zt,0,0),this.setDims(ne,re),tt(this,St,vi).call(this),this.width){const[Oe,It]=this.parentDimensions;this.setAspectRatio(this.width*Oe,this.height*It),this.setAt(st*Oe,Nt*It,this.width*Oe,this.height*It),ft(this,F,!0),tt(this,Qt,Vn).call(this),this.setDims(this.width*Oe,this.height*It),tt(this,O,kn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return tt(this,Ct,bi).call(this),this.div}setDimensions(st,Nt){const ee=Math.round(st),zt=Math.round(Nt);if(t(this,P)===ee&&t(this,o)===zt)return;ft(this,P,ee),ft(this,o,zt),this.canvas.style.visibility="hidden";const[ne,re]=this.parentDimensions;this.width=st/ne,this.height=Nt/re,this.fixAndSetPosition(),t(this,v)&&tt(this,Zt,dr).call(this,st,Nt),tt(this,Qt,Vn).call(this),tt(this,O,kn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(st,Nt,ee){var K,it,gt;if(st instanceof e.InkAnnotationElement)return null;const zt=super.deserialize(st,Nt,ee);zt.thickness=st.thickness,zt.color=g.Util.makeHexColor(...st.color),zt.opacity=st.opacity;const[ne,re]=zt.pageDimensions,Oe=zt.width*ne,It=zt.height*re,ke=zt.parentScale,te=st.thickness/2;ft(zt,v,!0),ft(zt,P,Math.round(Oe)),ft(zt,o,Math.round(It));const{paths:B,rect:n,rotation:b}=st;for(let{bezier:Mt}of B){Mt=tt(K=Et,pe,cs).call(K,Mt,n,b);const Xt=[];zt.paths.push(Xt);let Gt=ke*(Mt[0]-te),be=ke*(Mt[1]-te);for(let Jt=2,he=Mt.length;Jt<he;Jt+=6){const we=ke*(Mt[Jt]-te),Ie=ke*(Mt[Jt+1]-te),Ue=ke*(Mt[Jt+2]-te),hn=ke*(Mt[Jt+3]-te),tn=ke*(Mt[Jt+4]-te),_n=ke*(Mt[Jt+5]-te);Xt.push([[Gt,be],[we,Ie],[Ue,hn],[tn,_n]]),Gt=tn,be=_n}const Kt=tt(this,wt,ls).call(this,Xt);zt.bezierPath2D.push(Kt)}const j=tt(it=zt,se,fr).call(it);return ft(zt,f,Math.max(x.AnnotationEditor.MIN_SIZE,j[2]-j[0])),ft(zt,I,Math.max(x.AnnotationEditor.MIN_SIZE,j[3]-j[1])),tt(gt=zt,Zt,dr).call(gt,Oe,It),zt}serialize(){if(this.isEmpty())return null;const st=this.getRect(0,0),Nt=x.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:g.AnnotationEditorType.INK,color:Nt,thickness:this.thickness,opacity:this.opacity,paths:tt(this,me,hs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,st),pageIndex:this.pageIndex,rect:st,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};I=new WeakMap,f=new WeakMap,H=new WeakMap,U=new WeakMap,T=new WeakMap,A=new WeakMap,C=new WeakMap,v=new WeakMap,E=new WeakMap,F=new WeakMap,M=new WeakMap,P=new WeakMap,o=new WeakMap,d=new WeakMap,D=new WeakSet,Zr=function(st){const Nt=this.thickness;this.addCommands({cmd:()=>{this.thickness=st,tt(this,Y,Gn).call(this)},undo:()=>{this.thickness=Nt,tt(this,Y,Gn).call(this)},mustExec:!0,type:g.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Qr=function(st){const Nt=this.color;this.addCommands({cmd:()=>{this.color=st,tt(this,O,kn).call(this)},undo:()=>{this.color=Nt,tt(this,O,kn).call(this)},mustExec:!0,type:g.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,ts=function(st){st/=100;const Nt=this.opacity;this.addCommands({cmd:()=>{this.opacity=st,tt(this,O,kn).call(this)},undo:()=>{this.opacity=Nt,tt(this,O,kn).call(this)},mustExec:!0,type:g.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Z=new WeakSet,es=function(){const{parentRotation:st,parentDimensions:[Nt,ee]}=this;switch(st){case 90:return[0,ee,ee,Nt];case 180:return[Nt,ee,Nt,ee];case 270:return[Nt,0,ee,Nt];default:return[0,0,Nt,ee]}},et=new WeakSet,lr=function(){const{ctx:st,color:Nt,opacity:ee,thickness:zt,parentScale:ne,scaleFactor:re}=this;st.lineWidth=zt*ne/re,st.lineCap="round",st.lineJoin="round",st.miterLimit=10,st.strokeStyle=`${Nt}${(0,Pt.opacityToHex)(ee)}`},vt=new WeakSet,ns=function(st,Nt){this.canvas.addEventListener("contextmenu",Q.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,U)),this.canvas.addEventListener("pointermove",t(this,H)),this.canvas.addEventListener("pointerup",t(this,T)),this.canvas.removeEventListener("pointerdown",t(this,A)),this.isEditing=!0,t(this,F)||(ft(this,F,!0),tt(this,Qt,Vn).call(this),this.thickness||(this.thickness=Et._defaultThickness),this.color||(this.color=Et._defaultColor||x.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Et._defaultOpacity)),this.currentPath.push([st,Nt]),ft(this,E,!1),tt(this,et,lr).call(this),ft(this,d,()=>{tt(this,a,ss).call(this),t(this,d)&&window.requestAnimationFrame(t(this,d))}),window.requestAnimationFrame(t(this,d))},At=new WeakSet,cr=function(st,Nt){const[ee,zt]=this.currentPath.at(-1);if(this.currentPath.length>1&&st===ee&&Nt===zt)return;const ne=this.currentPath;let re=t(this,C);if(ne.push([st,Nt]),ft(this,E,!0),ne.length<=2){re.moveTo(...ne[0]),re.lineTo(st,Nt);return}ne.length===3&&(ft(this,C,re=new Path2D),re.moveTo(...ne[0])),tt(this,c,as).call(this,re,...ne.at(-3),...ne.at(-2),st,Nt)},Bt=new WeakSet,is=function(){if(this.currentPath.length===0)return;const st=this.currentPath.at(-1);t(this,C).lineTo(...st)},R=new WeakSet,rs=function(st,Nt){ft(this,d,null),st=Math.min(Math.max(st,0),this.canvas.width),Nt=Math.min(Math.max(Nt,0),this.canvas.height),tt(this,At,cr).call(this,st,Nt),tt(this,Bt,is).call(this);let ee;if(this.currentPath.length!==1)ee=tt(this,w,os).call(this);else{const It=[st,Nt];ee=[[It,It.slice(),It.slice(),It]]}const zt=t(this,C),ne=this.currentPath;this.currentPath=[],ft(this,C,new Path2D);const re=()=>{this.allRawPaths.push(ne),this.paths.push(ee),this.bezierPath2D.push(zt),this.rebuild()},Oe=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(tt(this,St,vi).call(this),tt(this,Ct,bi).call(this)),tt(this,Y,Gn).call(this))};this.addCommands({cmd:re,undo:Oe,mustExec:!0})},a=new WeakSet,ss=function(){if(!t(this,E))return;ft(this,E,!1);const st=Math.ceil(this.thickness*this.parentScale),Nt=this.currentPath.slice(-3),ee=Nt.map(re=>re[0]),zt=Nt.map(re=>re[1]);Math.min(...ee)-st,Math.max(...ee)+st,Math.min(...zt)-st,Math.max(...zt)+st;const{ctx:ne}=this;ne.save(),ne.clearRect(0,0,this.canvas.width,this.canvas.height);for(const re of this.bezierPath2D)ne.stroke(re);ne.stroke(t(this,C)),ne.restore()},c=new WeakSet,as=function(st,Nt,ee,zt,ne,re,Oe){const It=(Nt+zt)/2,ke=(ee+ne)/2,te=(zt+re)/2,B=(ne+Oe)/2;st.bezierCurveTo(It+2*(zt-It)/3,ke+2*(ne-ke)/3,te+2*(zt-te)/3,B+2*(ne-B)/3,te,B)},w=new WeakSet,os=function(){const st=this.currentPath;if(st.length<=2)return[[st[0],st[0],st.at(-1),st.at(-1)]];const Nt=[];let ee,[zt,ne]=st[0];for(ee=1;ee<st.length-2;ee++){const[n,b]=st[ee],[j,K]=st[ee+1],it=(n+j)/2,gt=(b+K)/2,Mt=[zt+2*(n-zt)/3,ne+2*(b-ne)/3],Xt=[it+2*(n-it)/3,gt+2*(b-gt)/3];Nt.push([[zt,ne],Mt,Xt,[it,gt]]),[zt,ne]=[it,gt]}const[re,Oe]=st[ee],[It,ke]=st[ee+1],te=[zt+2*(re-zt)/3,ne+2*(Oe-ne)/3],B=[It+2*(re-It)/3,ke+2*(Oe-ke)/3];return Nt.push([[zt,ne],te,B,[It,ke]]),Nt},O=new WeakSet,kn=function(){if(this.isEmpty()){tt(this,dt,_i).call(this);return}tt(this,et,lr).call(this);const{canvas:st,ctx:Nt}=this;Nt.setTransform(1,0,0,1,0,0),Nt.clearRect(0,0,st.width,st.height),tt(this,dt,_i).call(this);for(const ee of this.bezierPath2D)Nt.stroke(ee)},ct=new WeakSet,hr=function(st){this.canvas.removeEventListener("pointerleave",t(this,U)),this.canvas.removeEventListener("pointermove",t(this,H)),this.canvas.removeEventListener("pointerup",t(this,T)),this.canvas.addEventListener("pointerdown",t(this,A)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Q.noContextMenu)},10),tt(this,R,rs).call(this,st.offsetX,st.offsetY),this.addToAnnotationStorage(),this.setInBackground()},St=new WeakSet,vi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",x.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(st=>{var Nt;return(Nt=this.canvas)==null?void 0:Nt.setAttribute("aria-label",st)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ct=new WeakSet,bi=function(){ft(this,M,new ResizeObserver(st=>{const Nt=st[0].contentRect;Nt.width&&Nt.height&&this.setDimensions(Nt.width,Nt.height)})),t(this,M).observe(this.div)},Qt=new WeakSet,Vn=function(){if(!t(this,F))return;const[st,Nt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*st),this.canvas.height=Math.ceil(this.height*Nt),tt(this,dt,_i).call(this)},Zt=new WeakSet,dr=function(st,Nt){const ee=tt(this,yt,yi).call(this),zt=(st-ee)/t(this,f),ne=(Nt-ee)/t(this,I);this.scaleFactor=Math.min(zt,ne)},dt=new WeakSet,_i=function(){const st=tt(this,yt,yi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+st,this.translationY*this.scaleFactor+st)},wt=new WeakSet,ls=function(st){const Nt=new Path2D;for(let ee=0,zt=st.length;ee<zt;ee++){const[ne,re,Oe,It]=st[ee];ee===0&&Nt.moveTo(...ne),Nt.bezierCurveTo(re[0],re[1],Oe[0],Oe[1],It[0],It[1])}return Nt},Ut=new WeakSet,ur=function(st,Nt,ee){const[zt,ne,re,Oe]=Nt;switch(ee){case 0:for(let It=0,ke=st.length;It<ke;It+=2)st[It]+=zt,st[It+1]=Oe-st[It+1];break;case 90:for(let It=0,ke=st.length;It<ke;It+=2){const te=st[It];st[It]=st[It+1]+zt,st[It+1]=te+ne}break;case 180:for(let It=0,ke=st.length;It<ke;It+=2)st[It]=re-st[It],st[It+1]+=ne;break;case 270:for(let It=0,ke=st.length;It<ke;It+=2){const te=st[It];st[It]=re-st[It+1],st[It+1]=Oe-te}break;default:throw new Error("Invalid rotation")}return st},pe=new WeakSet,cs=function(st,Nt,ee){const[zt,ne,re,Oe]=Nt;switch(ee){case 0:for(let It=0,ke=st.length;It<ke;It+=2)st[It]-=zt,st[It+1]=Oe-st[It+1];break;case 90:for(let It=0,ke=st.length;It<ke;It+=2){const te=st[It];st[It]=st[It+1]-ne,st[It+1]=te-zt}break;case 180:for(let It=0,ke=st.length;It<ke;It+=2)st[It]=re-st[It],st[It+1]-=ne;break;case 270:for(let It=0,ke=st.length;It<ke;It+=2){const te=st[It];st[It]=Oe-st[It+1],st[It+1]=re-te}break;default:throw new Error("Invalid rotation")}return st},me=new WeakSet,hs=function(st,Nt,ee,zt){var ke,te;const ne=[],re=this.thickness/2,Oe=st*Nt+re,It=st*ee+re;for(const B of this.paths){const n=[],b=[];for(let j=0,K=B.length;j<K;j++){const[it,gt,Mt,Xt]=B[j],Gt=st*it[0]+Oe,be=st*it[1]+It,Kt=st*gt[0]+Oe,Jt=st*gt[1]+It,he=st*Mt[0]+Oe,we=st*Mt[1]+It,Ie=st*Xt[0]+Oe,Ue=st*Xt[1]+It;j===0&&(n.push(Gt,be),b.push(Gt,be)),n.push(Kt,Jt,he,we,Ie,Ue),b.push(Kt,Jt),j===K-1&&b.push(Ie,Ue)}ne.push({bezier:tt(ke=Et,Ut,ur).call(ke,n,zt,this.rotation),points:tt(te=Et,Ut,ur).call(te,b,zt,this.rotation)})}return ne},se=new WeakSet,fr=function(){let st=1/0,Nt=-1/0,ee=1/0,zt=-1/0;for(const ne of this.paths)for(const[re,Oe,It,ke]of ne){const te=g.Util.bezierBoundingBox(...re,...Oe,...It,...ke);st=Math.min(st,te[0]),ee=Math.min(ee,te[1]),Nt=Math.max(Nt,te[2]),zt=Math.max(zt,te[3])}return[st,ee,Nt,zt]},yt=new WeakSet,yi=function(){return t(this,v)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,Gn=function(st=!1){if(this.isEmpty())return;if(!t(this,v)){tt(this,O,kn).call(this);return}const Nt=tt(this,se,fr).call(this),ee=tt(this,yt,yi).call(this);ft(this,f,Math.max(x.AnnotationEditor.MIN_SIZE,Nt[2]-Nt[0])),ft(this,I,Math.max(x.AnnotationEditor.MIN_SIZE,Nt[3]-Nt[1]));const zt=Math.ceil(ee+t(this,f)*this.scaleFactor),ne=Math.ceil(ee+t(this,I)*this.scaleFactor),[re,Oe]=this.parentDimensions;this.width=zt/re,this.height=ne/Oe,this.setAspectRatio(zt,ne);const It=this.translationX,ke=this.translationY;this.translationX=-Nt[0],this.translationY=-Nt[1],tt(this,Qt,Vn).call(this),tt(this,O,kn).call(this),ft(this,P,zt),ft(this,o,ne),this.setDims(zt,ne);const te=st?ee/this.scaleFactor/2:0;this.translate(It-this.translationX-te,ke-this.translationY-te)},W(Et,wt),W(Et,Ut),W(Et,pe),Qe(Et,"_defaultColor",null),Qe(Et,"_defaultOpacity",1),Qe(Et,"_defaultThickness",1),Qe(Et,"_type","ink");let G=Et;m.InkEditor=G},(u,m,bt)=>{var G,I,f,H,U,T,A,C,v,E,F,ti,P,ei,d,Ai,y,pr,L,ds,q,us,k,gr,pt,Si,$,fs;Object.defineProperty(m,"__esModule",{value:!0}),m.StampEditor=void 0;var g=bt(1),x=bt(4),e=bt(6),Q=bt(29);const kt=class kt extends x.AnnotationEditor{constructor(R){super({...R,name:"stampEditor"});W(this,F);W(this,P);W(this,d);W(this,y);W(this,L);W(this,q);W(this,k);W(this,pt);W(this,$);W(this,G,null);W(this,I,null);W(this,f,null);W(this,H,null);W(this,U,null);W(this,T,null);W(this,A,null);W(this,C,null);W(this,v,!1);W(this,E,!1);ft(this,H,R.bitmapUrl),ft(this,U,R.bitmapFile)}static initialize(R){x.AnnotationEditor.initialize(R)}static get supportedTypes(){const R=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,g.shadow)(this,"supportedTypes",R.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,g.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(R){return this.supportedTypes.includes(R)}static paste(R,i){i.pasteEditor(g.AnnotationEditorType.STAMP,{bitmapFile:R.getAsFile()})}remove(){var R,i;t(this,I)&&(ft(this,G,null),this._uiManager.imageManager.deleteId(t(this,I)),(R=t(this,T))==null||R.remove(),ft(this,T,null),(i=t(this,A))==null||i.disconnect(),ft(this,A,null)),super.remove()}rebuild(){if(!this.parent){t(this,I)&&tt(this,d,Ai).call(this);return}super.rebuild(),this.div!==null&&(t(this,I)&&tt(this,d,Ai).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,f)||t(this,G)||t(this,H)||t(this,U))}get isResizable(){return!0}render(){if(this.div)return this.div;let R,i;if(this.width&&(R=this.x,i=this.y),super.render(),this.div.hidden=!0,t(this,G)?tt(this,y,pr).call(this):tt(this,d,Ai).call(this),this.width){const[a,s]=this.parentDimensions;this.setAt(R*a,i*s,this.width*a,this.height*s)}return this.div}static deserialize(R,i,a){if(R instanceof Q.StampAnnotationElement)return null;const s=super.deserialize(R,i,a),{rect:c,bitmapUrl:h,bitmapId:w,isSvg:_,accessibilityData:O}=R;w&&a.imageManager.isValidId(w)?ft(s,I,w):ft(s,H,h),ft(s,v,_);const[at,ct]=s.pageDimensions;return s.width=(c[2]-c[0])/at,s.height=(c[3]-c[1])/ct,O&&(s.altTextData=O),s}serialize(R=!1,i=null){if(this.isEmpty())return null;const a={annotationType:g.AnnotationEditorType.STAMP,bitmapId:t(this,I),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,v),structTreeParentId:this._structTreeParentId};if(R)return a.bitmapUrl=tt(this,pt,Si).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:s,altText:c}=this.altTextData;if(!s&&c&&(a.accessibilityData={type:"Figure",alt:c}),i===null)return a;i.stamps||(i.stamps=new Map);const h=t(this,v)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!i.stamps.has(t(this,I)))i.stamps.set(t(this,I),{area:h,serialized:a}),a.bitmap=tt(this,pt,Si).call(this,!1);else if(t(this,v)){const w=i.stamps.get(t(this,I));h>w.area&&(w.area=h,w.serialized.bitmap.close(),w.serialized.bitmap=tt(this,pt,Si).call(this,!1))}return a}};G=new WeakMap,I=new WeakMap,f=new WeakMap,H=new WeakMap,U=new WeakMap,T=new WeakMap,A=new WeakMap,C=new WeakMap,v=new WeakMap,E=new WeakMap,F=new WeakSet,ti=function(R,i=!1){if(!R){this.remove();return}ft(this,G,R.bitmap),i||(ft(this,I,R.id),ft(this,v,R.isSvg)),tt(this,y,pr).call(this)},P=new WeakSet,ei=function(){ft(this,f,null),this._uiManager.enableWaiting(!1),t(this,T)&&this.div.focus()},d=new WeakSet,Ai=function(){if(t(this,I)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,I)).then(i=>tt(this,F,ti).call(this,i,!0)).finally(()=>tt(this,P,ei).call(this));return}if(t(this,H)){const i=t(this,H);ft(this,H,null),this._uiManager.enableWaiting(!0),ft(this,f,this._uiManager.imageManager.getFromUrl(i).then(a=>tt(this,F,ti).call(this,a)).finally(()=>tt(this,P,ei).call(this)));return}if(t(this,U)){const i=t(this,U);ft(this,U,null),this._uiManager.enableWaiting(!0),ft(this,f,this._uiManager.imageManager.getFromFile(i).then(a=>tt(this,F,ti).call(this,a)).finally(()=>tt(this,P,ei).call(this)));return}const R=document.createElement("input");R.type="file",R.accept=kt.supportedTypesStr,ft(this,f,new Promise(i=>{R.addEventListener("change",async()=>{if(!R.files||R.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(R.files[0]);tt(this,F,ti).call(this,a)}i()}),R.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>tt(this,P,ei).call(this))),R.click()},y=new WeakSet,pr=function(){const{div:R}=this;let{width:i,height:a}=t(this,G);const[s,c]=this.pageDimensions,h=.75;if(this.width)i=this.width*s,a=this.height*c;else if(i>h*s||a>h*c){const at=Math.min(h*s/i,h*c/a);i*=at,a*=at}const[w,_]=this.parentDimensions;this.setDims(i*w/s,a*_/c),this._uiManager.enableWaiting(!1);const O=ft(this,T,document.createElement("canvas"));R.append(O),R.hidden=!1,tt(this,k,gr).call(this,i,a),tt(this,$,fs).call(this),t(this,E)||(this.parent.addUndoableEditor(this),ft(this,E,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},L=new WeakSet,ds=function(R,i){var h;const[a,s]=this.parentDimensions;this.width=R/a,this.height=i/s,this.setDims(R,i),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,C)!==null&&clearTimeout(t(this,C)),ft(this,C,setTimeout(()=>{ft(this,C,null),tt(this,k,gr).call(this,R,i)},200))},q=new WeakSet,us=function(R,i){const{width:a,height:s}=t(this,G);let c=a,h=s,w=t(this,G);for(;c>2*R||h>2*i;){const _=c,O=h;c>2*R&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),h>2*i&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const at=new OffscreenCanvas(c,h);at.getContext("2d").drawImage(w,0,0,_,O,0,0,c,h),w=at.transferToImageBitmap()}return w},k=new WeakSet,gr=function(R,i){R=Math.ceil(R),i=Math.ceil(i);const a=t(this,T);if(!a||a.width===R&&a.height===i)return;a.width=R,a.height=i;const s=t(this,v)?t(this,G):tt(this,q,us).call(this,R,i),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(s,0,0,s.width,s.height,0,0,R,i)},pt=new WeakSet,Si=function(R){if(R){if(t(this,v)){const s=this._uiManager.imageManager.getSvgUrl(t(this,I));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=t(this,G),i.getContext("2d").drawImage(t(this,G),0,0),i.toDataURL()}if(t(this,v)){const[i,a]=this.pageDimensions,s=Math.round(this.width*i*e.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*e.PixelsPerInch.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(s,c);return h.getContext("2d").drawImage(t(this,G),0,0,t(this,G).width,t(this,G).height,0,0,s,c),h.transferToImageBitmap()}return structuredClone(t(this,G))},$=new WeakSet,fs=function(){ft(this,A,new ResizeObserver(R=>{const i=R[0].contentRect;i.width&&i.height&&tt(this,L,ds).call(this,i.width,i.height)})),t(this,A).observe(this.div)},Qe(kt,"_type","stamp");let Pt=kt;m.StampEditor=Pt}],__webpack_module_cache__={};function __w_pdfjs_require__(u){var m=__webpack_module_cache__[u];if(m!==void 0)return m.exports;var bt=__webpack_module_cache__[u]={exports:{}};return __webpack_modules__[u](bt,bt.exports,__w_pdfjs_require__),bt.exports}var __webpack_exports__={};return(()=>{var u=__webpack_exports__;Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"AbortException",{enumerable:!0,get:function(){return m.AbortException}}),Object.defineProperty(u,"AnnotationEditorLayer",{enumerable:!0,get:function(){return e.AnnotationEditorLayer}}),Object.defineProperty(u,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return m.AnnotationEditorParamsType}}),Object.defineProperty(u,"AnnotationEditorType",{enumerable:!0,get:function(){return m.AnnotationEditorType}}),Object.defineProperty(u,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Q.AnnotationEditorUIManager}}),Object.defineProperty(u,"AnnotationLayer",{enumerable:!0,get:function(){return Pt.AnnotationLayer}}),Object.defineProperty(u,"AnnotationMode",{enumerable:!0,get:function(){return m.AnnotationMode}}),Object.defineProperty(u,"CMapCompressionType",{enumerable:!0,get:function(){return m.CMapCompressionType}}),Object.defineProperty(u,"DOMSVGFactory",{enumerable:!0,get:function(){return g.DOMSVGFactory}}),Object.defineProperty(u,"FeatureTest",{enumerable:!0,get:function(){return m.FeatureTest}}),Object.defineProperty(u,"GlobalWorkerOptions",{enumerable:!0,get:function(){return G.GlobalWorkerOptions}}),Object.defineProperty(u,"ImageKind",{enumerable:!0,get:function(){return m.ImageKind}}),Object.defineProperty(u,"InvalidPDFException",{enumerable:!0,get:function(){return m.InvalidPDFException}}),Object.defineProperty(u,"MissingPDFException",{enumerable:!0,get:function(){return m.MissingPDFException}}),Object.defineProperty(u,"OPS",{enumerable:!0,get:function(){return m.OPS}}),Object.defineProperty(u,"PDFDataRangeTransport",{enumerable:!0,get:function(){return bt.PDFDataRangeTransport}}),Object.defineProperty(u,"PDFDateString",{enumerable:!0,get:function(){return g.PDFDateString}}),Object.defineProperty(u,"PDFWorker",{enumerable:!0,get:function(){return bt.PDFWorker}}),Object.defineProperty(u,"PasswordResponses",{enumerable:!0,get:function(){return m.PasswordResponses}}),Object.defineProperty(u,"PermissionFlag",{enumerable:!0,get:function(){return m.PermissionFlag}}),Object.defineProperty(u,"PixelsPerInch",{enumerable:!0,get:function(){return g.PixelsPerInch}}),Object.defineProperty(u,"PromiseCapability",{enumerable:!0,get:function(){return m.PromiseCapability}}),Object.defineProperty(u,"RenderingCancelledException",{enumerable:!0,get:function(){return g.RenderingCancelledException}}),Object.defineProperty(u,"SVGGraphics",{enumerable:!0,get:function(){return bt.SVGGraphics}}),Object.defineProperty(u,"UnexpectedResponseException",{enumerable:!0,get:function(){return m.UnexpectedResponseException}}),Object.defineProperty(u,"Util",{enumerable:!0,get:function(){return m.Util}}),Object.defineProperty(u,"VerbosityLevel",{enumerable:!0,get:function(){return m.VerbosityLevel}}),Object.defineProperty(u,"XfaLayer",{enumerable:!0,get:function(){return I.XfaLayer}}),Object.defineProperty(u,"build",{enumerable:!0,get:function(){return bt.build}}),Object.defineProperty(u,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return m.createValidAbsoluteUrl}}),Object.defineProperty(u,"getDocument",{enumerable:!0,get:function(){return bt.getDocument}}),Object.defineProperty(u,"getFilenameFromUrl",{enumerable:!0,get:function(){return g.getFilenameFromUrl}}),Object.defineProperty(u,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return g.getPdfFilenameFromUrl}}),Object.defineProperty(u,"getXfaPageViewport",{enumerable:!0,get:function(){return g.getXfaPageViewport}}),Object.defineProperty(u,"isDataScheme",{enumerable:!0,get:function(){return g.isDataScheme}}),Object.defineProperty(u,"isPdfFile",{enumerable:!0,get:function(){return g.isPdfFile}}),Object.defineProperty(u,"loadScript",{enumerable:!0,get:function(){return g.loadScript}}),Object.defineProperty(u,"noContextMenu",{enumerable:!0,get:function(){return g.noContextMenu}}),Object.defineProperty(u,"normalizeUnicode",{enumerable:!0,get:function(){return m.normalizeUnicode}}),Object.defineProperty(u,"renderTextLayer",{enumerable:!0,get:function(){return x.renderTextLayer}}),Object.defineProperty(u,"setLayerDimensions",{enumerable:!0,get:function(){return g.setLayerDimensions}}),Object.defineProperty(u,"shadow",{enumerable:!0,get:function(){return m.shadow}}),Object.defineProperty(u,"updateTextLayer",{enumerable:!0,get:function(){return x.updateTextLayer}}),Object.defineProperty(u,"version",{enumerable:!0,get:function(){return bt.version}});var m=__w_pdfjs_require__(1),bt=__w_pdfjs_require__(2),g=__w_pdfjs_require__(6),x=__w_pdfjs_require__(26),e=__w_pdfjs_require__(27),Q=__w_pdfjs_require__(5),Pt=__w_pdfjs_require__(29),G=__w_pdfjs_require__(14),I=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(u){var m=reactExports,bt=pdfExports;function g(r){var p=Object.create(null);return r&&Object.keys(r).forEach(function(N){if(N!=="default"){var z=Object.getOwnPropertyDescriptor(r,N);Object.defineProperty(p,N,z.get?z:{enumerable:!0,get:function(){return r[N]}})}}),p.default=r,Object.freeze(p)}var x,e=g(m),Q=g(bt);u.AnnotationType=void 0,(x=u.AnnotationType||(u.AnnotationType={}))[x.Text=1]="Text",x[x.Link=2]="Link",x[x.FreeText=3]="FreeText",x[x.Line=4]="Line",x[x.Square=5]="Square",x[x.Circle=6]="Circle",x[x.Polygon=7]="Polygon",x[x.Polyline=8]="Polyline",x[x.Highlight=9]="Highlight",x[x.Underline=10]="Underline",x[x.Squiggly=11]="Squiggly",x[x.StrikeOut=12]="StrikeOut",x[x.Stamp=13]="Stamp",x[x.Caret=14]="Caret",x[x.Ink=15]="Ink",x[x.Popup=16]="Popup",x[x.FileAttachment=17]="FileAttachment";var Pt=function(r,p){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,z){N.__proto__=z}||function(N,z){for(var X in z)Object.prototype.hasOwnProperty.call(z,X)&&(N[X]=z[X])},Pt(r,p)};function G(r,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function N(){this.constructor=r}Pt(r,p),r.prototype=p===null?Object.create(p):(N.prototype=p.prototype,new N)}var I,f=function(){return f=Object.assign||function(r){for(var p,N=1,z=arguments.length;N<z;N++)for(var X in p=arguments[N])Object.prototype.hasOwnProperty.call(p,X)&&(r[X]=p[X]);return r},f.apply(this,arguments)};u.TextDirection=void 0,(I=u.TextDirection||(u.TextDirection={})).RightToLeft="RTL",I.LeftToRight="LTR";var H,U=e.createContext({currentTheme:"light",direction:u.TextDirection.LeftToRight,setCurrentTheme:function(){}}),T=function(r){var p=[];return Object.keys(r).forEach(function(N){N&&r[N]&&p.push(N)}),p.join(" ")},A=typeof window<"u"?e.useLayoutEffect:e.useEffect,C=function(r){var p=e.useRef(null),N=r.once,z=r.threshold,X=r.onVisibilityChanged;return A(function(){var J=p.current;if(J){var ut=new IntersectionObserver(function(rt){rt.forEach(function(V){var ht=V.isIntersecting,lt=V.intersectionRatio;X({isVisible:ht,ratio:lt}),ht&&N&&(ut.unobserve(J),ut.disconnect())})},{threshold:z||0});return ut.observe(J),function(){ut.unobserve(J),ut.disconnect()}}},[]),p},v=function(r){var p=r.children,N=r.ignoreDirection,z=N!==void 0&&N,X=r.size,J=X===void 0?24:X,ut=e.useContext(U).direction,rt=!z&&ut===u.TextDirection.RightToLeft,V="".concat(J||24,"px");return e.createElement("svg",{"aria-hidden":"true",className:T({"rpv-core__icon":!0,"rpv-core__icon--rtl":rt}),focusable:"false",height:V,viewBox:"0 0 24 24",width:V},p)},E=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},F=function(r){var p=r.children,N=r.testId,z=r.onClick,X=e.useContext(U).direction===u.TextDirection.RightToLeft,J=N?{"data-testid":N}:{};return e.createElement("button",f({className:T({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":X}),type:"button",onClick:z},J),p)},M=function(r){var p=r.size,N=p===void 0?"4rem":p,z=r.testId,X=e.useState(!1),J=X[0],ut=X[1],rt=z?{"data-testid":z}:{},V=C({onVisibilityChanged:function(ht){ut(ht.isVisible)}});return e.createElement("div",f({},rt,{className:T({"rpv-core__spinner":!0,"rpv-core__spinner--animating":J}),ref:V,style:{height:N,width:N}}))},P=function(r){var p=r.ariaLabel,N=p===void 0?"":p,z=r.autoFocus,X=z!==void 0&&z,J=r.placeholder,ut=J===void 0?"":J,rt=r.testId,V=r.type,ht=V===void 0?"text":V,lt=r.value,Ft=lt===void 0?"":lt,Rt=r.onChange,xt=r.onKeyDown,Yt=xt===void 0?function(){}:xt,qt=e.useContext(U).direction,Ht=e.useRef(),De=qt===u.TextDirection.RightToLeft,ge={ref:Ht,"data-testid":"","aria-label":N,className:T({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":De}),placeholder:ut,value:Ft,onChange:function(ve){return Rt(ve.target.value)},onKeyDown:Yt};return rt&&(ge["data-testid"]=rt),A(function(){if(X){var ve=Ht.current;if(ve){var Ee=window.scrollX,ae=window.scrollY;ve.focus(),window.scrollTo(Ee,ae)}}},[]),ht==="text"?e.createElement("input",f({type:"text"},ge)):e.createElement("input",f({type:"password"},ge))};(function(r){r[r.ExitFullScreen=0]="ExitFullScreen",r[r.FullScreenChange=1]="FullScreenChange",r[r.FullScreenElement=2]="FullScreenElement",r[r.FullScreenEnabled=3]="FullScreenEnabled",r[r.RequestFullScreen=4]="RequestFullScreen"})(H||(H={}));var o,d={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},D={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},y={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},l=typeof window<"u",L=l&&(H.FullScreenEnabled in document&&d||D.FullScreenEnabled in document&&D||y.FullScreenEnabled in document&&y)||d,S=function(){return l&&L.FullScreenEnabled in document&&document[L.FullScreenEnabled]===!0},q=function(r){return l?r[L.ExitFullScreen]():Promise.resolve({})},Z=function(){return l?document[L.FullScreenElement]:null},k=function(r,p){var N=e.useRef(),z=function(){N.current&&clearTimeout(N.current)};return e.useEffect(function(){return function(){return z()}},[]),e.useCallback(function(){for(var X=[],J=0;J<arguments.length;J++)X[J]=arguments[J];z(),N.current=setTimeout(function(){r.apply(void 0,X)},p)},[r,p])},et=function(){var r=e.useRef(!1);return e.useEffect(function(){return r.current=!0,function(){r.current=!1}},[]),r},pt=function(r){var p=e.useRef(r);return e.useEffect(function(){p.current=r},[r]),p.current};(function(r){r.NotRenderedYet="NotRenderedYet",r.Rendering="Rendering",r.Rendered="Rendered"})(o||(o={}));var vt,$=-9999,At=function(r){var p=r.doc,N=p.numPages,z=p.loadingTask.docId,X=e.useMemo(function(){return Array(N).fill(null).map(function(rt,V){return{pageIndex:V,renderStatus:o.NotRenderedYet,visibility:$}})},[z]),J=e.useRef({currentRenderingPage:-1,startRange:0,endRange:N-1,visibilities:X}),ut=function(rt,V){J.current.visibilities[rt].visibility=V};return{getHighestPriorityPage:function(){var rt=J.current.visibilities.slice(J.current.startRange,J.current.endRange+1).filter(function(Rt){return Rt.visibility>$});if(!rt.length)return-1;for(var V=rt[0].pageIndex,ht=rt[rt.length-1].pageIndex,lt=rt.length,Ft=0;Ft<lt;Ft++){if(rt[Ft].renderStatus===o.Rendering)return-1;if(rt[Ft].renderStatus===o.NotRenderedYet)return rt[Ft].pageIndex}return ht+1<N&&J.current.visibilities[ht+1].renderStatus!==o.Rendered?ht+1:V-1>=0&&J.current.visibilities[V-1].renderStatus!==o.Rendered?V-1:-1},isInRange:function(rt){return rt>=J.current.startRange&&rt<=J.current.endRange},markNotRendered:function(){for(var rt=0;rt<N;rt++)J.current.visibilities[rt].renderStatus=o.NotRenderedYet},markRendered:function(rt){J.current.visibilities[rt].renderStatus=o.Rendered},markRendering:function(rt){J.current.currentRenderingPage!==-1&&J.current.currentRenderingPage!==rt&&J.current.visibilities[J.current.currentRenderingPage].renderStatus===o.Rendering&&(J.current.visibilities[J.current.currentRenderingPage].renderStatus=o.NotRenderedYet),J.current.visibilities[rt].renderStatus=o.Rendering,J.current.currentRenderingPage=rt},setOutOfRange:function(rt){ut(rt,$)},setRange:function(rt,V){J.current.startRange=rt,J.current.endRange=V;for(var ht=0;ht<N;ht++)(ht<rt||ht>V)&&(J.current.visibilities[ht].visibility=$,J.current.visibilities[ht].renderStatus=o.NotRenderedYet)},setVisibility:ut}},kt={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Bt=e.createContext({l10n:kt,setL10n:function(){}}),Vt=0,R=function(){return Vt++},i=function(r,p,N){var z=function(X){var J=p.current;if(J){var ut=X.target;if(ut instanceof Element&&ut.shadowRoot){var rt=X.composedPath();rt.length>0&&!J.contains(rt[0])&&N()}else J.contains(ut)||N()}};e.useEffect(function(){if(r){var X={capture:!0};return document.addEventListener("click",z,X),function(){document.removeEventListener("click",z,X)}}},[])},a=function(r){var p=function(N){N.key==="Escape"&&r()};e.useEffect(function(){return document.addEventListener("keyup",p),function(){document.removeEventListener("keyup",p)}},[])},s=function(r){var p=r.ariaControlsSuffix,N=r.children,z=r.closeOnClickOutside,X=r.closeOnEscape,J=r.onToggle,ut=e.useRef(),rt=e.useContext(U).direction===u.TextDirection.RightToLeft;return e.useEffect(function(){var V=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=V}},[]),a(function(){ut.current&&X&&J()}),i(z,ut,J),A(function(){var V=ut.current;if(V){var ht=.75*document.body.clientHeight;V.getBoundingClientRect().height>=ht&&(V.style.overflow="auto",V.style.maxHeight="".concat(ht,"px"))}},[]),e.createElement("div",{"aria-modal":"true",className:T({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":rt}),id:"rpv-core__modal-body-".concat(p),ref:ut,role:"dialog",tabIndex:-1},N)},c=function(r){var p=r.children;return e.createElement("div",{className:"rpv-core__modal-overlay"},p)};u.ToggleStatus=void 0,(vt=u.ToggleStatus||(u.ToggleStatus={})).Close="Close",vt.Open="Open",vt.Toggle="Toggle";var h,w=function(r){var p=e.useState(r),N=p[0],z=p[1];return{opened:N,toggle:function(X){switch(X){case u.ToggleStatus.Close:z(!1);break;case u.ToggleStatus.Open:z(!0);break;case u.ToggleStatus.Toggle:default:z(function(J){return!J})}}}},_=function(r){var p=r.content,N=r.isOpened,z=N!==void 0&&N,X=r.target,J=w(z),ut=J.opened,rt=J.toggle;return e.createElement(e.Fragment,null,X&&X(rt,ut),ut&&p(rt))};u.Position=void 0,(h=u.Position||(u.Position={})).TopLeft="TOP_LEFT",h.TopCenter="TOP_CENTER",h.TopRight="TOP_RIGHT",h.RightTop="RIGHT_TOP",h.RightCenter="RIGHT_CENTER",h.RightBottom="RIGHT_BOTTOM",h.BottomLeft="BOTTOM_LEFT",h.BottomCenter="BOTTOM_CENTER",h.BottomRight="BOTTOM_RIGHT",h.LeftTop="LEFT_TOP",h.LeftCenter="LEFT_CENTER",h.LeftBottom="LEFT_BOTTOM";var O,at,ct,mt,St,Dt,Ct,$t,Qt=function(r,p,N,z,X){A(function(){var J=p.current,ut=r.current,rt=N.current;if(ut&&J&&rt){var V=rt.getBoundingClientRect(),ht=function(Rt,xt,Yt,qt){var Ht=xt.getBoundingClientRect(),De=Rt.getBoundingClientRect(),ge=De.height,ve=De.width,Ee=0,ae=0;switch(Yt){case u.Position.TopLeft:Ee=Ht.top-ge,ae=Ht.left;break;case u.Position.TopCenter:Ee=Ht.top-ge,ae=Ht.left+Ht.width/2-ve/2;break;case u.Position.TopRight:Ee=Ht.top-ge,ae=Ht.left+Ht.width-ve;break;case u.Position.RightTop:Ee=Ht.top,ae=Ht.left+Ht.width;break;case u.Position.RightCenter:Ee=Ht.top+Ht.height/2-ge/2,ae=Ht.left+Ht.width;break;case u.Position.RightBottom:Ee=Ht.top+Ht.height-ge,ae=Ht.left+Ht.width;break;case u.Position.BottomLeft:Ee=Ht.top+Ht.height,ae=Ht.left;break;case u.Position.BottomCenter:Ee=Ht.top+Ht.height,ae=Ht.left+Ht.width/2-ve/2;break;case u.Position.BottomRight:Ee=Ht.top+Ht.height,ae=Ht.left+Ht.width-ve;break;case u.Position.LeftTop:Ee=Ht.top,ae=Ht.left-ve;break;case u.Position.LeftCenter:Ee=Ht.top+Ht.height/2-ge/2,ae=Ht.left-ve;break;case u.Position.LeftBottom:Ee=Ht.top+Ht.height-ge,ae=Ht.left-ve}return{left:ae+(qt.left||0),top:Ee+(qt.top||0)}}(ut,J,z,X),lt=ht.top,Ft=ht.left;ut.style.top="".concat(lt-V.top,"px"),ut.style.left="".concat(Ft-V.left,"px")}},[])},Ot=function(r){var p,N=r.customClassName,z=r.position;return e.createElement("div",{className:T((p={"rpv-core__arrow":!0,"rpv-core__arrow--tl":z===u.Position.TopLeft,"rpv-core__arrow--tc":z===u.Position.TopCenter,"rpv-core__arrow--tr":z===u.Position.TopRight,"rpv-core__arrow--rt":z===u.Position.RightTop,"rpv-core__arrow--rc":z===u.Position.RightCenter,"rpv-core__arrow--rb":z===u.Position.RightBottom,"rpv-core__arrow--bl":z===u.Position.BottomLeft,"rpv-core__arrow--bc":z===u.Position.BottomCenter,"rpv-core__arrow--br":z===u.Position.BottomRight,"rpv-core__arrow--lt":z===u.Position.LeftTop,"rpv-core__arrow--lc":z===u.Position.LeftCenter,"rpv-core__arrow--lb":z===u.Position.LeftBottom},p["".concat(N)]=N!=="",p))})},Zt=function(r){var p=r.ariaControlsSuffix,N=r.children,z=r.closeOnClickOutside,X=r.offset,J=r.position,ut=r.targetRef,rt=r.onClose,V=e.useRef(),ht=e.useRef(),lt=e.useRef(),Ft=e.useContext(U).direction===u.TextDirection.RightToLeft;i(z,V,rt),Qt(V,ut,lt,J,X),A(function(){var xt=ht.current;if(xt){var Yt=.75*document.body.clientHeight;xt.getBoundingClientRect().height>=Yt&&(xt.style.overflow="auto",xt.style.maxHeight="".concat(Yt,"px"))}},[]);var Rt="rpv-core__popover-body-inner-".concat(p);return e.createElement(e.Fragment,null,e.createElement("div",{ref:lt,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{"aria-describedby":Rt,className:T({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Ft}),id:"rpv-core__popover-body-".concat(p),ref:V,role:"dialog",tabIndex:-1},e.createElement(Ot,{customClassName:"rpv-core__popover-body-arrow",position:J}),e.createElement("div",{id:Rt,ref:ht},N)))},Tt=function(r){var p=r.closeOnEscape,N=r.onClose,z=e.useRef();return a(function(){z.current&&p&&N()}),e.createElement("div",{className:"rpv-core__popover-overlay",ref:z})},dt=function(r){var p=r.ariaControlsSuffix,N=r.children,z=r.contentRef,X=r.offset,J=r.position,ut=r.targetRef,rt=e.useRef(),V=e.useContext(U).direction===u.TextDirection.RightToLeft;return Qt(z,ut,rt,J,X),e.createElement(e.Fragment,null,e.createElement("div",{ref:rt,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{className:T({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":V}),id:"rpv-core__tooltip-body-".concat(p),ref:z,role:"tooltip"},e.createElement(Ot,{customClassName:"rpv-core__tooltip-body-arrow",position:J}),e.createElement("div",{className:"rpv-core__tooltip-body-content"},N)))};u.FullScreenMode=void 0,(O=u.FullScreenMode||(u.FullScreenMode={})).Normal="Normal",O.Entering="Entering",O.Entered="Entered",O.EnteredCompletely="EnteredCompletely",O.Exitting="Exitting",O.Exited="Exited",u.LayerRenderStatus=void 0,(at=u.LayerRenderStatus||(u.LayerRenderStatus={}))[at.PreRender=0]="PreRender",at[at.DidRender=1]="DidRender",u.PageMode=void 0,(ct=u.PageMode||(u.PageMode={})).Attachments="UseAttachments",ct.Bookmarks="UseOutlines",ct.ContentGroup="UseOC",ct.Default="UserNone",ct.FullScreen="FullScreen",ct.Thumbnails="UseThumbs",u.PasswordStatus=void 0,(mt=u.PasswordStatus||(u.PasswordStatus={})).RequiredPassword="RequiredPassword",mt.WrongPassword="WrongPassword",u.RotateDirection=void 0,(St=u.RotateDirection||(u.RotateDirection={})).Backward="Backward",St.Forward="Forward",u.ScrollMode=void 0,(Dt=u.ScrollMode||(u.ScrollMode={})).Page="Page",Dt.Horizontal="Horizontal",Dt.Vertical="Vertical",Dt.Wrapped="Wrapped",u.SpecialZoomLevel=void 0,(Ct=u.SpecialZoomLevel||(u.SpecialZoomLevel={})).ActualSize="ActualSize",Ct.PageFit="PageFit",Ct.PageWidth="PageWidth",u.ViewMode=void 0,($t=u.ViewMode||(u.ViewMode={})).DualPage="DualPage",$t.DualPageWithCover="DualPageWithCover",$t.SinglePage="SinglePage";var ot,wt=function(r,p){return r.reduce(function(N,z,X){return X%p?N[N.length-1].push(z):N.push([z]),N},[])},Wt=function(r,p){switch(p[1].name){case"XYZ":return{bottomOffset:function(N,z){return p[3]===null?z:p[3]},leftOffset:function(N,z){return p[2]===null?0:p[2]},pageIndex:r,scaleTo:p[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:r,scaleTo:u.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:p[2],leftOffset:0,pageIndex:r,scaleTo:u.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:r,scaleTo:1}}},Ut=new Map,ce=new Map,pe=function(r,p){return"".concat(r.loadingTask.docId,"___").concat(p.num,"R").concat(p.gen===0?"":p.gen)},de=function(r,p,N){Ut.set(pe(r,p),N)},me=function(r,p){if(!r)return Promise.reject("The document is not loaded yet");var N="".concat(r.loadingTask.docId,"___").concat(p),z=ce.get(N);return z?Promise.resolve(z):new Promise(function(X,J){r.getPage(p+1).then(function(ut){ce.set(N,ut),ut.ref&&de(r,ut.ref,p),X(ut)})})},ye=function(r,p){return new Promise(function(N){new Promise(function(z){typeof p=="string"?r.getDestination(p).then(function(X){z(X)}):z(p)}).then(function(z){if(typeof z[0]=="object"&&z[0]!==null){var X=z[0],J=function(rt,V){var ht=pe(rt,V);return Ut.has(ht)?Ut.get(ht):null}(r,X);J===null?r.getPageIndex(X).then(function(rt){de(r,X,rt),ye(r,p).then(function(V){return N(V)})}):N(Wt(J,z))}else{var ut=Wt(z[0],z);N(ut)}})})};(function(r){r[r.Solid=1]="Solid",r[r.Dashed=2]="Dashed",r[r.Beveled=3]="Beveled",r[r.Inset=4]="Inset",r[r.Underline=5]="Underline"})(ot||(ot={}));var se,Ce=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),yt=function(r,p,N,z){var X=parseInt(r,10);return X>=p&&X<=N?X:z},nt=function(r){return r.contentsObj?r.contentsObj.str:r.contents||""},Y=function(r){return r.titleObj?r.titleObj.str:r.title||""},Lt=function(r){var p=r.annotation,N=e.useContext(U).direction,z=Y(p),X=nt(p),J=N===u.TextDirection.RightToLeft,ut=e.useRef(),rt="";if(p.modificationDate){var V=function(ht){var lt=Ce.exec(ht);if(!lt)return null;var Ft=parseInt(lt[1],10),Rt=yt(lt[2],1,12,1)-1,xt=yt(lt[3],1,31,1),Yt=yt(lt[4],0,23,0),qt=yt(lt[5],0,59,0),Ht=yt(lt[6],0,59,0),De=lt[7]||"Z",ge=yt(lt[8],0,23,0),ve=yt(lt[9],0,59,0);switch(De){case"-":Yt+=ge,qt+=ve;break;case"+":Yt-=ge,qt-=ve}return new Date(Date.UTC(Ft,Rt,xt,Yt,qt,Ht))}(p.modificationDate);rt=V?"".concat(V.toLocaleDateString(),", ").concat(V.toLocaleTimeString()):""}return e.useLayoutEffect(function(){if(ut.current){var ht=document.querySelector('[data-annotation-id="'.concat(p.id,'"]'));if(ht){var lt=ht;return lt.style.zIndex+=1,function(){lt.style.zIndex="".concat(parseInt(lt.style.zIndex,10)-1)}}}},[]),e.createElement("div",{ref:ut,className:T({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":J}),style:{top:p.annotationType===u.AnnotationType.Popup?"":"100%"}},z&&e.createElement(e.Fragment,null,e.createElement("div",{className:T({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!J,"rpv-core__annotation-popup-title--rtl":J})},z),e.createElement("div",{className:"rpv-core__annotation-popup-date"},rt)),X&&e.createElement("div",{className:"rpv-core__annotation-popup-content"},X.split(`
`).map(function(ht,lt){return e.createElement(e.Fragment,{key:lt},ht,e.createElement("br",null))})))};(function(r){r.Click="Click",r.Hover="Hover"})(se||(se={}));var Et,Fe=function(r){var p,N=r.annotation,z=r.children,X=r.ignoreBorder,J=r.hasPopup,ut=r.isRenderable,rt=r.page,V=r.viewport,ht=N.rect,lt=function(){var Ae=w(!1),ze=Ae.opened,He=Ae.toggle,Ve=e.useState(se.Hover),Ge=Ve[0],$e=Ve[1];return{opened:ze,closeOnHover:function(){Ge===se.Hover&&He(u.ToggleStatus.Close)},openOnHover:function(){Ge===se.Hover&&He(u.ToggleStatus.Open)},toggleOnClick:function(){switch(Ge){case se.Click:ze&&$e(se.Hover),He(u.ToggleStatus.Toggle);break;case se.Hover:$e(se.Click),He(u.ToggleStatus.Open)}}}}(),Ft=lt.closeOnHover,Rt=lt.opened,xt=lt.openOnHover,Yt=lt.toggleOnClick,qt=(p=[ht[0],rt.view[3]+rt.view[1]-ht[1],ht[2],rt.view[3]+rt.view[1]-ht[3]],[Math.min(p[0],p[2]),Math.min(p[1],p[3]),Math.max(p[0],p[2]),Math.max(p[1],p[3])]),Ht=ht[2]-ht[0],De=ht[3]-ht[1],ge={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!X&&N.borderStyle.width>0){switch(N.borderStyle.style){case ot.Dashed:ge.borderStyle="dashed";break;case ot.Solid:ge.borderStyle="solid";break;case ot.Underline:ge=Object.assign({borderBottomStyle:"solid"},ge);case ot.Beveled:case ot.Inset:}var ve=N.borderStyle.width;ge.borderWidth="".concat(ve,"px"),N.borderStyle.style!==ot.Underline&&(Ht-=2*ve,De-=2*ve);var Ee=N.borderStyle,ae=Ee.horizontalCornerRadius,Pe=Ee.verticalCornerRadius;(ae>0||Pe>0)&&(ge.borderRadius="".concat(ae,"px / ").concat(Pe,"px")),N.color?ge.borderColor="rgb(".concat(0|N.color[0],", ").concat(0|N.color[1],", ").concat(0|N.color[2],")"):ge.borderWidth="0"}return e.createElement(e.Fragment,null,ut&&z({popup:{opened:Rt,closeOnHover:Ft,openOnHover:xt,toggleOnClick:Yt},slot:{attrs:{style:Object.assign({height:"".concat(De,"px"),left:"".concat(qt[0],"px"),top:"".concat(qt[1],"px"),transform:"matrix(".concat(V.transform.join(","),")"),transformOrigin:"-".concat(qt[0],"px -").concat(qt[1],"px"),width:"".concat(Ht,"px")},ge)},children:e.createElement(e.Fragment,null,J&&Rt&&e.createElement(Lt,{annotation:N}))}}))},We=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut);return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},st=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut),V=p.rect,ht=V[2]-V[0],lt=V[3]-V[1],Ft=p.borderStyle.width;return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(Rt){return e.createElement("div",f({},Rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":p.id,onClick:Rt.popup.toggleOnClick,onMouseEnter:Rt.popup.openOnHover,onMouseLeave:Rt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(lt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(lt),width:"".concat(ht,"px")},e.createElement("circle",{cy:lt/2,fill:"none",rx:ht/2-Ft/2,ry:lt/2-Ft/2,stroke:"transparent",strokeWidth:Ft||1})),Rt.slot.children)})},Nt=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=Y(p),J=nt(p),ut=!(p.hasPopup!==!1||!X&&!J),rt=function(){var V,ht,lt,Ft,Rt=p.file;Rt&&(V=Rt.filename,ht=Rt.content,lt=typeof ht=="string"?"":URL.createObjectURL(new Blob([ht],{type:""})),(Ft=document.createElement("a")).style.display="none",Ft.href=lt||V,Ft.setAttribute("download",function(xt){var Yt=xt.split("/").pop();return Yt?Yt.split("#")[0].split("?")[0]:xt}(V)),document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft),lt&&URL.revokeObjectURL(lt))};return e.createElement(Fe,{annotation:p,hasPopup:ut,ignoreBorder:!0,isRenderable:!0,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onDoubleClick:rt,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},ee=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut);return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},zt=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=Y(p),J=nt(p),ut=!(!X&&!J),rt=!p.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(p.parentType)!==-1;return A(function(){if(p.parentId){var V=document.querySelector('[data-annotation-id="'.concat(p.parentId,'"]')),ht=document.querySelector('[data-annotation-id="'.concat(p.id,'"]'));if(V&&ht){var lt=parseFloat(V.style.left),Ft=parseFloat(V.style.top)+parseFloat(V.style.height);ht.style.left="".concat(lt,"px"),ht.style.top="".concat(Ft,"px"),ht.style.transformOrigin="-".concat(lt,"px -").concat(Ft,"px")}}},[]),e.createElement(Fe,{annotation:p,hasPopup:rt,ignoreBorder:!1,isRenderable:ut,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":p.id}),e.createElement(Lt,{annotation:p}))})},ne=function(r){var p=r.annotation,N=r.childAnnotation,z=r.page,X=r.viewport,J=p.hasPopup===!1,ut=Y(p),rt=nt(p),V=!!(p.hasPopup||ut||rt);if(p.quadPoints&&p.quadPoints.length>0){var ht=p.quadPoints.map(function(lt){return Object.assign({},p,{rect:[lt[2].x,lt[2].y,lt[1].x,lt[1].y],quadPoints:[]})});return e.createElement(e.Fragment,null,ht.map(function(lt,Ft){return e.createElement(ne,{key:Ft,annotation:lt,childAnnotation:N,page:z,viewport:X})}))}return e.createElement(Fe,{annotation:p,hasPopup:J,ignoreBorder:!0,isRenderable:V,page:z,viewport:X},function(lt){return e.createElement(e.Fragment,null,e.createElement("div",f({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":p.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),lt.slot.children),N&&N.annotationType===u.AnnotationType.Popup&&lt.popup.opened&&e.createElement(zt,{annotation:N,page:z,viewport:X}))})},re=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut),V=p.rect,ht=V[2]-V[0],lt=V[3]-V[1],Ft=p.borderStyle.width;return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(Rt){return e.createElement("div",f({},Rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":p.id,onClick:Rt.popup.toggleOnClick,onMouseEnter:Rt.popup.openOnHover,onMouseLeave:Rt.popup.closeOnHover}),p.inkLists&&p.inkLists.length&&e.createElement("svg",{height:"".concat(lt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(lt),width:"".concat(ht,"px")},p.inkLists.map(function(xt,Yt){return e.createElement("polyline",{key:Yt,fill:"none",stroke:"transparent",strokeWidth:Ft||1,points:xt.map(function(qt){return"".concat(qt.x-V[0],",").concat(V[3]-qt.y)}).join(" ")})})),Rt.slot.children)})},Oe=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut),V=p.rect,ht=V[2]-V[0],lt=V[3]-V[1],Ft=p.borderStyle.width;return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(Rt){return e.createElement("div",f({},Rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":p.id,onClick:Rt.popup.toggleOnClick,onMouseEnter:Rt.popup.openOnHover,onMouseLeave:Rt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(lt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(lt),width:"".concat(ht,"px")},e.createElement("line",{stroke:"transparent",strokeWidth:Ft||1,x1:V[2]-p.lineCoordinates[0],x2:V[2]-p.lineCoordinates[2],y1:V[3]-p.lineCoordinates[1],y2:V[3]-p.lineCoordinates[3]})),Rt.slot.children)})},It=/^([^\w]*)(javascript|data|vbscript)/im,ke=/&#(\w+)(^\w|;)?/g,te=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,B=/^([^:]+):/gm,n=function(r,p){p===void 0&&(p="about:blank");var N,z=(N=r||"",N.replace(ke,function(rt,V){return String.fromCharCode(V)})).replace(te,"").trim();if(!z)return p;var X=z[0];if(X==="."||X==="/")return z;var J=z.match(B);if(!J)return z;var ut=J[0];return It.test(ut)?p:z},b=function(r){var p,N=r.annotation,z=r.annotationContainerRef,X=r.doc,J=r.outlines,ut=r.page,rt=r.pageIndex,V=r.scale,ht=r.viewport,lt=r.onExecuteNamedAction,Ft=r.onJumpFromLinkAnnotation,Rt=r.onJumpToDest,xt=e.useRef(),Yt=J&&J.length&&N.dest&&typeof N.dest=="string"?(p=J.find(function(ge){return ge.dest===N.dest}))===null||p===void 0?void 0:p.title:"",qt=!!(N.url||N.dest||N.action||N.unsafeUrl),Ht={};if(N.url||N.unsafeUrl){var De=n(N.url||N.unsafeUrl,"");De?Ht={"data-target":"external",href:De,rel:"noopener noreferrer nofollow",target:N.newWindow?"_blank":"",title:De}:qt=!1}else Ht={href:"","data-annotation-link":N.id,onClick:function(ge){ge.preventDefault(),N.action?lt(N.action):ye(X,N.dest).then(function(ve){var Ee=xt.current,ae=z.current;if(Ee&&ae){var Pe=Ee.getBoundingClientRect();ae.style.setProperty("height","100%"),ae.style.setProperty("width","100%");var Ae=ae.getBoundingClientRect();ae.style.removeProperty("height"),ae.style.removeProperty("width");var ze=(Pe.left-Ae.left)/V,He=(Ae.bottom-Pe.bottom+Pe.height)/V;Ft({bottomOffset:He,label:Yt,leftOffset:ze,pageIndex:rt})}Rt(ve)})}};return Yt&&(Ht=Object.assign({},Ht,{title:Yt,"aria-label":Yt})),e.createElement(Fe,{annotation:N,hasPopup:!1,ignoreBorder:!1,isRenderable:qt,page:ut,viewport:ht},function(ge){return e.createElement("div",f({},ge.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":N.id,"data-testid":"core__annotation--link-".concat(N.id)}),e.createElement("a",f({ref:xt},Ht)))})},j=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut),V=p.rect,ht=V[2]-V[0],lt=V[3]-V[1],Ft=p.borderStyle.width;return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(Rt){return e.createElement("div",f({},Rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":p.id,onClick:Rt.popup.toggleOnClick,onMouseEnter:Rt.popup.openOnHover,onMouseLeave:Rt.popup.closeOnHover}),p.vertices&&p.vertices.length&&e.createElement("svg",{height:"".concat(lt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(lt),width:"".concat(ht,"px")},e.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Ft||1,points:p.vertices.map(function(xt){return"".concat(xt.x-V[0],",").concat(V[3]-xt.y)}).join(" ")})),Rt.slot.children)})},K=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut),V=p.rect,ht=V[2]-V[0],lt=V[3]-V[1],Ft=p.borderStyle.width;return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(Rt){return e.createElement("div",f({},Rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":p.id,onClick:Rt.popup.toggleOnClick,onMouseEnter:Rt.popup.openOnHover,onMouseLeave:Rt.popup.closeOnHover}),p.vertices&&p.vertices.length&&e.createElement("svg",{height:"".concat(lt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(lt),width:"".concat(ht,"px")},e.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Ft||1,points:p.vertices.map(function(xt){return"".concat(xt.x-V[0],",").concat(V[3]-xt.y)}).join(" ")})),Rt.slot.children)})},it=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut),V=p.rect,ht=V[2]-V[0],lt=V[3]-V[1],Ft=p.borderStyle.width;return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(Rt){return e.createElement("div",f({},Rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":p.id,onClick:Rt.popup.toggleOnClick,onMouseEnter:Rt.popup.openOnHover,onMouseLeave:Rt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(lt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(lt),width:"".concat(ht,"px")},e.createElement("rect",{height:lt-Ft,fill:"none",stroke:"transparent",strokeWidth:Ft||1,x:Ft/2,y:Ft/2,width:ht-Ft})),Rt.slot.children)})},gt=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut);return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Mt=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut);return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Xt=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut);return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Gt=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),e.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),e.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),e.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},be=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),e.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),e.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),e.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),e.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),e.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),e.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),e.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),e.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),e.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Kt=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),e.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Jt=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),e.createElement("path",{d:"M6 4.5L6 0.5"}),e.createElement("path",{d:"M18 4.5L18 0.5"}),e.createElement("path",{d:"M10 4.5L10 0.5"}),e.createElement("path",{d:"M14 4.5L14 0.5"}))},he=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),e.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),e.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},we=function(){return e.createElement(v,{size:16},e.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Ie=function(r){var p=r.annotation,N=r.childAnnotation,z=r.page,X=r.viewport,J=p.hasPopup===!1,ut=Y(p),rt=nt(p),V=!!(p.hasPopup||ut||rt),ht=p.name?p.name.toLowerCase():"";return e.createElement(Fe,{annotation:p,hasPopup:J,ignoreBorder:!1,isRenderable:V,page:z,viewport:X},function(lt){return e.createElement(e.Fragment,null,e.createElement("div",f({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":p.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),ht&&e.createElement("div",{className:"rpv-core__annotation-text-icon"},ht==="check"&&e.createElement(E,null),ht==="comment"&&e.createElement(Gt,null),ht==="help"&&e.createElement(be,null),ht==="insert"&&e.createElement(we,null),ht==="key"&&e.createElement(Kt,null),ht==="note"&&e.createElement(Jt,null),(ht==="newparagraph"||ht==="paragraph")&&e.createElement(he,null)),lt.slot.children),N&&N.annotationType===u.AnnotationType.Popup&&lt.popup.opened&&e.createElement(zt,{annotation:N,page:z,viewport:X}))})},Ue=function(r){var p=r.annotation,N=r.page,z=r.viewport,X=p.hasPopup===!1,J=Y(p),ut=nt(p),rt=!!(p.hasPopup||J||ut);return e.createElement(Fe,{annotation:p,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:N,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},hn=function(r){var p=r.annotations,N=r.doc,z=r.outlines,X=r.page,J=r.pageIndex,ut=r.plugins,rt=r.rotation,V=r.scale,ht=r.onExecuteNamedAction,lt=r.onJumpFromLinkAnnotation,Ft=r.onJumpToDest,Rt=e.useRef(),xt=X.getViewport({rotation:rt,scale:V}).clone({dontFlip:!0}),Yt=p.filter(function(qt){return!qt.parentId});return A(function(){var qt=Rt.current;qt&&ut.forEach(function(Ht){Ht.onAnnotationLayerRender&&Ht.onAnnotationLayerRender({annotations:Yt,container:qt,pageIndex:J,rotation:rt,scale:V})})},[]),e.createElement("div",{ref:Rt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(J)},Yt.map(function(qt){var Ht=p.find(function(De){return De.parentId===qt.id});switch(qt.annotationType){case u.AnnotationType.Caret:return e.createElement(We,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Circle:return e.createElement(st,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.FileAttachment:return e.createElement(Nt,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.FreeText:return e.createElement(ee,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Highlight:return e.createElement(ne,{key:qt.id,annotation:qt,childAnnotation:Ht,page:X,viewport:xt});case u.AnnotationType.Ink:return e.createElement(re,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Line:return e.createElement(Oe,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Link:return e.createElement(b,{key:qt.id,annotation:qt,annotationContainerRef:Rt,doc:N,outlines:z,page:X,pageIndex:J,scale:V,viewport:xt,onExecuteNamedAction:ht,onJumpFromLinkAnnotation:lt,onJumpToDest:Ft});case u.AnnotationType.Polygon:return e.createElement(j,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Polyline:return e.createElement(K,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Popup:return e.createElement(zt,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Square:return e.createElement(it,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Squiggly:return e.createElement(gt,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Stamp:return e.createElement(Mt,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.StrikeOut:return e.createElement(Xt,{key:qt.id,annotation:qt,page:X,viewport:xt});case u.AnnotationType.Text:return e.createElement(Ie,{key:qt.id,annotation:qt,childAnnotation:Ht,page:X,viewport:xt});case u.AnnotationType.Underline:return e.createElement(Ue,{key:qt.id,annotation:qt,page:X,viewport:xt});default:return e.createElement(e.Fragment,{key:qt.id})}}))},tn=function(r){var p=r.page,N=r.renderAnnotations,z=et(),X=e.useState({loading:!0,annotations:[]}),J=X[0],ut=X[1];return e.useEffect(function(){p.getAnnotations({intent:"display"}).then(function(rt){z.current&&ut({loading:!1,annotations:rt})})},[]),J.loading?e.createElement(e.Fragment,null):N(J.annotations)},_n=function(r){var p=r.doc,N=r.outlines,z=r.page,X=r.pageIndex,J=r.plugins,ut=r.rotation,rt=r.scale,V=r.onExecuteNamedAction,ht=r.onJumpFromLinkAnnotation,lt=r.onJumpToDest;return e.createElement(tn,{page:z,renderAnnotations:function(Ft){return e.createElement(hn,{annotations:Ft,doc:p,outlines:N,page:z,pageIndex:X,plugins:J,rotation:ut,scale:rt,onExecuteNamedAction:V,onJumpFromLinkAnnotation:ht,onJumpToDest:lt})}})},An=function(r,p){var N=r%p;return N===0?r:Math.floor(r-N)},Pn=function(r){var p=r.canvasLayerRef,N=r.height,z=r.page,X=r.pageIndex,J=r.plugins,ut=r.rotation,rt=r.scale,V=r.width,ht=r.onRenderCanvasCompleted,lt=e.useRef();return A(function(){var Ft=lt.current;Ft&&Ft.cancel();var Rt=p.current;Rt.removeAttribute("data-testid"),J.forEach(function(Ae){Ae.onCanvasLayerRender&&Ae.onCanvasLayerRender({ele:Rt,pageIndex:X,rotation:ut,scale:rt,status:u.LayerRenderStatus.PreRender})});var xt=z.getViewport({rotation:ut,scale:rt}),Yt=window.devicePixelRatio||1,qt=Math.sqrt(16777216/(xt.width*xt.height)),Ht=Yt>qt;Ht?Rt.style.transform="scale(1, 1)":Rt.style.removeProperty("transform");var De=Math.min(qt,Yt),ge=function(Ae,ze){var He,Ve;if(Math.floor(Ae)===Ae)return[Ae,1];var Ge=1/Ae;if(Ge>ze)return[1,ze];if(Math.floor(Ge)===Ge)return[1,Ge];for(var $e=Ae>1?Ge:Ae,dn=0,rn=1,un=1,an=1;;){var ln=dn+un,cn=rn+an;if(cn>ze)break;$e<=ln/cn?(un=(He=[ln,cn])[0],an=He[1]):(dn=(Ve=[ln,cn])[0],rn=Ve[1])}return $e<(dn/rn+un/an)/2?$e===Ae?[dn,rn]:[rn,dn]:$e===Ae?[un,an]:[an,un]}(De,8),ve=ge[0],Ee=ge[1];Rt.width=An(xt.width*De,ve),Rt.height=An(xt.height*De,ve),Rt.style.width="".concat(An(xt.width,Ee),"px"),Rt.style.height="".concat(An(xt.height,Ee),"px"),Rt.hidden=!0;var ae=Rt.getContext("2d",{alpha:!1}),Pe=Ht||Yt!==1?[De,0,0,De,0,0]:null;return lt.current=z.render({canvasContext:ae,transform:Pe,viewport:xt}),lt.current.promise.then(function(){Rt.hidden=!1,Rt.setAttribute("data-testid","core__canvas-layer-".concat(X)),J.forEach(function(Ae){Ae.onCanvasLayerRender&&Ae.onCanvasLayerRender({ele:Rt,pageIndex:X,rotation:ut,scale:rt,status:u.LayerRenderStatus.DidRender})}),ht()},function(){ht()}),function(){Rt&&(Rt.width=0,Rt.height=0)}},[]),e.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(N,"px"),width:"".concat(V,"px")}},e.createElement("canvas",{ref:p}))},ni=function(r){var p=r.height,N=r.page,z=r.rotation,X=r.scale,J=r.width,ut=e.useRef();return A(function(){var rt=ut.current,V=N.getViewport({rotation:z,scale:X});N.getOperatorList().then(function(ht){(function(){var lt=ut.current;lt&&(lt.innerHTML="")})(),new Q.SVGGraphics(N.commonObjs,N.objs).getSVG(ht,V).then(function(lt){lt.style.height="".concat(p,"px"),lt.style.width="".concat(J,"px"),rt.appendChild(lt)})})},[]),e.createElement("div",{className:"rpv-core__svg-layer",ref:ut})},ps=function(r){var p=r.containerRef,N=r.page,z=r.pageIndex,X=r.plugins,J=r.rotation,ut=r.scale,rt=r.onRenderTextCompleted,V=e.useRef(),ht=function(){var lt=p.current;lt&&([].slice.call(lt.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Ft){return lt.removeChild(Ft)}),[].slice.call(lt.querySelectorAll('br[role="presentation"]')).forEach(function(Ft){return lt.removeChild(Ft)}))};return A(function(){var lt=V.current;lt&&lt.cancel();var Ft=p.current;if(Ft){Ft.removeAttribute("data-testid");var Rt=N.getViewport({rotation:J,scale:ut});return X.forEach(function(xt){xt.onTextLayerRender&&xt.onTextLayerRender({ele:Ft,pageIndex:z,scale:ut,status:u.LayerRenderStatus.PreRender})}),N.getTextContent().then(function(xt){ht(),V.current=Q.renderTextLayer({container:Ft,textContent:xt,textContentSource:xt,viewport:Rt}),V.current.promise.then(function(){Ft.setAttribute("data-testid","core__text-layer-".concat(z)),[].slice.call(Ft.children).forEach(function(Yt){Yt.classList.contains("rpv-core__text-layer-text--not")||Yt.classList.add("rpv-core__text-layer-text")}),X.forEach(function(Yt){Yt.onTextLayerRender&&Yt.onTextLayerRender({ele:Ft,pageIndex:z,scale:ut,status:u.LayerRenderStatus.DidRender})}),rt()},function(){Ft.removeAttribute("data-testid"),rt()})}),function(){var xt;ht(),(xt=V.current)===null||xt===void 0||xt.cancel()}}},[]),e.createElement("div",{className:"rpv-core__text-layer",ref:p})},gs=function(r){var p=r.doc,N=r.measureRef,z=r.outlines,X=r.pageIndex,J=r.pageRotation,ut=r.pageSize,rt=r.plugins,V=r.renderPage,ht=r.renderQueueKey,lt=r.rotation,Ft=r.scale,Rt=r.shouldRender,xt=r.viewMode,Yt=r.onExecuteNamedAction,qt=r.onJumpFromLinkAnnotation,Ht=r.onJumpToDest,De=r.onRenderCompleted,ge=r.onRotatePage,ve=et(),Ee=e.useState(null),ae=Ee[0],Pe=Ee[1],Ae=e.useState(!1),ze=Ae[0],He=Ae[1],Ve=e.useState(!1),Ge=Ve[0],$e=Ve[1],dn=e.useRef(),rn=e.useRef(),un=Math.abs(lt+J)%180==0,an=ut.pageWidth*Ft,ln=ut.pageHeight*Ft,cn=un?an:ln,on=un?ln:an,bn=(ut.rotation+lt+J)%360,Tn=e.useRef(0),Cn=V||function(gn){return e.createElement(e.Fragment,null,gn.canvasLayer.children,gn.textLayer.children,gn.annotationLayer.children)};return e.useEffect(function(){Pe(null),He(!1),$e(!1)},[J,lt,Ft]),e.useEffect(function(){Rt&&ve.current&&!ae&&me(p,X).then(function(gn){ve.current&&(Tn.current=ht,Pe(gn))})},[Rt,ae]),e.useEffect(function(){ze&&Ge&&(ht!==Tn.current?(Pe(null),He(!1),$e(!1)):De(X))},[ze,Ge]),e.createElement("div",{className:T({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":xt===u.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":xt===u.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":xt===u.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(X),ref:N,style:{height:"".concat(on,"px"),width:"".concat(cn,"px")}},ae?e.createElement(e.Fragment,null,Cn({annotationLayer:{attrs:{},children:e.createElement(_n,{doc:p,outlines:z,page:ae,pageIndex:X,plugins:rt,rotation:bn,scale:Ft,onExecuteNamedAction:Yt,onJumpFromLinkAnnotation:qt,onJumpToDest:Ht})},canvasLayer:{attrs:{},children:e.createElement(Pn,{canvasLayerRef:dn,height:on,page:ae,pageIndex:X,plugins:rt,rotation:bn,scale:Ft,width:cn,onRenderCanvasCompleted:function(){ve.current&&He(!0)}})},canvasLayerRendered:ze,doc:p,height:on,pageIndex:X,rotation:bn,scale:Ft,svgLayer:{attrs:{},children:e.createElement(ni,{height:on,page:ae,rotation:bn,scale:Ft,width:cn})},textLayer:{attrs:{},children:e.createElement(ps,{containerRef:rn,page:ae,pageIndex:X,plugins:rt,rotation:bn,scale:Ft,onRenderTextCompleted:function(){ve.current&&$e(!0)}})},textLayerRendered:Ge,width:cn,markRendered:De,onRotatePage:function(gn){return ge(X,gn)}}),rt.map(function(gn,yn){return gn.renderPageLayer?e.createElement(e.Fragment,{key:yn},gn.renderPageLayer({canvasLayerRef:dn,canvasLayerRendered:ze,doc:p,height:on,pageIndex:X,rotation:bn,scale:Ft,textLayerRef:rn,textLayerRendered:Ge,width:cn})):e.createElement(e.Fragment,{key:yn})})):e.createElement(M,{testId:"core__page-layer-loading-".concat(X)}))},ms=function(r,p){var N=p.rect;return r.height!==N.height||r.width!==N.width?N:r};(function(r){r.Horizontal="Horizontal",r.Vertical="Vertical",r.Both="Both"})(Et||(Et={}));var vs=function(r){return 1-Math.pow(1-r,4)},ii=1e-4,mr={left:0,top:0},vr={capture:!1,passive:!0},bs=function(r){var p=r.elementRef,N=r.enableSmoothScroll,z=r.isRtl,X=r.scrollDirection,J=r.onSmoothScroll,ut=e.useState(mr),rt=ut[0],V=ut[1],ht=e.useState(p.current),lt=ht[0],Ft=ht[1],Rt=z?-1:1,xt=e.useRef(X);xt.current=X;var Yt=e.useRef(mr),qt=e.useRef(!0),Ht=e.useCallback(function(){qt.current=!0,N&&V(Yt.current),J(!1)},[]),De=e.useCallback(function(){if(lt){switch(xt.current){case Et.Horizontal:Yt.current={left:Rt*lt.scrollLeft,top:0};break;case Et.Both:Yt.current={left:Rt*lt.scrollLeft,top:lt.scrollTop};break;case Et.Vertical:default:Yt.current={left:0,top:lt.scrollTop}}N&&!qt.current||V(Yt.current)}},[lt]);A(function(){Ft(p.current)}),A(function(){if(lt)return lt.addEventListener("scroll",De,vr),function(){lt.removeEventListener("scroll",De,vr)}},[lt]);var ge=e.useCallback(function(ve,Ee){var ae=p.current;if(!ae)return Promise.resolve();var Pe={left:0,top:0};switch(xt.current){case Et.Horizontal:Pe.left=Rt*ve.left;break;case Et.Both:Pe.left=Rt*ve.left,Pe.top=ve.top;break;case Et.Vertical:default:Pe.top=ve.top}return Ee?(qt.current=!1,J(!0),new Promise(function(Ae,ze){(function(He,Ve,Ge,$e,dn,rn){dn===void 0&&(dn=function(yn){return yn}),rn===void 0&&(rn=function(){});var un=0,an=0,ln=!1;switch(Ve){case Et.Horizontal:an=He.scrollLeft,un=0;case Et.Both:an=He.scrollLeft,un=He.scrollTop;break;case Et.Vertical:default:an=0,un=He.scrollTop}var cn=function(){ln||(ln=!0,He.scrollLeft=Ge.left,He.scrollTop=Ge.top,rn())};if(Math.abs(un-Ge.top)<=ii&&Ve===Et.Vertical)cn();else if(Math.abs(an-Ge.left)<=ii&&Ve===Et.Horizontal)cn();else{var on,bn=-1,Tn=an-Ge.left,Cn=un-Ge.top,gn=function(yn){bn===-1&&(bn=yn);var xn=yn-bn,Se=Math.min(xn/$e,1),_e=dn(Se),oe={left:an-Tn*_e,top:un-Cn*_e};switch(Ve){case Et.Horizontal:He.scrollLeft=oe.left;break;case Et.Both:He.scrollLeft=oe.left,He.scrollTop=oe.top;break;case Et.Vertical:default:He.scrollTop=oe.top}Math.abs(oe.top-Ge.top)<=ii&&Math.abs(oe.left-Ge.left)<=ii&&!ln&&(window.cancelAnimationFrame(on),cn()),xn<$e?on=window.requestAnimationFrame(gn):window.cancelAnimationFrame(on)};on=window.requestAnimationFrame(gn)}})(ae,xt.current,Pe,400,vs,function(){Ht(),Ae()})})):new Promise(function(Ae,ze){switch(xt.current){case Et.Horizontal:ae.scrollLeft=Pe.left;break;case Et.Both:ae.scrollLeft=Pe.left,ae.scrollTop=Pe.top;break;case Et.Vertical:default:ae.scrollTop=Pe.top}Ae()})},[p]);return{scrollOffset:rt,scrollTo:ge}},qn=function(r,p,N){return Math.max(r,Math.min(N,p))},_s=function(r,p){if(p!==u.ViewMode.DualPageWithCover)return 0;if(!function(X){var J=X.length;if(J===1)return!1;for(var ut=1;ut<J;ut++)if(X[ut].height!==X[0].height||X[ut].width!==X[0].width)return!0;return!1}(r))return 2*r[0].width;var N=wt(r.slice(1),2).map(function(X){return X.length===2?X[0].width+X[1].width:X[0].width}),z=[r[0].width].concat(N);return Math.max.apply(Math,z)},ys={left:0,top:0},As={left:0,top:0},Ei={left:0,top:0},Ss={left:0,top:0},Es={height:0,width:0},br={left:0,top:0},_r="data-virtual-index",ws=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Cs=function(r){var p=r.enableSmoothScroll,N=r.isRtl,z=r.numberOfItems,X=r.parentRef,J=r.setRenderRange,ut=r.sizes,rt=r.scrollMode,V=r.viewMode,ht=e.useState(!1),lt=ht[0],Ft=ht[1],Rt=e.useCallback(function(Se){return Ft(Se)},[]),xt=e.useRef(rt);xt.current=rt;var Yt=e.useRef(V);Yt.current=V;var qt=rt===u.ScrollMode.Wrapped||V===u.ViewMode.DualPageWithCover||V===u.ViewMode.DualPage?Et.Both:rt===u.ScrollMode.Horizontal?Et.Horizontal:Et.Vertical,Ht=bs({elementRef:X,enableSmoothScroll:p,isRtl:N,scrollDirection:qt,onSmoothScroll:Rt}),De=Ht.scrollOffset,ge=Ht.scrollTo,ve=function(Se){var _e=Se.elementRef,oe=e.useState(_e.current),ue=oe[0],le=oe[1],Te=e.useRef(!1),xe=e.useReducer(ms,{height:0,width:0}),fe=xe[0],ie=xe[1];return A(function(){_e.current!==ue&&le(_e.current)}),A(function(){if(ue&&!Te.current){Te.current=!0;var Re=ue.getBoundingClientRect(),Ne=Re.height,en=Re.width;ie({rect:{height:Ne,width:en}})}},[ue]),e.useEffect(function(){if(ue){var Re=new ResizeObserver(function(Ne,en){Ne.forEach(function(Je){if(Je.target===ue){var mn=Je.contentRect,Sn=mn.height,Le=mn.width;ie({rect:{height:Sn,width:Le}})}})});return Re.observe(ue),function(){Re.unobserve(ue)}}},[ue]),fe}({elementRef:X}),Ee=e.useRef({scrollOffset:br,measurements:[]});Ee.current.scrollOffset=De;var ae=e.useMemo(function(){return Array(z).fill(-1)},[]),Pe=e.useState(ae),Ae=Pe[0],ze=Pe[1],He=e.useMemo(function(){var Se=new IntersectionObserver(function(_e){_e.forEach(function(oe){var ue=oe.isIntersecting?oe.intersectionRatio:-1,le=oe.target.getAttribute(_r);if(le){var Te=parseInt(le,10);0<=Te&&Te<z&&ze(function(xe){return xe[Te]=ue,function(fe,ie,Re){if(Re||arguments.length===2)for(var Ne,en=0,Je=ie.length;en<Je;en++)!Ne&&en in ie||(Ne||(Ne=Array.prototype.slice.call(ie,0,en)),Ne[en]=ie[en]);return fe.concat(Ne||Array.prototype.slice.call(ie))}([],xe,!0)})}})},{threshold:ws});return Se},[]),Ve=e.useMemo(function(){return rt===u.ScrollMode.Page&&V===u.ViewMode.SinglePage?function(Se,_e,oe){for(var ue=[],le=0;le<Se;le++){var Te={height:Math.max(_e.height,oe[le].height),width:Math.max(_e.width,oe[le].width)},xe=le===0?Ss:ue[le-1].end,fe={left:xe.left+Te.width,top:xe.top+Te.height};ue[le]={index:le,start:xe,size:Te,end:fe,visibility:-1}}return ue}(z,ve,ut):V===u.ViewMode.DualPageWithCover?function(Se,_e,oe,ue){for(var le=[],Te=0,xe=0,fe=Ei,ie=0;ie<Se;ie++){var Re=ie===0?{height:ue===u.ScrollMode.Page?Math.max(_e.height,oe[ie].height):oe[ie].height,width:ue===u.ScrollMode.Page?Math.max(_e.width,oe[ie].width):oe[ie].width}:{height:ue===u.ScrollMode.Page?Math.max(_e.height,oe[ie].height):oe[ie].height,width:Math.max(_e.width/2,oe[ie].width)};ue===u.ScrollMode.Page?fe=ie===0?Ei:{left:ie%2==0?Re.width:0,top:Math.floor((ie-1)/2)*Re.height+le[0].end.top}:ie===0?(fe=Ei,Te=oe[0].height,xe=0):ie%2==1?(fe={left:0,top:Te+=xe},xe=ie===Se-1?oe[ie].height:Math.max(oe[ie].height,oe[ie+1].height)):fe={left:le[ie-1].end.left,top:Te};var Ne={left:fe.left+Re.width,top:fe.top+Re.height};le[ie]={index:ie,start:fe,size:Re,end:Ne,visibility:-1}}return le}(z,ve,ut,rt):V===u.ViewMode.DualPage?function(Se,_e,oe,ue){for(var le=[],Te=0,xe=0,fe=As,ie=0;ie<Se;ie++){var Re={height:ue===u.ScrollMode.Page?Math.max(_e.height,oe[ie].height):oe[ie].height,width:Math.max(_e.width/2,oe[ie].width)};ue===u.ScrollMode.Page?fe={left:ie%2==0?0:Re.width,top:Math.floor(ie/2)*Re.height}:ie%2==0?(fe={left:0,top:Te+=xe},xe=ie===Se-1?oe[ie].height:Math.max(oe[ie].height,oe[ie+1].height)):fe={left:le[ie-1].end.left,top:Te};var Ne={left:fe.left+Re.width,top:fe.top+Re.height};le[ie]={index:ie,start:fe,size:Re,end:Ne,visibility:-1}}return le}(z,ve,ut,rt):function(Se,_e,oe,ue){for(var le=[],Te=0,xe={left:0,top:0},fe=0,ie=ys,Re=0;Re<Se;Re++){var Ne=oe[Re];if(Re===0)Te=Ne.width,xe={left:0,top:0},fe=Ne.height;else switch(ue){case u.ScrollMode.Wrapped:(Te+=Ne.width)<_e.width?(ie={left:le[Re-1].end.left,top:xe.top},fe=Math.max(fe,Ne.height)):(Te=Ne.width,xe={left:(ie={left:xe.left,top:xe.top+fe}).left,top:ie.top},fe=Ne.height);break;case u.ScrollMode.Horizontal:case u.ScrollMode.Vertical:default:ie=le[Re-1].end}var en={left:ie.left+Ne.width,top:ie.top+Ne.height};le[Re]={index:Re,start:ie,size:Ne,end:en,visibility:-1}}return le}(z,ve,ut,rt)},[rt,ut,V,ve]),Ge=Ve[z-1]?{height:Ve[z-1].end.top,width:Ve[z-1].end.left}:Es;Ee.current.measurements=Ve;var $e=e.useMemo(function(){var Se=function(Re,Ne,en,Je){var mn=0;switch(Re){case Et.Horizontal:mn=Je.left;break;case Et.Vertical:default:mn=Je.top}var Sn=Ne.length-1,Le=function(Ke,Rn,jn,si){for(;Ke<=Rn;){var In=(Ke+Rn)/2|0,Xn=si(In);if(Xn<jn)Ke=In+1;else{if(!(Xn>jn))return In;Rn=In-1}}return Ke>0?Ke-1:0}(0,Sn,mn,function(Ke){switch(Re){case Et.Horizontal:return Ne[Ke].start.left;case Et.Both:case Et.Vertical:default:return Ne[Ke].start.top}});if(Re===Et.Both)for(var vn=Ne[Le].start.top;Le-1>=0&&Ne[Le-1].start.top===vn&&Ne[Le-1].start.left>=Je.left;)Le--;for(var nn=Le;nn<=Sn;){var sn={top:Ne[nn].start.top-Je.top,left:Ne[nn].start.left-Je.left},fn={height:en.height-sn.top,width:en.width-sn.left};if(Re===Et.Horizontal&&fn.width<0||Re===Et.Vertical&&fn.height<0||Re===Et.Both&&(fn.width<0||fn.height<0))break;nn++}return{start:Le,end:nn}}(qt,Ve,ve,De),_e=Se.start,oe=Se.end,ue=Ae.slice(qn(0,z,_e),qn(0,z,oe)),le=_e+ue.reduce(function(Re,Ne,en,Je){return Ne>Je[Re]?en:Re},0),Te=le=qn(0,z-1,le),xe=J({endPage:oe,numPages:z,startPage:_e}),fe=xe.startPage,ie=xe.endPage;switch(fe=Math.max(fe,0),ie=Math.min(ie,z-1),V){case u.ViewMode.DualPageWithCover:le>0&&(Te=le%2==1?le:le-1),fe=fe===0?0:fe%2==1?fe:fe-1,z-(ie=ie%2==1?ie-1:ie)<=2&&(ie=z-1);break;case u.ViewMode.DualPage:Te=le%2==0?le:le-1,fe=fe%2==0?fe:fe-1,ie=ie%2==1?ie:ie-1;break;case u.ViewMode.SinglePage:default:Te=le}return{startPage:fe,endPage:ie,maxVisbilityIndex:Te}},[Ve,ve,De,V,Ae]),dn=$e.startPage,rn=$e.endPage,un=$e.maxVisbilityIndex,an=e.useMemo(function(){for(var Se=[],_e=function(ue){var le=Ve[ue],Te=f(f({},le),{visibility:Ae[ue]!==void 0?Ae[ue]:-1,measureRef:function(xe){xe&&(xe.setAttribute(_r,"".concat(ue)),He.observe(xe))}});Se.push(Te)},oe=dn;oe<=rn;oe++)_e(oe);return Se},[dn,rn,Ae,Ve]),ln=e.useCallback(function(Se,_e){var oe=Ee.current.measurements[qn(0,z-1,Se)],ue=xt.current===u.ScrollMode.Page?br:_e;return oe?ge({left:ue.left+oe.start.left,top:ue.top+oe.start.top},p):Promise.resolve()},[ge,p]),cn=e.useCallback(function(Se,_e){var oe=Ee.current.measurements,ue=oe[Se].start,le=oe.find(function(xe){return xe.start.top-ue.top>1e-12});if(!le)return Promise.resolve();var Te=le.index;switch(Yt.current){case u.ViewMode.DualPage:Te=Te%2==0?Te:Te+1;break;case u.ViewMode.DualPageWithCover:Te=Te%2==1?Te:Te+1}return ln(Te,_e)},[]),on=e.useCallback(function(Se,_e){for(var oe=Ee.current.measurements,ue=oe[Se].start,le=Se,Te=!1,xe=z-1;xe>=0;xe--)if(ue.top-oe[xe].start.top>1e-12){Te=!0,le=oe[xe].index;break}if(!Te)return Promise.resolve();switch(Yt.current){case u.ViewMode.DualPage:le=le%2==0?le:le-1;break;case u.ViewMode.DualPageWithCover:le=le%2==0?le-1:le}return le===Se&&(le=Se-1),ln(le,_e)},[]),bn=e.useCallback(function(Se,_e){if(Yt.current===u.ViewMode.DualPageWithCover||Yt.current===u.ViewMode.DualPage)return cn(Se,_e);switch(xt.current){case u.ScrollMode.Wrapped:return cn(Se,_e);case u.ScrollMode.Horizontal:case u.ScrollMode.Vertical:default:return ln(Se+1,_e)}},[]),Tn=e.useCallback(function(Se,_e){if(Yt.current===u.ViewMode.DualPageWithCover||Yt.current===u.ViewMode.DualPage)return on(Se,_e);switch(xt.current){case u.ScrollMode.Wrapped:return on(Se,_e);case u.ScrollMode.Horizontal:case u.ScrollMode.Vertical:default:return ln(Se-1,_e)}},[]),Cn=e.useCallback(function(){return function(Se,_e){switch(_e){case u.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Se.width,"px")};case u.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Se.height,"px"),width:"100%"}}}(Ge,xt.current)},[Ge]),gn=e.useCallback(function(Se){return function(_e,oe,ue){return ue!==u.ScrollMode.Page?{}:{height:"".concat(oe.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(_e.start.top,"px)")}}(Se,ve,xt.current)},[ve]),yn=e.useCallback(function(Se){return function(_e,oe,ue,le,Te){var xe,fe,ie,Re,Ne,en,Je,mn=oe?"right":"left",Sn=oe?-1:1,Le=ue.length,vn=_e.start.left*Sn,nn=_e.size,sn=nn.height,fn=nn.width;if(le===u.ViewMode.DualPageWithCover){var Ke=Te===u.ScrollMode.Page?0:_e.start.top;return _e.index===0||Le%2==0&&_e.index===Le-1?((xe={height:"".concat(sn,"px"),minWidth:"".concat(_s(ue,le),"px"),width:"100%"})[mn]=0,xe.position="absolute",xe.top=0,xe.transform="translate(".concat(vn,"px, ").concat(Ke,"px)"),xe):((fe={height:"".concat(sn,"px"),width:"".concat(fn,"px")})[mn]=0,fe.position="absolute",fe.top=0,fe.transform="translate(".concat(vn,"px, ").concat(Ke,"px)"),fe)}if(le===u.ViewMode.DualPage)return(ie={height:"".concat(sn,"px"),width:"".concat(fn,"px")})[mn]=0,ie.position="absolute",ie.top=0,ie.transform="translate(".concat(vn,"px, ").concat(Te===u.ScrollMode.Page?0:_e.start.top,"px)"),ie;switch(Te){case u.ScrollMode.Horizontal:return(Re={height:"100%",width:"".concat(fn,"px")})[mn]=0,Re.position="absolute",Re.top=0,Re.transform="translateX(".concat(vn,"px)"),Re;case u.ScrollMode.Page:return(Ne={height:"".concat(sn,"px"),width:"".concat(fn,"px")})[mn]=0,Ne.position="absolute",Ne.top=0,Ne;case u.ScrollMode.Wrapped:return(en={height:"".concat(sn,"px"),width:"".concat(fn,"px")})[mn]=0,en.position="absolute",en.top=0,en.transform="translate(".concat(vn,"px, ").concat(_e.start.top,"px)"),en;case u.ScrollMode.Vertical:default:return(Je={height:"".concat(sn,"px"),width:"100%"})[mn]=0,Je.position="absolute",Je.top=0,Je.transform="translateY(".concat(_e.start.top,"px)"),Je}}(Se,N,ut,Yt.current,xt.current)},[N,ut]),xn=e.useCallback(function(Se,_e){var oe=Ee.current,ue=oe.measurements,le=oe.scrollOffset,Te=ue[qn(0,z-1,_e)];if(Te){var xe=xt.current===u.ScrollMode.Page?{left:Te.start.left,top:Te.start.top}:{left:le.left*Se,top:le.top*Se};return ge(xe,!1)}return Promise.resolve()},[]);return e.useEffect(function(){return function(){He.disconnect()}},[]),{boundingClientRect:ve,isSmoothScrolling:lt,startPage:dn,endPage:rn,maxVisbilityIndex:un,virtualItems:an,getContainerStyles:Cn,getItemContainerStyles:gn,getItemStyles:yn,scrollToItem:ln,scrollToNextItem:bn,scrollToPreviousItem:Tn,zoom:xn}},wi=function(r,p,N,z,X,J){var ut=N;switch(!0){case(X===u.ViewMode.DualPageWithCover&&J>=3):case(X===u.ViewMode.DualPage&&J>=3):ut=2*N;break;default:ut=N}switch(z){case u.SpecialZoomLevel.ActualSize:return 1;case u.SpecialZoomLevel.PageFit:return Math.min((r.clientWidth-17)/ut,(r.clientHeight-16)/p);case u.SpecialZoomLevel.PageWidth:return(r.clientWidth-17)/ut}},Ps=function(r){var p,N,z=r.getCurrentPage,X=(p=50,N=e.useRef([]),e.useEffect(function(){return function(){N.current=[]}},[]),{push:function(ht){var lt=N.current;lt.length+1>p&&lt.shift(),lt.push(ht),N.current=lt},map:function(ht){return N.current.map(function(lt){return ht(lt)})},pop:function(){var ht=N.current;if(ht.length===0)return null;var lt=ht.pop();return N.current=ht,lt}}),J=function(ht){var lt=e.useRef([]);return e.useEffect(function(){return function(){lt.current=[]}},[]),{dequeue:function(){var Ft=lt.current;if(Ft.length===0)return null;var Rt=Ft.shift();return lt.current=Ft,Rt||null},enqueue:function(Ft){var Rt=lt.current;Rt.length+1>ht&&Rt.pop(),lt.current=[Ft].concat(Rt)},map:function(Ft){return lt.current.map(function(Rt){return Ft(Rt)})}}}(50),ut=function(){var ht=J.dequeue();return ht&&X.push(ht),ht&&ht.pageIndex===z()?ut():ht},rt=function(){var ht=X.pop();return ht&&J.enqueue(ht),ht&&ht.pageIndex===z()?rt():ht},V=e.useCallback(function(ht){X.push(ht)},[]);return{getNextDestination:ut,getPreviousDestination:rt,markVisitedDestination:V}},yr=function(r){var p=[];return r.map(function(N){p=p.concat(N).concat(function(z){var X=[];return z.items&&z.items.length>0&&(X=X.concat(yr(z.items))),X}(N))}),p},Ar={capture:!1,passive:!0},Ts={height:0,width:0},Ci={height:0,width:0},xs=function(r){var p=r.getCurrentPage,N=r.getCurrentScrollMode,z=r.jumpToPage,X=r.targetRef,J=e.useState(u.FullScreenMode.Normal),ut=J[0],rt=J[1],V=function(){var Ae=e.useState(Ts),ze=Ae[0],He=Ae[1],Ve=k(function(){He({height:window.innerHeight,width:window.innerWidth})},100);return A(function(){return window.addEventListener("resize",Ve,Ar),function(){window.removeEventListener("resize",Ve,Ar)}},[]),ze}(),ht=e.useState(Ci),lt=ht[0],Ft=ht[1],Rt=e.useRef(Ci),xt=e.useRef(p()),Yt=e.useRef(Ci),qt=e.useState(X.current),Ht=qt[0],De=qt[1],ge=e.useRef();A(function(){X.current!==Ht&&De(X.current)},[]),A(function(){if(Ht){var Ae=new ResizeObserver(function(ze){ze.forEach(function(He){var Ve=He.target.getBoundingClientRect(),Ge=Ve.height,$e=Ve.width;Ft({height:Ge,width:$e})})});return Ae.observe(Ht),function(){Ae.unobserve(Ht),Ae.disconnect()}}},[Ht]);var ve=e.useCallback(function(Ae){var ze=Z();return ze&&ze!==Ae?(rt(u.FullScreenMode.Normal),q(ze)):Promise.resolve()},[]),Ee=e.useCallback(function(Ae){Ae&&S()&&(De(Ae),ve(Ae).then(function(){ge.current=Ae,rt(u.FullScreenMode.Entering),function(ze){l&&ze[L.RequestFullScreen]()}(Ae)}))},[]),ae=e.useCallback(function(){Z()&&(rt(u.FullScreenMode.Exitting),q(document))},[]),Pe=e.useCallback(function(){Ht&&Z()!==Ht&&rt(u.FullScreenMode.Exitting)},[Ht]);return e.useEffect(function(){switch(ut){case u.FullScreenMode.Entering:ge.current&&(ge.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),xt.current=p(),Rt.current={height:window.innerHeight,width:window.innerWidth};break;case u.FullScreenMode.Entered:N()===u.ScrollMode.Page?z(xt.current).then(function(){rt(u.FullScreenMode.EnteredCompletely)}):rt(u.FullScreenMode.EnteredCompletely);break;case u.FullScreenMode.Exitting:ge.current&&(ge.current.style.backgroundColor="",ge.current=null),xt.current=p();break;case u.FullScreenMode.Exited:rt(u.FullScreenMode.Normal),N()===u.ScrollMode.Page&&z(xt.current)}},[ut]),e.useEffect(function(){if(ut!==u.FullScreenMode.Normal)return ut===u.FullScreenMode.Entering&&V.height===lt.height&&V.width===lt.width&&V.height>0&&V.width>0&&(Yt.current.height===0||V.height==Yt.current.height)?(Yt.current={height:window.innerHeight,width:window.innerWidth},void rt(u.FullScreenMode.Entered)):void(ut===u.FullScreenMode.Exitting&&Rt.current.height===V.height&&Rt.current.width===V.width&&V.height>0&&V.width>0&&rt(u.FullScreenMode.Exited))},[ut,V,lt]),e.useEffect(function(){var Ae;return Ae=Pe,l&&document.addEventListener(L.FullScreenChange,Ae),function(){(function(ze){l&&document.removeEventListener(L.FullScreenChange,ze)})(Pe)}},[Ht]),{enterFullScreenMode:Ee,exitFullScreenMode:ae,fullScreenMode:ut}},ks={buildPageStyles:function(){return{}},transformSize:function(r){return r.size}},Bn={left:0,top:0},Rs=function(r){var p=r.currentFile,N=r.defaultScale,z=r.doc,X=r.enableSmoothScroll,J=r.initialPage,ut=r.initialRotation,rt=r.initialScale,V=r.pageLayout,ht=r.pageSizes,lt=r.plugins,Ft=r.renderPage,Rt=r.scrollMode,xt=r.setRenderRange,Yt=r.viewMode,qt=r.viewerState,Ht=r.onDocumentLoad,De=r.onOpenFile,ge=r.onPageChange,ve=r.onRotate,Ee=r.onRotatePage,ae=r.onZoom,Pe=z.numPages,Ae=z.loadingTask.docId,ze=e.useContext(Bt).l10n,He=e.useContext(U),Ve=He.direction===u.TextDirection.RightToLeft,Ge=e.useRef(),$e=e.useRef(),dn=e.useState(J),rn=dn[0],un=dn[1],an=e.useRef(null),ln=Ps({getCurrentPage:function(){return Le.current.pageIndex}}),cn=e.useState(ut),on=cn[0],bn=cn[1],Tn=pt(on),Cn=e.useState(!1),gn=Cn[0],yn=Cn[1],xn=e.useState(new Map),Se=xn[0],_e=xn[1],oe=e.useState(Rt),ue=oe[0],le=oe[1],Te=pt(ue),xe=e.useState(Yt),fe=xe[0],ie=xe[1],Re=pt(fe),Ne=function(jt){var Me=et(),Be=e.useState([]),Ye=Be[0],Xe=Be[1];return e.useEffect(function(){jt.getOutline().then(function(je){if(Me.current&&je!==null){var pn=yr(je);Xe(pn)}})},[]),Ye}(z),en=e.useState(rt),Je=en[0],mn=en[1],Sn=pt(Je),Le=e.useRef(qt),vn=e.useRef(typeof N=="string"?N:null),nn=e.useRef(-1),sn=e.useRef(-1),fn=e.useRef(J),Ke=xs({getCurrentPage:function(){return Le.current.pageIndex},getCurrentScrollMode:function(){return Le.current.scrollMode},jumpToPage:function(jt){return Fn(jt)},targetRef:$e}),Rn=e.useState(-1),jn=Rn[0],si=Rn[1],In=e.useState(0),Xn=In[0],Os=In[1],En=At({doc:z});e.useEffect(function(){return function(){Ut.clear(),ce.clear()}},[Ae]);var Cr=e.useMemo(function(){return Object.assign({},ks,V)},[]),Ns=e.useMemo(function(){return Array(Pe).fill(0).map(function(jt,Me){var Be=[ht[Me].pageHeight,ht[Me].pageWidth],Ye=Math.abs(on)%180==0?{height:Be[0],width:Be[1]}:{height:Be[1],width:Be[0]},Xe={height:Ye.height*Je,width:Ye.width*Je};return Cr.transformSize({numPages:Pe,pageIndex:Me,size:Xe})})},[on,Je]),Ze=Cs({enableSmoothScroll:X,isRtl:Ve,numberOfItems:Pe,parentRef:$e,scrollMode:ue,setRenderRange:xt,sizes:Ns,viewMode:fe}),Bs=k(function(){!vn.current||Le.current.fullScreenMode!==u.FullScreenMode.Normal||J>0&&fn.current===J||On(vn.current)},200);(function(jt){var Me=jt.targetRef,Be=jt.onResize;A(function(){var Ye=new ResizeObserver(function(je){je.forEach(function(pn){Be(pn.target)})}),Xe=Me.current;if(Xe)return Ye.observe(Xe),function(){Ye.unobserve(Xe)}},[])})({targetRef:$e,onResize:Bs});var Mn=function(jt){var Me=jt;lt.forEach(function(Be){Be.onViewerStateChange&&(Me=Be.onViewerStateChange(Me))}),Le.current=Me},js=function(){return $e.current},Us=function(){return Le.current},Hs=e.useCallback(function(jt){ln.markVisitedDestination(jt)},[]),xi=e.useCallback(function(jt){var Me=jt.pageIndex,Be=jt.bottomOffset,Ye=jt.leftOffset,Xe=jt.scaleTo,je=$e.current,pn=Le.current;return je&&pn?new Promise(function(Ln,Di){me(z,Me).then(function(ai){var Dn=ai.getViewport({scale:1}),oi=0,Lr=(typeof Be=="function"?Be(Dn.width,Dn.height):Be)||0,li=(typeof Ye=="function"?Ye(Dn.width,Dn.height):Ye)||0,Un=pn.scale;switch(Xe){case u.SpecialZoomLevel.PageFit:oi=0,li=0,On(u.SpecialZoomLevel.PageFit);break;case u.SpecialZoomLevel.PageWidth:Un=wi(je,ht[Me].pageHeight,ht[Me].pageWidth,u.SpecialZoomLevel.PageWidth,Yt,Pe),oi=(Dn.height-Lr)*Un,li*=Un,On(Un);break;default:oi=(Dn.height-Lr)*Un,li*=Un}switch(pn.scrollMode){case u.ScrollMode.Horizontal:Ze.scrollToItem(Me,{left:li,top:0}).then(function(){Ln()});break;case u.ScrollMode.Vertical:default:Ze.scrollToItem(Me,{left:0,top:oi}).then(function(){Ln()})}})}):Promise.resolve()},[]),Pr=e.useCallback(function(jt){return ln.markVisitedDestination(jt),xi(jt)},[]),Ws=e.useCallback(function(){var jt=ln.getNextDestination();return jt?xi(jt):Promise.resolve()},[]),zs=e.useCallback(function(){var jt=ln.getPreviousDestination();return jt?xi(jt):Promise.resolve()},[]),Vs=e.useCallback(function(){return Ze.scrollToNextItem(Le.current.pageIndex,Bn)},[]),Fn=e.useCallback(function(jt){return 0<=jt&&jt<Pe?Ze.scrollToItem(jt,Bn):Promise.resolve()},[]),Gs=e.useCallback(function(){return Ze.scrollToPreviousItem(Le.current.pageIndex,Bn)},[]),Tr=e.useCallback(function(jt){var Me,Be;(Me=jt.name,Be=Me.split(/\./).pop(),Be?Be.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Ye){var Xe=new FileReader;Xe.readAsArrayBuffer(jt),Xe.onload=function(){var je=new Uint8Array(Xe.result);Ye(je)}}).then(function(Ye){De(jt.name,Ye)})},[De]),xr=e.useCallback(function(jt){var Me=jt===u.RotateDirection.Backward?-90:90,Be=Le.current.rotation,Ye=Be===360||Be===-360?Me:Be+Me;En.markNotRendered(),bn(Ye),Mn(f(f({},Le.current),{rotation:Ye})),ve({direction:jt,doc:z,rotation:Ye})},[]),ki=e.useCallback(function(jt,Me){var Be=Me===u.RotateDirection.Backward?-90:90,Ye=Le.current.pagesRotation,Xe=(Ye.has(jt)?Ye.get(jt):ut)+Be,je=Ye.set(jt,Xe);_e(je),yn(function(pn){return!pn}),Mn(f(f({},Le.current),{pagesRotation:je,rotatedPage:jt})),Ee({direction:Me,doc:z,pageIndex:jt,rotation:Xe}),En.markRendering(jt),si(jt)},[]),kr=e.useCallback(function(jt){Mn(f(f({},Le.current),{scrollMode:jt})),le(jt)},[]),Rr=e.useCallback(function(jt){Mn(f(f({},Le.current),{viewMode:jt})),ie(jt)},[]),On=e.useCallback(function(jt){var Me=$e.current,Be=Le.current.pageIndex;if(!(Be<0||Be>=Pe)){var Ye=ht[Be].pageHeight,Xe=ht[Be].pageWidth,je=Me?typeof jt=="string"?wi(Me,Ye,Xe,jt,Le.current.viewMode,Pe):jt:1;vn.current=typeof jt=="string"?jt:null,je!==Le.current.scale&&(Os(function(pn){return pn+1}),En.markNotRendered(),mn(je),ae({doc:z,scale:je}),Mn(f(f({},Le.current),{scale:je})))}},[]),qs=e.useCallback(function(jt){Ke.enterFullScreenMode(jt)},[]),Xs=e.useCallback(function(){Ke.exitFullScreenMode()},[]);e.useEffect(function(){Mn(f(f({},Le.current),{fullScreenMode:Ke.fullScreenMode}))},[Ke.fullScreenMode]),e.useEffect(function(){var jt={enterFullScreenMode:qs,exitFullScreenMode:Xs,getPagesContainer:js,getViewerState:Us,jumpToDestination:Pr,jumpToNextDestination:Ws,jumpToPreviousDestination:zs,jumpToNextPage:Vs,jumpToPreviousPage:Gs,jumpToPage:Fn,openFile:Tr,rotate:xr,rotatePage:ki,setViewerState:Mn,switchScrollMode:kr,switchViewMode:Rr,zoom:On};return lt.forEach(function(Me){Me.install&&Me.install(jt)}),function(){lt.forEach(function(Me){Me.uninstall&&Me.uninstall(jt)})}},[Ae]),e.useEffect(function(){Ht({doc:z,file:p}),lt.forEach(function(jt){jt.onDocumentLoad&&jt.onDocumentLoad({doc:z,file:p})})},[Ae]);var Ri,Mi,Fi,Mr=Ze.boundingClientRect;Ri=function(){J&&Fn(J)},Mi=Mr.height>0&&Mr.width>0,Fi=e.useRef(!1),A(function(){Mi&&!Fi.current&&(Fi.current=!0,Ri())},[Ri,Mi]),A(function(){var jt=Le.current.pageIndex;jt>-1&&Te!==ue&&Ze.scrollToItem(jt,Bn).then(function(){Ke.fullScreenMode===u.FullScreenMode.EnteredCompletely&&(X||En.markNotRendered(),nn.current=-1)})},[ue]),A(function(){var jt=Le.current.pageIndex;jt>-1&&Tn!==on&&Ze.scrollToItem(jt,Bn)},[on]),A(function(){Sn!=0&&Sn!=Le.current.scale&&Ze.zoom(Le.current.scale/Sn,Le.current.pageIndex).then(function(){Ke.fullScreenMode===u.FullScreenMode.EnteredCompletely&&(sn.current=-1)})},[Je]),A(function(){if(Re!==Le.current.viewMode){var jt=Ze.startPage,Me=Ze.endPage,Be=Ze.virtualItems;En.markNotRendered(),En.setRange(jt,Me);for(var Ye=function(je){var pn=Be.find(function(Ln){return Ln.index===je});pn&&En.setVisibility(je,pn.visibility)},Xe=jt;Xe<=Me;Xe++)Ye(Xe);Li()}},[fe]),A(function(){var jt=Le.current.pageIndex;jt>-1&&Re!==fe&&Ze.scrollToItem(jt,Bn)},[fe]),A(function(){var jt=Le.current.pageIndex;jt>0&&jt===J&&fn.current===J&&vn.current&&(fn.current=-1,On(vn.current))},[rn]),e.useEffect(function(){Ze.isSmoothScrolling||an.current!==null&&an.current===rn||(an.current=rn,ge({currentPage:rn,doc:z}))},[rn,Ze.isSmoothScrolling]),e.useEffect(function(){Ke.fullScreenMode===u.FullScreenMode.Entering&&Le.current.scrollMode===u.ScrollMode.Page&&(nn.current=Le.current.pageIndex),Ke.fullScreenMode===u.FullScreenMode.EnteredCompletely&&Le.current.scrollMode===u.ScrollMode.Page&&X&&(nn.current=-1),Ke.fullScreenMode===u.FullScreenMode.EnteredCompletely&&vn.current&&(sn.current=Le.current.pageIndex,On(vn.current))},[Ke.fullScreenMode]),e.useEffect(function(){if(Ke.fullScreenMode!==u.FullScreenMode.Entering&&Ke.fullScreenMode!==u.FullScreenMode.Exitting&&!Ze.isSmoothScrolling){var jt=Ze.startPage,Me=Ze.endPage,Be=Ze.maxVisbilityIndex,Ye=Ze.virtualItems,Xe=Be,je=Ke.fullScreenMode===u.FullScreenMode.Entered||Ke.fullScreenMode===u.FullScreenMode.EnteredCompletely;if(!(je&&Xe!==nn.current&&nn.current>-1||je&&Xe!==sn.current&&sn.current>-1)){un(Xe),Mn(f(f({},Le.current),{pageIndex:Xe})),En.setRange(jt,Me);for(var pn=function(Di){var ai=Ye.find(function(Dn){return Dn.index===Di});ai&&En.setVisibility(Di,ai.visibility)},Ln=jt;Ln<=Me;Ln++)pn(Ln);Li()}}},[Ze.startPage,Ze.endPage,Ze.isSmoothScrolling,Ze.maxVisbilityIndex,Ke.fullScreenMode,gn,on,Je]);var $s=e.useCallback(function(jt){En.markRendered(jt),Li()},[Xn]),Li=function(){var jt=En.getHighestPriorityPage();jt>-1&&En.isInRange(jt)&&(En.markRendering(jt),si(jt))},Ys=function(jt){var Me=rn-1,Be=rn+1;switch(jt){case"FirstPage":Fn(0);break;case"LastPage":Fn(Pe-1);break;case"NextPage":Be<Pe&&Fn(Be);break;case"PrevPage":Me>=0&&Fn(Me)}},Ks=e.useCallback(function(){var jt=Ze.virtualItems,Me=[];switch(fe){case u.ViewMode.DualPage:Me=wt(jt,2);break;case u.ViewMode.DualPageWithCover:jt.length&&(Me=jt[0].index===0?[[jt[0]]].concat(wt(jt.slice(1),2)):wt(jt,2));break;case u.ViewMode.SinglePage:default:Me=wt(jt,1)}var Be=ze&&ze.core?ze.core.pageLabel:"Page {{pageIndex}}",Ye={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Ge,style:{height:"100%"}},children:e.createElement(e.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:T({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ue===u.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Ve,"rpv-core__inner-pages--single":ue===u.ScrollMode.Page,"rpv-core__inner-pages--vertical":ue===u.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ue===u.ScrollMode.Wrapped}),ref:$e,style:{height:"100%",position:"relative"}},children:e.createElement("div",{"data-testid":"core__inner-current-page-".concat(rn),style:Object.assign({"--scale-factor":Je},Ze.getContainerStyles())},Me.map(function(Xe){return e.createElement("div",{className:T({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ue===u.ScrollMode.Page}),style:Ze.getItemContainerStyles(Xe[0]),key:"".concat(Xe[0].index,"-").concat(fe)},Xe.map(function(je){var pn=fe===u.ViewMode.DualPageWithCover&&(je.index===0||Pe%2==0&&je.index===Pe-1);return e.createElement("div",{"aria-label":Be.replace("{{pageIndex}}","".concat(je.index+1)),className:T({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":fe===u.ViewMode.DualPage&&je.index%2==0,"rpv-core__inner-page--dual-odd":fe===u.ViewMode.DualPage&&je.index%2==1,"rpv-core__inner-page--dual-cover":pn,"rpv-core__inner-page--dual-cover-even":fe===u.ViewMode.DualPageWithCover&&!pn&&je.index%2==0,"rpv-core__inner-page--dual-cover-odd":fe===u.ViewMode.DualPageWithCover&&!pn&&je.index%2==1,"rpv-core__inner-page--single":fe===u.ViewMode.SinglePage&&ue===u.ScrollMode.Page}),role:"region",key:"".concat(je.index,"-").concat(fe),style:Object.assign({},Ze.getItemStyles(je),Cr.buildPageStyles({numPages:Pe,pageIndex:je.index,scrollMode:ue,viewMode:fe}))},e.createElement(gs,{doc:z,measureRef:je.measureRef,outlines:Ne,pageIndex:je.index,pageRotation:Se.has(je.index)?Se.get(je.index):0,pageSize:ht[je.index],plugins:lt,renderPage:Ft,renderQueueKey:Xn,rotation:on,scale:Je,shouldRender:jn===je.index,viewMode:fe,onExecuteNamedAction:Ys,onJumpFromLinkAnnotation:Hs,onJumpToDest:Pr,onRenderCompleted:$s,onRotatePage:ki}))}))}))}};return lt.forEach(function(Xe){Xe.renderViewer&&(Ye=Xe.renderViewer({containerRef:Ge,doc:z,pagesContainerRef:$e,pagesRotation:Se,pageSizes:ht,rotation:on,slot:Ye,themeContext:He,jumpToPage:Fn,openFile:Tr,rotate:xr,rotatePage:ki,switchScrollMode:kr,switchViewMode:Rr,zoom:On}))}),Ye},[lt,Ze]),Fr=e.useCallback(function(jt){return e.createElement("div",f({},jt.attrs,{style:jt.attrs&&jt.attrs.style?jt.attrs.style:{}}),jt.children,jt.subSlot&&Fr(jt.subSlot))},[]);return Fr(Ks())},Sr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Ms=function(r){var p=r.defaultScale,N=r.doc,z=r.render,X=r.scrollMode,J=r.viewMode,ut=e.useRef(),rt=e.useState({pageSizes:[],scale:0}),V=rt[0],ht=rt[1];return e.useLayoutEffect(function(){var lt=Array(N.numPages).fill(0).map(function(Ft,Rt){return new Promise(function(xt,Yt){me(N,Rt).then(function(qt){var Ht=qt.getViewport({scale:1});xt({pageHeight:Ht.height,pageWidth:Ht.width,rotation:Ht.rotation})})})});Promise.all(lt).then(function(Ft){var Rt=ut.current;if(Rt&&Ft.length!==0){var xt=Ft[0].pageWidth,Yt=Ft[0].pageHeight,qt=Rt.parentElement,Ht=(qt.clientWidth-45)/xt,De=(qt.clientHeight-45)/Yt,ge=Ht;switch(X){case u.ScrollMode.Horizontal:ge=Math.min(Ht,De);break;case u.ScrollMode.Vertical:default:ge=Ht}var ve,Ee,ae=p?typeof p=="string"?wi(qt,Yt,xt,p,J,N.numPages):p:(ve=ge,(Ee=Sr.findIndex(function(Pe){return Pe>=ve}))===-1||Ee===0?ve:Sr[Ee-1]);ht({pageSizes:Ft,scale:ae})}})},[N.loadingTask.docId]),V.pageSizes.length===0||V.scale===0?e.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:ut},e.createElement(M,null)):z(V.pageSizes,V.scale)},ri=function(){},Pi=function(r){function p(N,z){var X=r.call(this)||this;return X.verifyPassword=N,X.passwordStatus=z,X}return G(p,r),p}(ri),Fs=function(r){var p=r.passwordStatus,N=r.renderProtectedView,z=r.verifyPassword,X=r.onDocumentAskPassword,J=e.useContext(Bt).l10n,ut=e.useState(""),rt=ut[0],V=ut[1],ht=e.useContext(U).direction===u.TextDirection.RightToLeft,lt=function(){return z(rt)};return e.useEffect(function(){X&&X({verifyPassword:z})},[]),N?N({passwordStatus:p,verifyPassword:z}):e.createElement("div",{className:"rpv-core__asking-password-wrapper"},e.createElement("div",{className:T({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":ht})},e.createElement("div",{className:"rpv-core__asking-password-message"},p===u.PasswordStatus.RequiredPassword&&J.core.askingPassword.requirePasswordToOpen,p===u.PasswordStatus.WrongPassword&&J.core.wrongPassword.tryAgain),e.createElement("div",{className:"rpv-core__asking-password-body"},e.createElement("div",{className:T({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!ht,"rpv-core__asking-password-input--rtl":ht})},e.createElement(P,{testId:"core__asking-password-input",type:"password",value:rt,onChange:V,onKeyDown:function(Ft){Ft.key==="Enter"&&lt()}})),e.createElement(F,{onClick:lt},J.core.askingPassword.submit))))},Er=function(r){function p(N){var z=r.call(this)||this;return z.doc=N,z}return G(p,r),p}(ri),wr=function(r){function p(N){var z=r.call(this)||this;return z.error=N,z}return G(p,r),p}(ri),Ti=function(r){function p(N){var z=r.call(this)||this;return z.percentages=N,z}return G(p,r),p}(ri),Ls=function(r){var p=r.characterMap,N=r.file,z=r.httpHeaders,X=r.render,J=r.renderError,ut=r.renderLoader,rt=r.renderProtectedView,V=r.transformGetDocumentParams,ht=r.withCredentials,lt=r.onDocumentAskPassword,Ft=e.useContext(U).direction===u.TextDirection.RightToLeft,Rt=e.useState(new Ti(0)),xt=Rt[0],Yt=Rt[1],qt=e.useRef(""),Ht=et();return e.useEffect(function(){qt.current="",Yt(new Ti(0));var De=new Q.PDFWorker({name:"PDFWorker_".concat(Date.now())}),ge=Object.assign({httpHeaders:z,withCredentials:ht,worker:De},typeof N=="string"?{url:N}:{data:N},p?{cMapUrl:p.url,cMapPacked:p.isCompressed}:{}),ve=V?V(ge):ge,Ee=Q.getDocument(ve);return Ee.onPassword=function(ae,Pe){switch(Pe){case Q.PasswordResponses.NEED_PASSWORD:Ht.current&&Yt(new Pi(ae,u.PasswordStatus.RequiredPassword));break;case Q.PasswordResponses.INCORRECT_PASSWORD:Ht.current&&Yt(new Pi(ae,u.PasswordStatus.WrongPassword))}},Ee.onProgress=function(ae){var Pe=ae.total>0?Math.min(100,100*ae.loaded/ae.total):100;Ht.current&&qt.current===""&&Yt(new Ti(Pe))},Ee.promise.then(function(ae){qt.current=ae.loadingTask.docId,Ht.current&&Yt(new Er(ae))},function(ae){return Ht.current&&!De.destroyed&&Yt(new wr({message:ae.message||"Cannot load document",name:ae.name}))}),function(){Ee.destroy(),De.destroy()}},[N]),xt instanceof Pi?e.createElement(Fs,{passwordStatus:xt.passwordStatus,renderProtectedView:rt,verifyPassword:xt.verifyPassword,onDocumentAskPassword:lt}):xt instanceof Er?X(xt.doc):xt instanceof wr?J?J(xt.error):e.createElement("div",{className:T({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Ft})},e.createElement("div",{className:"rpv-core__doc-error-text"},xt.error.message)):e.createElement("div",{"data-testid":"core__doc-loading",className:T({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Ft})},ut?ut(xt.percentages):e.createElement(M,null))},Ds=function(r,p){var N=e.useMemo(function(){return r==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":r},[]),z=e.useState(N),X=z[0],J=z[1],ut=pt(X);return e.useEffect(function(){if(r==="auto"){var rt=window.matchMedia("(prefers-color-scheme: dark)"),V=function(ht){J(ht.matches?"dark":"light")};return rt.addEventListener("change",V),function(){return rt.removeEventListener("change",V)}}},[]),e.useEffect(function(){X!==ut&&p&&p(X)},[X]),e.useEffect(function(){r!==X&&J(r)},[r]),{currentTheme:X,setCurrentTheme:J}},Is=function(r){return{startPage:r.startPage-3,endPage:r.endPage+3}};u.Button=function(r){var p=r.children,N=r.testId,z=r.onClick,X=e.useContext(U).direction===u.TextDirection.RightToLeft,J=N?{"data-testid":N}:{};return e.createElement("button",f({className:T({"rpv-core__button":!0,"rpv-core__button--rtl":X}),type:"button",onClick:z},J),p)},u.Icon=v,u.LazyRender=function(r){var p=r.attrs,N=r.children,z=r.testId,X=e.useState(!1),J=X[0],ut=X[1],rt=z?f(f({},p),{"data-testid":z}):p,V=C({once:!0,onVisibilityChanged:function(ht){ht.isVisible&&ut(!0)}});return e.createElement("div",f({ref:V},rt),J&&N)},u.LocalizationContext=Bt,u.Menu=function(r){var p=r.children,N=e.useRef(),z=e.useRef([]),X=e.useContext(U).direction===u.TextDirection.RightToLeft,J=function(rt){if(N.current)switch(rt.key){case"Tab":rt.preventDefault();break;case"ArrowDown":rt.preventDefault(),ut(function(V,ht){return ht+1});break;case"ArrowUp":rt.preventDefault(),ut(function(V,ht){return ht-1});break;case"End":rt.preventDefault(),ut(function(V,ht){return V.length-1});break;case"Home":rt.preventDefault(),ut(function(V,ht){return 0})}},ut=function(rt){if(N.current){var V=z.current,ht=V.findIndex(function(Ft){return Ft.getAttribute("tabindex")==="0"}),lt=Math.min(V.length-1,Math.max(0,rt(V,ht)));ht>=0&&ht<=V.length-1&&V[ht].setAttribute("tabindex","-1"),V[lt].setAttribute("tabindex","0"),V[lt].focus()}};return A(function(){var rt=N.current;if(rt){var V=function(ht){var lt=[];return ht.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Ft){if(Ft instanceof HTMLElement){var Rt=Ft.parentElement;(Rt===ht||window.getComputedStyle(Rt).display!=="none")&&lt.push(Ft)}}),lt}(rt);z.current=V}},[]),A(function(){return document.addEventListener("keydown",J),function(){document.removeEventListener("keydown",J)}},[]),e.createElement("div",{ref:N,"aria-orientation":"vertical",className:T({"rpv-core__menu":!0,"rpv-core__menu--rtl":X}),role:"menu",tabIndex:0},p)},u.MenuDivider=function(){return e.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},u.MenuItem=function(r){var p=r.checked,N=p!==void 0&&p,z=r.children,X=r.icon,J=X===void 0?null:X,ut=r.isDisabled,rt=ut!==void 0&&ut,V=r.testId,ht=r.onClick,lt=e.useContext(U).direction===u.TextDirection.RightToLeft,Ft=V?{"data-testid":V}:{};return e.createElement("button",f({className:T({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":rt,"rpv-core__menu-item--ltr":!lt,"rpv-core__menu-item--rtl":lt}),role:"menuitem",tabIndex:-1,type:"button",onClick:ht},Ft),e.createElement("div",{className:T({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!lt,"rpv-core__menu-item-icon--rtl":lt})},J),e.createElement("div",{className:T({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!lt,"rpv-core__menu-item-label--rtl":lt})},z),e.createElement("div",{className:T({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!lt,"rpv-core__menu-item-check--rtl":lt})},N&&e.createElement(E,null)))},u.MinimalButton=function(r){var p=r.ariaLabel,N=p===void 0?"":p,z=r.ariaKeyShortcuts,X=z===void 0?"":z,J=r.children,ut=r.isDisabled,rt=ut!==void 0&&ut,V=r.isSelected,ht=V!==void 0&&V,lt=r.testId,Ft=r.onClick,Rt=e.useContext(U).direction===u.TextDirection.RightToLeft,xt=lt?{"data-testid":lt}:{};return e.createElement("button",f({"aria-label":N},X&&{"aria-keyshortcuts":X},rt&&{"aria-disabled":!0},{className:T({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":rt,"rpv-core__minimal-button--rtl":Rt,"rpv-core__minimal-button--selected":ht}),type:"button",onClick:Ft},xt),J)},u.Modal=function(r){var p=r.ariaControlsSuffix,N=r.closeOnClickOutside,z=r.closeOnEscape,X=r.content,J=r.isOpened,ut=J!==void 0&&J,rt=r.target,V=p||"".concat(R());return e.createElement(_,{target:rt?function(ht,lt){return e.createElement("div",{"aria-expanded":lt?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(V)},rt(ht,lt))}:null,content:function(ht){return e.createElement(c,null,e.createElement(s,{ariaControlsSuffix:V,closeOnClickOutside:N,closeOnEscape:z,onToggle:ht},X(ht)))},isOpened:ut})},u.Popover=function(r){var p=r.ariaHasPopup,N=p===void 0?"dialog":p,z=r.ariaControlsSuffix,X=r.closeOnClickOutside,J=r.closeOnEscape,ut=r.content,rt=r.lockScroll,V=rt===void 0||rt,ht=r.offset,lt=r.position,Ft=r.target,Rt=w(!1),xt=Rt.opened,Yt=Rt.toggle,qt=e.useRef(),Ht=e.useMemo(function(){return z||"".concat(R())},[]);return e.createElement("div",{ref:qt,"aria-expanded":xt?"true":"false","aria-haspopup":N,"aria-controls":"rpv-core__popver-body-".concat(Ht)},Ft(Yt,xt),xt&&e.createElement(e.Fragment,null,V&&e.createElement(Tt,{closeOnEscape:J,onClose:Yt}),e.createElement(Zt,{ariaControlsSuffix:Ht,closeOnClickOutside:X,offset:ht,position:lt,targetRef:qt,onClose:Yt},ut(Yt))))},u.PrimaryButton=F,u.ProgressBar=function(r){var p=r.progress,N=e.useContext(U).direction===u.TextDirection.RightToLeft;return e.createElement("div",{className:T({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":N})},e.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(p,"%")}},p,"%"))},u.Separator=function(){return e.createElement("div",{className:"rpv-core__separator"})},u.Spinner=M,u.Splitter=function(r){var p=r.constrain,N=e.useContext(U).direction===u.TextDirection.RightToLeft,z=e.useRef(),X=e.useRef(),J=e.useRef(),ut=e.useRef(0),rt=e.useRef(0),V=e.useRef(0),ht=e.useRef(0),lt={capture:!0},Ft=function(xt){var Yt=z.current,qt=X.current,Ht=J.current;if(Yt&&qt&&Ht){var De=ht.current,ge=xt.clientX-ut.current,ve=V.current+(N?-ge:ge),Ee=Yt.parentElement.getBoundingClientRect().width,ae=100*ve/Ee;if(Yt.classList.add("rpv-core__splitter--resizing"),p){var Pe=Ee-ve-De;if(!p({firstHalfPercentage:ae,firstHalfSize:ve,secondHalfPercentage:100*Pe/Ee,secondHalfSize:Pe}))return}qt.style.width="".concat(ae,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),qt.classList.add("rpv-core__splitter-sibling--resizing"),Ht.classList.add("rpv-core__splitter-sibling--resizing")}},Rt=function(xt){var Yt=z.current,qt=X.current,Ht=J.current;Yt&&qt&&Ht&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Yt.classList.remove("rpv-core__splitter--resizing"),qt.classList.remove("rpv-core__splitter-sibling--resizing"),Ht.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Ft,lt),document.removeEventListener("mouseup",Rt,lt))};return e.useEffect(function(){var xt=z.current;xt&&(ht.current=xt.getBoundingClientRect().width,X.current=xt.previousElementSibling,J.current=xt.nextElementSibling)},[]),e.createElement("div",{ref:z,className:"rpv-core__splitter",onMouseDown:function(xt){var Yt=X.current;Yt&&(ut.current=xt.clientX,rt.current=xt.clientY,V.current=Yt.getBoundingClientRect().width,document.addEventListener("mousemove",Ft,lt),document.addEventListener("mouseup",Rt,lt))}})},u.TextBox=P,u.ThemeContext=U,u.Tooltip=function(r){var p=r.ariaControlsSuffix,N=r.content,z=r.offset,X=r.position,J=r.target,ut=w(!1),rt=ut.opened,V=ut.toggle,ht=e.useRef(),lt=e.useRef(),Ft=e.useMemo(function(){return p||"".concat(R())},[]);a(function(){ht.current&&document.activeElement&&ht.current.contains(document.activeElement)&&xt()});var Rt=function(){V(u.ToggleStatus.Open)},xt=function(){V(u.ToggleStatus.Close)};return e.createElement(e.Fragment,null,e.createElement("div",{ref:ht,"aria-describedby":"rpv-core__tooltip-body-".concat(Ft),onBlur:function(Yt){Yt.relatedTarget instanceof HTMLElement&&Yt.currentTarget.parentElement&&Yt.currentTarget.parentElement.contains(Yt.relatedTarget)?lt.current&&(lt.current.style.display="none"):xt()},onFocus:Rt,onMouseEnter:Rt,onMouseLeave:xt},J),rt&&e.createElement(dt,{ariaControlsSuffix:Ft,contentRef:lt,offset:z,position:X,targetRef:ht},N()))},u.Viewer=function(r){var p=r.characterMap,N=r.defaultScale,z=r.enableSmoothScroll,X=z===void 0||z,J=r.fileUrl,ut=r.httpHeaders,rt=ut===void 0?{}:ut,V=r.initialPage,ht=V===void 0?0:V,lt=r.pageLayout,Ft=r.initialRotation,Rt=Ft===void 0?0:Ft,xt=r.localization,Yt=r.plugins,qt=Yt===void 0?[]:Yt,Ht=r.renderError,De=r.renderLoader,ge=r.renderPage,ve=r.renderProtectedView,Ee=r.scrollMode,ae=Ee===void 0?u.ScrollMode.Vertical:Ee,Pe=r.setRenderRange,Ae=Pe===void 0?Is:Pe,ze=r.transformGetDocumentParams,He=r.theme,Ve=He===void 0?{direction:u.TextDirection.LeftToRight,theme:"light"}:He,Ge=r.viewMode,$e=Ge===void 0?u.ViewMode.SinglePage:Ge,dn=r.withCredentials,rn=dn!==void 0&&dn,un=r.onDocumentAskPassword,an=r.onDocumentLoad,ln=an===void 0?function(){}:an,cn=r.onPageChange,on=cn===void 0?function(){}:cn,bn=r.onRotate,Tn=bn===void 0?function(){}:bn,Cn=r.onRotatePage,gn=Cn===void 0?function(){}:Cn,yn=r.onSwitchTheme,xn=yn===void 0?function(){}:yn,Se=r.onZoom,_e=Se===void 0?function(){}:Se,oe=e.useState({data:J,name:typeof J=="string"?J:"",shouldLoad:!1}),ue=oe[0],le=oe[1],Te=function(nn,sn){le({data:sn,name:nn,shouldLoad:!0})},xe=e.useState(!1),fe=xe[0],ie=xe[1],Re=pt(ue);e.useEffect(function(){var nn,sn,fn,Ke;nn=Re.data,Ke=typeof(sn=J),(fn=typeof nn)=="string"&&Ke==="string"&&nn===sn||fn==="object"&&Ke==="object"&&nn.length===sn.length&&nn.every(function(Rn,jn){return Rn===sn[jn]})||le({data:J,name:typeof J=="string"?J:"",shouldLoad:fe})},[J,fe]);var Ne=C({onVisibilityChanged:function(nn){ie(nn.isVisible),nn.isVisible&&le(function(sn){return Object.assign({},sn,{shouldLoad:!0})})}}),en=typeof Ve=="string"?{direction:u.TextDirection.LeftToRight,theme:Ve}:Ve,Je=e.useState(xt||kt),mn=Je[0],Sn=Je[1],Le={l10n:mn,setL10n:Sn},vn=Object.assign({},{direction:en.direction},Ds(en.theme||"light",xn));return e.useEffect(function(){xt&&Sn(xt)},[xt]),e.createElement(Bt.Provider,{value:Le},e.createElement(U.Provider,{value:vn},e.createElement("div",{ref:Ne,className:"rpv-core__viewer rpv-core__viewer--".concat(vn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},ue.shouldLoad&&e.createElement(Ls,{characterMap:p,file:ue.data,httpHeaders:rt,render:function(nn){return e.createElement(Ms,{defaultScale:N,doc:nn,render:function(sn,fn){return e.createElement(Rs,{currentFile:{data:ue.data,name:ue.name},defaultScale:N,doc:nn,enableSmoothScroll:X,initialPage:ht,initialRotation:Rt,initialScale:fn,pageLayout:lt,pageSizes:sn,plugins:qt,renderPage:ge,scrollMode:ae,setRenderRange:Ae,viewMode:$e,viewerState:{file:ue,fullScreenMode:u.FullScreenMode.Normal,pageIndex:-1,pageHeight:sn[0].pageHeight,pageWidth:sn[0].pageWidth,pagesRotation:new Map,rotation:Rt,scale:fn,scrollMode:ae,viewMode:$e},onDocumentLoad:ln,onOpenFile:Te,onPageChange:on,onRotate:Tn,onRotatePage:gn,onZoom:_e})},scrollMode:ae,viewMode:$e})},renderError:Ht,renderLoader:De,renderProtectedView:ve,transformGetDocumentParams:ze,withCredentials:rn,onDocumentAskPassword:un}))))},u.Worker=function(r){var p=r.children,N=r.workerUrl;return Q.GlobalWorkerOptions.workerSrc=N,e.createElement(e.Fragment,null,p)},u.chunk=wt,u.classNames=T,u.createStore=function(r){var p=r||{},N={},z=function(J,ut){var rt;p=f(f({},p),((rt={})[J]=ut,rt)),(N[J]||[]).forEach(function(V){return V(p[J])})},X=function(J){return p[J]};return{subscribe:function(J,ut){N[J]=(N[J]||[]).concat(ut)},unsubscribe:function(J,ut){N[J]=(N[J]||[]).filter(function(rt){return rt!==ut})},update:function(J,ut){z(J,ut)},updateCurrentValue:function(J,ut){var rt=X(J);rt!==void 0&&z(J,ut(rt))},get:function(J){return X(J)}}},u.getDestination=ye,u.getPage=me,u.isFullScreenEnabled=S,u.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},u.useDebounceCallback=k,u.useIntersectionObserver=C,u.useIsMounted=et,u.useIsomorphicLayoutEffect=A,u.usePrevious=pt,u.useRenderQueue=At})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;const index="",PDFViewer=({pdfUrl:u})=>jsx("div",{style:{height:"800px"},children:jsx(libExports.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsx(libExports.Viewer,{fileUrl:u})})}),CustomerSignaturePage=()=>{const{signature_uuid:u}=useParams(),m=reactExports.useRef(null),bt=useLocation(),x=new URLSearchParams(bt.search).get("type"),e=useDispatch(),Q=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,padding:"10px 20px"});reactExports.useState("loading");const[Pt,G]=reactExports.useState(!1),[I,f]=reactExports.useState(""),[H,U]=reactExports.useState(null),[T,A]=reactExports.useState(null),[C,v]=reactExports.useState(null),[E,F]=reactExports.useState(null);reactExports.useState(!0),reactExports.useState(!0),reactExports.useState(!0),reactExports.useState(x=="refinance");const[M,P]=reactExports.useState(!1),[o,d]=reactExports.useState(!0),D=useNavigate(),{mutate:y,isLoading:l}=useGlobalMutation(url_api.SignPdf,{onSuccess:_=>{_.statusCode===400||_.code===400?Swal.fire({icon:"error",title:_.message,padding:"10px 20px"}):D("/customer/thankyou")},onError:_=>{console.log("error",_)}}),{mutateAsync:L,isLoading:S}=useUploadSignMutation({onSuccess:_=>{_.statusCode===400||_.code===400?Q.fire({icon:"error",title:"อัพโหลดไม่สำเร็จ!!!!!",padding:"10px 20px"}):(y({data:{ref:u,signName:_.data.file_name}}),i(),m.current.clear())},onError:_=>{Q.fire({icon:"error",title:"อัพโหลดไม่สำเร็2",padding:"10px 20px"})}}),q=()=>{var _;if(m.current){const O=m.current.getCanvas(),at=Math.max(window.devicePixelRatio||1,1);O.width=O.offsetWidth*at,O.height=O.offsetHeight*at,(_=O.getContext("2d"))==null||_.scale(at,at),m.current.clear()}},{mutate:Z,isLoading:k}=useGlobalMutation(url_api.getSignInfo,{onSuccess:_=>{var O;_.statusCode===400||_.code===400?D("/customer/timeout"):(f((O=_==null?void 0:_.data)==null?void 0:O.reference),et({data:{ref:u}}),vt({data:{ref:u}}),At({data:{ref:u}}),x=="refinance"&&Bt({data:{ref:u}}))},onError:_=>{console.log("error",_)}}),{mutate:et,isLoading:pt}=useGlobalMutation(url_api.getSignPdf,{onSuccess:_=>{var O;_.statusCode===400||_.code===400?Swal.fire({icon:"error",title:_.message,padding:"10px 20px"}):U((O=_==null?void 0:_.data)==null?void 0:O.url_image)},onError:_=>{console.log("error",_)}}),{mutate:vt,isLoading:$}=useGlobalMutation(url_api.getSignPdfPdpa,{onSuccess:_=>{var O;_.statusCode===400||_.code===400?Swal.fire({icon:"error",title:_.message,padding:"10px 20px"}):A((O=_==null?void 0:_.data)==null?void 0:O.url_image)},onError:_=>{console.log("error",_)}}),{mutate:At,isLoading:kt}=useGlobalMutation(url_api.getSignPdfCardID,{onSuccess:_=>{var O;_.statusCode===400||_.code===400?Swal.fire({icon:"error",title:_.message,padding:"10px 20px"}):v((O=_==null?void 0:_.data)==null?void 0:O.url_image)},onError:_=>{console.log("error",_)}}),{mutate:Bt,isLoading:Vt}=useGlobalMutation(url_api.getSignPdfReceipt,{onSuccess:_=>{var O;_.statusCode===400||_.code===400?Swal.fire({icon:"error",title:_.message,padding:"10px 20px"}):F((O=_==null?void 0:_.data)==null?void 0:O.url_image)},onError:_=>{console.log("error",_)}});reactExports.useEffect(()=>{e(setPageTitleOnly("ลงนามสัญญาออนไลน์")),Z({data:{ref:u}})},[]),reactExports.useEffect(()=>()=>{H&&window.URL.revokeObjectURL(H)},[H]),reactExports.useEffect(()=>()=>{T&&window.URL.revokeObjectURL(T)},[T]),reactExports.useEffect(()=>()=>{C&&window.URL.revokeObjectURL(C)},[C]),reactExports.useEffect(()=>()=>{E&&window.URL.revokeObjectURL(E)},[E]),reactExports.useEffect(()=>(Pt&&window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q)}),[Pt]);const R=()=>G(!0),i=()=>G(!1),a=()=>{var _;return(_=m.current)==null?void 0:_.clear()},s=async()=>{if(!m.current||m.current.isEmpty()){Swal.fire("คำเตือน","กรุณาลงลายเซ็นก่อนบันทึก","warning");return}Swal.fire({title:"ยืนยันการบันทึก",text:"คุณต้องการบันทึกลายเซ็นนี้ลงในเครื่องของคุณใช่หรือไม่?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3b3f5c",cancelButtonColor:"#e7515a",confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",reverseButtons:!0}).then(async _=>{if(_.isConfirmed)try{let O=function(mt,St){const Dt=mt.split(","),Ct=Dt[0].match(/:(.*?)/)[1],$t=atob(Dt[1]);let Qt=$t.length;const Ot=new Uint8Array(Qt);for(;Qt--;)Ot[Qt]=$t.charCodeAt(Qt);return new File([Ot],St,{type:Ct})};const at=m.current.getCanvas().toDataURL("image/png"),ct=O(at,"signature.png");L({data:{file:ct,type:"contract",ref:u}})}catch(O){console.error("เกิดข้อผิดพลาด:",O),Swal.fire("เกิดข้อผิดพลาด",O.message||"ไม่สามารถอัปโหลดได้","error")}})},c=async()=>{if(P(!0),!H||!T||!C||x=="refinance"&&!E){alert("ยังไม่มี PDF ทั้งสองไฟล์");return}try{const _=await PDFDocument.create(),O=async Dt=>{const Ct=await fetch(Dt);if(!Ct.ok)throw new Error(`โหลด PDF จาก ${Dt} ไม่สำเร็จ`);const $t=await Ct.arrayBuffer(),Qt=await PDFDocument.load($t);(await _.copyPages(Qt,Qt.getPageIndices())).forEach(Zt=>_.addPage(Zt))};await O(H),await O(T),await O(C),x=="refinance"&&E&&await O(E);const at=await _.save(),ct=new Blob([new Uint8Array(at)],{type:"application/pdf"}),mt=URL.createObjectURL(ct),St=document.createElement("a");St.href=mt,St.download=`contract_${hooks().utc().format("DD-MM-yyyy")}.pdf`,St.click(),URL.revokeObjectURL(mt),P(!1)}catch(_){console.error("เกิดข้อผิดพลาดในการรวม PDF:",_),alert("เกิดข้อผิดพลาดในการรวม PDF")}},h=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},w=()=>{document.documentElement.scrollTop>50&&document.documentElement.scrollTop+window.innerHeight-document.documentElement.scrollHeight>=-50?d(!1):d(!0)};return reactExports.useEffect(()=>(window.addEventListener("scroll",w),()=>{window.removeEventListener("onscroll",w)}),[]),jsxs(Fragment,{children:[jsxs("div",{className:"bg-gray-50 min-h-screen",children:[(pt||M||k||S||l||$||kt||Vt)&&jsx(PreLoading,{}),jsx("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:jsxs("div",{className:"panel",children:[jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[jsxs("div",{children:[jsx("h2",{className:"text-2xl font-bold text-themePrimary",children:"ลงนามสัญญาเช่าซื้อออนไลน์"}),jsxs("p",{className:"text-gray-500 mt-1",children:["สำหรับสัญญาเลขที่: ",jsx("span",{className:"font-semibold text-black",children:I})]})]}),jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:c,children:[jsx(IconDownload,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," Download"]})]}),jsxs("div",{className:"mb-10",children:[jsx("h3",{className:"text-xl font-bold mb-4 border-b pb-2",children:"1. รายละเอียดสัญญา"}),k?jsx("div",{className:"text-center text-gray-500 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"กำลังโหลดเอกสารสัญญา..."})}):H?jsx("div",{className:"pdf-viewer-container border rounded-lg overflow-hidden shadow-sm",children:jsx(PDFViewer,{pdfUrl:H})}):jsx("div",{className:"text-center text-gray-400 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"ไม่สามารถแสดงเอกสารสัญญาได้"})})]}),jsxs("div",{className:"mb-10",children:[jsx("h3",{className:"text-xl font-bold mb-4 border-b pb-2",children:"2. PDPA"}),k?jsx("div",{className:"text-center text-gray-500 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"กำลังโหลดเอกสารสัญญา..."})}):T?jsx("div",{className:"pdf-viewer-container border rounded-lg overflow-hidden shadow-sm",children:jsx("iframe",{src:`${T}#toolbar=0`,width:"100%",height:"800px",style:{border:"none"},title:"PDF Viewer"})}):jsx("div",{className:"text-center text-gray-400 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"ไม่สามารถแสดงเอกสารสัญญาได้"})})]}),jsxs("div",{className:"mb-10",children:[jsx("h3",{className:"text-xl font-bold mb-4 border-b pb-2",children:"3. สำเนาบัตรประชาชน"}),k?jsx("div",{className:"text-center text-gray-500 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"กำลังโหลดเอกสารสัญญา..."})}):C?jsx("div",{className:"pdf-viewer-container border rounded-lg overflow-hidden shadow-sm",children:jsx("iframe",{src:`${C}#toolbar=0`,width:"100%",height:"800px",style:{border:"none"},title:"PDF Viewer"})}):jsx("div",{className:"text-center text-gray-400 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"ไม่สามารถแสดงเอกสารสัญญาได้"})})]}),x=="refinance"&&jsxs("div",{className:"mb-10",children:[jsx("h3",{className:"text-xl font-bold mb-4 border-b pb-2",children:"4. ใบเสร็จรับเงิน"}),k?jsx("div",{className:"text-center text-gray-500 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"กำลังโหลดเอกสารสัญญา..."})}):E?jsx("div",{className:"pdf-viewer-container border rounded-lg overflow-hidden shadow-sm",children:jsx("iframe",{src:`${E}#toolbar=0`,width:"100%",height:"800px",style:{border:"none"},title:"PDF Viewer"})}):jsx("div",{className:"text-center text-gray-400 p-10 bg-gray-100 rounded-lg",children:jsx("p",{children:"ไม่สามารถแสดงเอกสารสัญญาได้"})})]}),jsx("button",{type:"button",className:"btn btn-primary btn-lg w-full",onClick:R,disabled:!H||!T||!C||k,children:"คลิกเพื่อลงนาม"})]})})]}),o?jsx("div",{className:"fixed bottom-10 ltr:right-6 rtl:left-6 z-50",style:{bottom:"1.5rem",right:"1.5rem"},children:jsx("a",{href:"#buttom",className:"btn btn-outline-primary rounded-full p-2 animate-pulse bg-[#fafafa] dark:bg-[#060818] dark:hover:bg-primary",children:jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",style:{width:"2rem",height:"2rem",transform:"rotate(180deg)"},children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7l4-4m0 0l4 4m-4-4v18"})})})}):jsx("div",{className:"fixed bottom-6 ltr:right-6 rtl:left-6 z-50",children:jsx("button",{type:"button",className:"btn btn-outline-primary rounded-full p-2 animate-pulse bg-[#fafafa] dark:bg-[#060818] dark:hover:bg-primary",onClick:h,children:jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",style:{width:"2rem",height:"2rem"},children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7l4-4m0 0l4 4m-4-4v18"})})})}),jsx(qe,{appear:!0,show:Pt,as:reactExports.Fragment,children:jsxs(_t,{as:"div",open:Pt,onClose:i,className:"relative z-50",children:[jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsx("div",{className:"fixed inset-0 bg-black/60"})}),jsx("div",{className:"fixed inset-0 overflow-y-auto",children:jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",afterEnter:q,children:jsxs(_t.Panel,{className:"panel w-full max-w-xl transform text-left transition-all shadow-xl p-6 sm:p-8",children:[jsx(_t.Title,{as:"h3",className:"text-2xl font-bold mb-2 text-center",children:"ลงลายมือชื่อของคุณ"}),jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-800",children:jsx(IconX,{className:"w-6 h-6"})}),jsx("p",{className:"mb-5 text-sm text-gray-500 text-center",children:"กรุณาลงลายมือชื่อในกรอบด้านล่างนี้ให้ชัดเจน"}),jsx("div",{className:"relative border-2 border-dashed rounded-lg bg-white overflow-hidden",children:jsx(SignatureCanvas,{ref:m,penColor:"#0000DE",canvasProps:{className:"w-full h-56 sigCanvas"}})}),jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxs("button",{type:"button",className:"btn btn-outline-secondary",onClick:a,children:[jsx(IconRefresh,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," วาดใหม่"]}),jsx("button",{type:"button",className:"btn btn-primary",onClick:s,children:"ยืนยันและส่งลายเซ็น"})]})]})})})})]})}),jsx("div",{id:"buttom"})]})};export{CustomerSignaturePage as default};
