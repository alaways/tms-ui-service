import{u as J,a as ee,r as d,s as te,c as ne,d as ae,m as o,j as e,F as se,f as n,L as le,t as V,I as K,g as ie}from"./index-a90aa29c.js";import{F as oe,a as re}from"./formik.esm-c4fd04ca.js";import{F as W}from"./DatePicker-5cf5930a.js";import{S as ce}from"./SelectField-917481a8.js";import{I as me}from"./IconCashBanknotes-17d8da9b.js";import{P as de}from"./preLoading-b2445d9d.js";import{n as s,a as i}from"./formatNumeric-862380d6.js";import{t as pe}from"./constant-e85f1578.js";import{S as he}from"./sweetalert2.all-ca2d1030.js";import{T as l}from"./tippy-react.esm-150a8dd6.js";/* empty css              */import"./flatpickr-2301360e.js";import"./react-select.esm-b46d9623.js";import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./lodash-f7ec5310.js";const fe="admin",Me=()=>{const z=he.mixin(pe),Q=J(),p=ee(),h=localStorage.getItem(fe),r=h?JSON.parse(h):null,c=r?r.role:null;c!="admin"&&c!="business_unit"&&Q("/"),d.useEffect(()=>{p(te("Dashboard CEO"))},[p]);const[X,O]=d.useState([]),[t,$]=d.useState({amountContract:0,appContractCount:0,bankAmountPayment:0,canContractCount:0,comContractCount:0,paidContract:0,paysAmountPayment:0,r20DueContract:0,r21DueContract:0,r22DueContract:0,rTodayContact:0,recievableContract:0,s10ContractCount:0,s20ContractCount:0,s21ContractCount:0,s22ContractCount:0,total_amount_shop:0,total_payment_com:0,total_transfer_down:0,total_payment_notcom:0,total_commission:0,total_contract_fee:0,total_asset:0,total_down_payment:0,collect_money:0,profit_withcom:0,profit_real:0,total_cost_product:0}),{mutate:f,isLoading:q}=ne(ie.pvDashboardCEO,{onSuccess:a=>{var m,_,u,x,g,N,b,y,v,w,A,T,C,I,P,S,R,U,M,j,k,L,E,D,H,Y,B,F,G;$({amountContract:(m=a.data)==null?void 0:m.amountContract,appContractCount:(_=a.data)==null?void 0:_.appContractCount,bankAmountPayment:(u=a.data)==null?void 0:u.bankAmountPayment,canContractCount:(x=a.data)==null?void 0:x.canContractCount,comContractCount:(g=a.data)==null?void 0:g.comContractCount,paidContract:(N=a.data)==null?void 0:N.paidContract,paysAmountPayment:(b=a.data)==null?void 0:b.paysAmountPayment,paysAmountPaymentTQR:((y=a.data)==null?void 0:y.paysAmountPaymentTQR)??0,r20DueContract:(v=a.data)==null?void 0:v.r20DueContract,r21DueContract:(w=a.data)==null?void 0:w.r21DueContract,r22DueContract:(A=a.data)==null?void 0:A.r22DueContract,rTodayContact:(T=a.data)==null?void 0:T.rTodayContact,recievableContract:(C=a.data)==null?void 0:C.recievableContract,s10ContractCount:(I=a.data)==null?void 0:I.s10ContractCount,s20ContractCount:(P=a.data)==null?void 0:P.s20ContractCount,s21ContractCount:(S=a.data)==null?void 0:S.s21ContractCount,s22ContractCount:(R=a.data)==null?void 0:R.s22ContractCount,total_amount_shop:(U=a.data)==null?void 0:U.total_amount_shop,total_payment_com:(M=a.data)==null?void 0:M.total_payment_com,total_transfer_down:(j=a.data)==null?void 0:j.total_transfer_down,total_payment_notcom:(k=a.data)==null?void 0:k.total_payment_notcom,total_commission:(L=a.data)==null?void 0:L.total_commission,total_contract_fee:(E=a.data)==null?void 0:E.total_contract_fee,total_asset:(D=a.data)==null?void 0:D.total_asset,total_down_payment:(H=a.data)==null?void 0:H.total_down_payment,collect_money:(Y=a.data)==null?void 0:Y.collect_money,profit_withcom:(B=a.data)==null?void 0:B.profit_withcom,profit_real:(F=a.data)==null?void 0:F.profit_real,total_cost_product:(G=a.data)==null?void 0:G.total_cost_product})},onError:()=>{console.error("Failed to fetch dashboard data")}}),{mutate:Z,isLoading:_e}=ae({onSuccess:a=>{O(a.data.list.map(m=>({value:m.id,label:m.name})))},onError:()=>{}});return d.useEffect(()=>{c==="admin"?Z({data:{page:1,page_size:1e3}}):f({data:{start_at:`${o.tz(new Date,"Asia/Bangkok").format("YYYY-MM-DD")}`,end_at:`${o.tz(new Date,"Asia/Bangkok").format("YYYY-MM-DD")}`,id_business_unit:[r.id_business_unit]}})},[]),e(se,{children:e("div",{children:n("div",{className:"pt-5",children:[n("div",{className:"flex flex-wrap ",children:[e("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:e("li",{children:e(le,{to:"#",className:"hover:underline text-xl",children:"Dashboard CEO PV"})})}),e(oe,{autoComplete:"off",initialValues:{start_at:`${o.tz(new Date,"Asia/Bangkok").format("YYYY-MM-DD")}`,end_at:`${o.tz(new Date,"Asia/Bangkok").format("YYYY-MM-DD")}`,id_business_unit:r.id_business_unit?r.id_business_unit:null},onSubmit:a=>{a.id_business_unit===null?z.fire({icon:"warning",title:"กรุณาเลือกหน่วยธุรกิจเพื่อค้นหา",padding:"10px 20px"}):f({data:{start_at:`${o.tz(a.start_at,"Asia/Bangkok").format("YYYY-MM-DD")}`,end_at:`${o.tz(a.end_at,"Asia/Bangkok").format("YYYY-MM-DD")}`,id_business_unit:c==="admin"?a.id_business_unit:[a.id_business_unit]}})},enableReinitialize:!0,children:()=>e(re,{className:"flex flex-wrap gap-4 w-full items-center justify-between",children:n("div",{className:"flex flex-col w-full min-[1141px]:w-[50%] gap-2",children:[c==="admin"&&e("div",{className:"w-full min-[1141px]:max-w-[634px] pt-6",children:e(ce,{id:"bu",label:"หน่วยธุรกิจ",className:"z-10",name:"id_business_unit",options:X,isSearchable:!0,isMulti:!0,onChange:a=>{}})}),n("div",{className:"flex flex-col sm:flex-row flex-auto gap-4 sm:items-center ",children:[n("div",{className:"flex gap-4 items-center w-full min-[1141px]:w-auto",children:[e("div",{className:"w-[50px]",children:"วันที่ "}),e(W,{name:"start_at"})]}),n("div",{className:"flex gap-4 items-center w-full min-[1141px]:w-auto",children:[e("div",{className:"w-[50px]",children:"ถึง วันที่ "}),e(W,{name:"end_at"})]}),e("div",{className:"flex mt-1 ",children:e("button",{type:"submit",className:"btn btn-success gap-2 w-full h-[40px]",children:"อัพเดท"})})]})]})})})]}),q&&e(de,{}),n("div",{className:"flex flex-wrap items-start mt-6",children:[e("div",{className:"flex flex-wrap w-full",children:e("h1",{className:"text-[#f7931a] font-medium text-2xl",children:"บัญชีเงินสด"})}),n("div",{className:"flex flex-wrap flex-col pt-5 mr-2",style:{width:V.paymentGateway.tqr?"calc(25% - 10px)":"calc(50% - 10px)"},children:[n("div",{className:"flex flex-wrap w-full",children:[e("div",{className:"bg-[#113144] w-8 h-8 rounded-full flex items-center justify-center text-white mr-2",children:e(K,{className:"w-6 h-6"})}),e("p",{className:"text-lg text-[#113144]",children:"Pay solution"}),e(l,{content:"เงินรับจาก Payment Gateway Pay solution",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2 mt-1.5"})})]}),e("div",{className:"flex flex-wrap w-full pt-3",children:e("div",{className:"w-full border border-[#e0e6ed] rounded-lg",children:n("p",{className:"p-3 pl-5 pr-5 text-3xl text-center text-[#4e9676] mr-2",children:[s(t==null?void 0:t.paysAmountPayment)," ฿"]})})}),e("div",{className:"flex flex-wrap"})]}),V.paymentGateway.tqr&&n("div",{className:"flex flex-wrap flex-col pt-5 ",style:{width:"calc(25% - 10px)"},children:[n("div",{className:"flex flex-wrap w-full",children:[e("div",{className:"bg-[#113144] w-8 h-8 rounded-full flex items-center justify-center text-white mr-2",children:e(K,{className:"w-6 h-6"})}),e("p",{className:"text-lg text-[#113144]",children:"Thai QR"}),e(l,{content:"เงินรับจาก Thai QR โดย ธนาคารกรุงเทพ",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2 mt-1.5"})})]}),e("div",{className:"flex flex-wrap w-full pt-3",children:e("div",{className:"w-full border border-[#e0e6ed] rounded-lg",children:n("p",{className:"p-3 pl-5 pr-5 text-3xl text-center text-[#4e9676] mr-2",children:[s(t==null?void 0:t.paysAmountPaymentTQR)," ฿"]})})}),e("div",{className:"flex flex-wrap"})]}),n("div",{className:"flex flex-wrap flex-col pt-5 pl-5",style:{width:"50%"},children:[n("div",{className:"flex flex-wrap w-full text-[#113144]",children:[e("div",{className:"bg-[#113144] w-8 h-8 rounded-full flex items-center justify-center text-white mr-2",children:e(me,{className:"w-6 h-6"})}),e("p",{className:"text-lg",children:"บัญชีธนาคาร / เงินสด"}),e(l,{content:"ลูกค้าโอนเงิน/ชำระเงินสด",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2 mt-1.5"})})]}),e("div",{className:"flex flex-wrap w-full pt-3",children:e("div",{className:"w-full border border-[#e0e6ed] rounded-lg",children:n("p",{className:"p-3 pl-5 pr-5 text-3xl text-center text-[#fb9d08]",children:[s(t==null?void 0:t.bankAmountPayment)," ฿"]})})}),e("div",{className:"flex flex-wrap"})]})]}),n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6 ",children:[e("div",{className:"col-span-1 md:col-span-1",children:n("div",{className:"border border-gray-300 rounded-lg shadow-lg",children:[e("div",{className:"bg-gradient-to-r from-[#03263a] to-[#0069a1] text-white p-4 rounded-t-lg",children:e("h2",{className:"text-lg font-bold text-center",children:"สัญญา"})}),e("div",{className:"p-4",children:n("div",{className:"space-y-6",children:[n("div",{className:"flex justify-between",children:[e("span",{className:"font-bold",children:"รายการ"}),e("span",{className:"font-bold",children:"จำนวนสัญญา"})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาที่อนุมัติแล้วทั้งหมด"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.appContractCount)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาที่ยกเลิก"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.canContractCount)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาที่เสร็จสิ้น (11-13)"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.comContractCount)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาสถานะปกติ (10)"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.s10ContractCount)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาสถานะเกินชำระ (20)"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.s20ContractCount)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาสถานะเกินชำระ (21)"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.s21ContractCount)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"text-[#ababab]",children:"สัญญาสถานะเกินชำระ (22)"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.s22ContractCount)})]})]})})]})}),n("div",{className:"col-span-1 md:col-span-1 grid grid-rows-2 gap-2",children:[n("div",{className:"border border-gray-300 rounded-lg shadow-lg",children:[e("div",{className:"bg-gradient-to-r from-[#f69e13] to-[#e75701] text-white p-4 rounded-t-lg",children:e("h2",{className:"text-lg font-bold text-center",children:"จำนวนเงินในสัญญา"})}),e("div",{className:"p-4",children:n("div",{className:"space-y-3",children:[n("div",{className:"flex justify-between",children:[e("span",{className:"font-bold",children:"รายการ"}),e("span",{className:"font-bold",children:"฿"})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[n("span",{className:"text-[#ababab] flex items-center",children:["จำนวนเงินในสัญญา",e(l,{content:"จำนวนเงินเช่าซื้อที่ไม่รวมเงินดาวน์",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144] flex items-center",children:s(t==null?void 0:t.amountContract)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[n("span",{className:"text-[#ababab] flex items-center",children:["รับชำระแล้ว",e(l,{content:"เงินที่ลูกค้าชำระแล้วในงวด",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144] flex items-center",children:s(t==null?void 0:t.paidContract)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[n("span",{className:"text-[#ababab] flex items-center",children:["รอรับชำระ",e(l,{content:"จำนวนเงินในสัญญา - รับชำระแล้ว",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144] ",children:s(t==null?void 0:t.recievableContract)})]})]})})]}),n("div",{className:"border border-gray-300 rounded-lg shadow-lg",children:[e("div",{className:"bg-gradient-to-r from-[#a202fe] to-[#6578ff] text-white p-4 rounded-t-lg",children:e("h2",{className:"text-lg font-bold text-center",children:"หนี้เกินกำหนดชำระ"})}),e("div",{className:"p-4",children:n("div",{className:"space-y-3",children:[n("div",{className:"flex justify-between",children:[e("span",{className:"font-bold",children:"รายการ"}),e("span",{className:"font-bold",children:"฿"})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[n("span",{className:"text-[#ababab] flex items-center",children:["หนี้เกินกำหนดชำระ (20)",e(l,{content:"จำนวนเงินค้างชำระที่ลูกค้ามีหนี้เกินกำหนด 3 - 10วัน",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144] flex items-center",children:s(t==null?void 0:t.r20DueContract)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[n("span",{className:"text-[#ababab] flex items-center",children:["หนี้เกินกำหนดชำระ (21)",e(l,{content:"จำนวนเงินค้างชำระที่ลูกค้ามีหนี้เกินกำหนด 10 - 15วัน",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144] flex items-center",children:s(t==null?void 0:t.r21DueContract)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[n("span",{className:"text-[#ababab] flex items-center",children:["หนี้เกินกำหนดชำระ (22)",e(l,{content:"จำนวนเงินค้างชำระที่ลูกค้ามีหนี้เกินกำหนด 15วันขึ้นไป",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144] flex items-center",children:s(t==null?void 0:t.r22DueContract)})]}),e("hr",{}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-bold text-[#113144]",children:"หนี้ครบกำหนด ณ วันที่เลือก"}),e("span",{className:"font-bold text-yellow-500",children:s(t==null?void 0:t.rTodayContact)})]})]})})]})]}),e("div",{className:"col-span-1",children:n("div",{className:"border border-gray-300 rounded-lg shadow-lg",children:[n("div",{className:"bg-gradient-to-r from-red-800 to-red-500 text-white p-4 rounded-t-lg flex flex-col gap-2",children:[e("h2",{className:"text-lg font-bold text-center",children:"คงเหลือจ่ายให้ร้านค้า"}),e("h2",{className:"font-bold text-white text-3xl text-center",children:s(t==null?void 0:t.total_amount_shop)})]}),e("div",{className:"p-4",children:n("div",{className:"space-y-3",children:[n("div",{className:"flex justify-between gap-4",children:[n("div",{className:"flex w-full flex-col gap-1",children:[e("span",{className:"text-[#ababab]",children:"จำนวนสัญญา"}),e("span",{className:"font-bold text-[#113144]",children:i(t==null?void 0:t.total_asset)})]}),n("div",{className:"flex flex-col gap-1 w-full",children:[e("span",{className:"text-[#ababab]",children:"รวมยอดขาย (ทุนสินค้า)"}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_cost_product)})]})]}),e("hr",{}),n("div",{className:"flex justify-between gap-4",children:[n("div",{className:"flex flex-col gap-1 w-full",children:[e("span",{className:"text-[#ababab]",children:"รวมเงินดาวน์"}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_down_payment)})]}),n("div",{className:"flex flex-col gap-1 w-full",children:[e("span",{className:"text-[#ababab]",children:"รวมทุนเช่าซื้อ"}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_payment_notcom)})]})]}),e("hr",{}),n("div",{className:"flex justify-between gap-4",children:[n("div",{className:"flex flex-col gap-1 w-full",children:[e("span",{className:"text-[#ababab]",children:"รวมค่านายหน้า"}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_commission)})]}),n("div",{className:"flex w-full flex-col gap-1",children:[e("span",{className:"text-[#ababab]",children:"หัก รวมค่าทำสัญญา"}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_contract_fee)})]})]}),e("hr",{})]})})]})}),e("div",{className:"md:col-span-1 grid-rows-2 gap-2",children:n("div",{className:"border border-gray-300 rounded-lg shadow-lg",children:[n("div",{className:"bg-gradient-to-r from-green-800 to-green-500 text-white p-4 rounded-t-lg flex flex-col gap-2",children:[n("div",{className:"flex items-center justify-center",children:[e("h2",{className:"text-lg font-bold text-center mr-2",children:"เงินทุนรอจัดเก็บสุทธิ (Net Funds to be Collected)"}),e(l,{content:"วงเงินเช่าซื้อ - ค่านายหน้า + ค่าทำสัญญา",placement:"right",children:e("img",{src:"/assets/images/information-white.png",alt:"Info",className:"cursor-pointer w-5 h-5"})})]}),e("h2",{className:"font-bold text-white text-3xl text-center",children:s(t==null?void 0:t.profit_real)})]}),e("div",{className:"p-4",children:n("div",{className:"space-y-3",children:[n("div",{className:"flex flex-col gap-1 w-full",children:[n("span",{className:"flex items-center text-[#ababab]",children:["วงเงินให้เช่าซื้อ",e(l,{content:"ไม่รวมเงินดาวน์",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.collect_money)})]}),e("hr",{}),e("h5",{className:"font-semibold text-green-500",children:"รายได้"}),n("div",{className:"flex justify-between gap-4",children:[n("div",{className:"flex flex-col gap-1 w-full",children:[e("span",{className:"text-[#ababab]",children:"ค่าดำเนินการเช่าซื้อ"}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.profit_withcom)})]}),n("div",{className:"flex flex-col gap-1 w-full",children:[n("span",{className:"flex items-center text-[#ababab]",children:["ค่าทำสัญญา",e(l,{content:"ค่าบริการทำสัญญา",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_contract_fee)})]})]}),e("hr",{}),e("h5",{className:"font-semibold text-red-500",children:"รายจ่าย"}),e("div",{children:n("div",{className:"flex flex-col gap-1 w-full",children:[n("span",{className:"flex items-center text-[#ababab]",children:["ค่านายหน้า",e(l,{content:"ค่านายหน้า Commission จากร้านค้า/พาร์ทเนอร์",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]}),e("span",{className:"font-bold text-[#113144]",children:s(t==null?void 0:t.total_commission)})]})})]})})]})})]})]})})})};export{Me as default};
