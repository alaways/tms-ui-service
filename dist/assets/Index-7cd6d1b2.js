import{u as $,a as ee,r as o,j as e,s as te,b as le,c as B,d as se,e as ae,h as ie,F as re,f as t,L as ne,g as _}from"./index-a90aa29c.js";import{n as a}from"./formatNumeric-862380d6.js";import{S as oe}from"./react-select.esm-b46d9623.js";import ce from"./ReportShop-195157c2.js";import de from"./Dashboard-ce09031d.js";import{P as me}from"./preLoading-b2445d9d.js";import{c as pe,a as _e}from"./formatDate-4e046265.js";import{T as d}from"./tippy-react.esm-150a8dd6.js";/* empty css              */import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./index-2f30bf27.js";import"./useShopMutation-084b0c2e.js";import"./formik.esm-c4fd04ca.js";import"./DatePicker-5cf5930a.js";import"./flatpickr-2301360e.js";import"./IconRefresh-fed8c080.js";import"./Spinner-5dd45779.js";import"./index-8d8bdff8.js";import"./sweetalert2.all-ca2d1030.js";const he="admin",ue="dev",Le=()=>{const h=$(),m=ee(),u=localStorage.getItem(he),f=u?JSON.parse(u):null,c=f?f.role:null,[v,K]=o.useState(null);if(c==="shop")return e(ce,{});if(c==="customer")return e(de,{});o.useEffect(()=>{m(te("Finance")),m(le(["","/"]))},[m]);const[Y,i]=o.useState(!1),[F,z]=o.useState([]),[s,q]=o.useState({total_day:0,total_week:0,total_month:0,total_year:0,ct_approve_day:0,ct_approve_month:0,ct_approve_year:0,due_today:0,due_month:0,due_year:0,ct_approve_count_day:0,ct_approve_count_month:0,ct_approve_count_year:0,ct_3_to_10:0,ct_10_to_15:0,ct_15_up:0,updated_at:null,total_amount_a:0,ct_amount_a:0,ct_unpaid_a:0,ct_count_appr_a:0,ct_hire_purchase_d:0,ct_hire_purchase_m:0,ct_hire_purchase_y:0,ct_hire_purchase_a:0,quota_limit:0,quota_push:0,quota_reply:0,quota_send:0}),{mutate:p}=B(_.dashboardFindAll,{onSuccess:l=>{var n,g,N,b,y,A,E,T,w,S,I,D,R,C,U,P,O,M,L,k,H,j,G,V,W;q({total_day:((n=l.data)==null?void 0:n.total_amount_d)||0,total_week:((g=l.data)==null?void 0:g.total_amount_w)||0,total_month:((N=l.data)==null?void 0:N.total_amount_m)||0,total_year:((b=l.data)==null?void 0:b.total_amount_y)||0,ct_approve_day:((y=l.data)==null?void 0:y.ct_amount_d)||0,ct_approve_month:((A=l.data)==null?void 0:A.ct_amount_m)||0,ct_approve_year:((E=l.data)==null?void 0:E.ct_amount_y)||0,ct_approve_count_day:((T=l.data)==null?void 0:T.ct_count_appr_d)||0,ct_approve_count_month:((w=l.data)==null?void 0:w.ct_count_appr_m)||0,ct_approve_count_year:((S=l.data)==null?void 0:S.ct_count_appr_y)||0,due_today:((I=l.data)==null?void 0:I.ct_unpaid_d)||0,due_month:((D=l.data)==null?void 0:D.ct_unpaid_m)||0,due_year:((R=l.data)==null?void 0:R.ct_unpaid_y)||0,ct_3_to_10:((C=l.data)==null?void 0:C.ct_status_20)||0,ct_10_to_15:((U=l.data)==null?void 0:U.ct_status_21)||0,ct_15_up:((P=l.data)==null?void 0:P.ct_status_22)||0,updated_at:(O=l.data)==null?void 0:O.updated_at,total_amount_a:((M=l.data)==null?void 0:M.total_amount_a)||0,ct_amount_a:((L=l.data)==null?void 0:L.ct_amount_a)||0,ct_unpaid_a:((k=l.data)==null?void 0:k.ct_unpaid_a)||0,ct_count_appr_a:((H=l.data)==null?void 0:H.ct_count_appr_a)||0,ct_hire_purchase_d:((j=l.data)==null?void 0:j.ct_hire_purchase_d)||0,ct_hire_purchase_m:((G=l.data)==null?void 0:G.ct_hire_purchase_m)||0,ct_hire_purchase_y:((V=l.data)==null?void 0:V.ct_hire_purchase_y)||0,ct_hire_purchase_a:((W=l.data)==null?void 0:W.ct_hire_purchase_a)||0}),i(!1)},onError:()=>{console.error("Failed to fetch dashboard data"),i(!1)}}),{mutate:X,isLoading:Z}=B(_.dailyUpdateDashboard,{onSuccess:l=>{location.reload()},onError:()=>{console.error("Failed to fetch dashboard data"),i(!1)}}),{mutate:x}=se({onSuccess:l=>{z(l.data.list.map(n=>({value:n.id,label:n.name}))),i(!1)},onError:()=>{i(!1)}}),{mutate:Q}=ae(_.lineDevLimet,{method:"get"}),J=()=>{h("/apps/report/pay-to-shop")},r=l=>{const n=v?`&bu_id=${v}`:"";h(`/apps/contract/list-credit?status=${l}${n}`)};return o.useEffect(()=>{if(c==="admin"){i(!0),x({data:{page:1,page_size:100}});const l=pe(new Date().toISOString());Q({params:{date:ie(l).format("YYYYMMDD"),name:"tpl",mode:ue}})}else p({data:{page:1,page_size:100}})},[x]),e(re,{children:e("div",{children:t("div",{className:"pt-5",children:[e("div",{className:"flex flex-wrap ",children:t("div",{className:"flex flex-wrap gap-4 w-full items-start justify-between",children:[t("div",{className:"flex flex-col",children:[e("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:e("li",{children:e(ne,{to:"#",className:"hover:underline text-xl",children:"Dashboard"})})}),t("div",{className:"flex mt-3",children:[" ","ข้อมูลล่าสุดเมื่อ ",_e(s==null?void 0:s.updated_at)," ",t("p",{className:"ml-2 text-blue-500 underline hover:text-blue-700 cursor-pointer",onClick:()=>{X({})},children:[" ","อัปเดต"]})," "]})]}),c==="admin"&&t("div",{children:[e("label",{htmlFor:"ctnSelect1",children:"หน่วยธุรกิจ"}),e(oe,{placeholder:"หน่วยธุรกิจ",className:"z-10 w-[250px]",options:F,isSearchable:!0,onChange:l=>{i(!0),K(l.value),l.value===null?p({data:{page:1,page_size:100}}):p({data:{page:1,page_size:100,id_business_unit:l.value}})}})]})]})}),(Y||Z)&&e(me,{}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 lg:grid-rows-3 gap-3 mt-2",children:[t("div",{className:"flex flex-wrap panel bg-gradient-to-r from-[#4361ee] to-[#160f6b] min-h-[100px] text-white",children:[e("div",{className:"flex-initial w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-xl font-semibold",children:"ยอดเงินวันนี้"})}),e("div",{className:"flex items-center mt-4 w-full",children:t("div",{className:"text-3xl font-bold ltr:mr-3 rtl:ml-3",children:[a(s.total_day,0),e("span",{className:"text-2xl",children:" ฿"})]})})]}),t("div",{className:"lg:row-start-2 lg:row-span-2 flex flex-wrap panel",children:[e("div",{className:"flex flex-wrap w-[100%] mb-2 pb-2",style:{borderBottom:"1px solid #eee"},children:t("div",{className:"ltr:pr-4 rtl:pl-4",children:[e("div",{className:"flex items-baseline font-semibold",children:e("div",{className:"text-md ltr:mr-1 rtl:ml-1",children:"ยอดเงินสัปดาห์"})}),e("div",{className:"flex items-center mt-2 text-success",children:t("div",{className:"min-w-20 text-xl ltr:mr-3 rtl:ml-3",children:[a(s.total_week,0)," ฿"]})})]})}),e("div",{className:"flex flex-wrap w-[100%] mb-2 pb-2",style:{borderBottom:"1px solid #eee"},children:t("div",{className:"ltr:pr-4 rtl:pl-4",children:[e("div",{className:"items-baseline font-semibold",children:e("div",{className:"text-md ltr:mr-1 rtl:ml-1",children:"ยอดเงินเดือนนี้"})}),e("div",{className:"items-center mt-2 text-success",children:t("div",{className:"min-w-20 text-xl ltr:mr-3 rtl:ml-3",children:[a(s.total_month,0)," ฿"]})})]})}),e("div",{className:"flex flex-wrap w-[100%] mb-2 pb-2",style:{borderBottom:"1px solid #eee"},children:t("div",{className:"ltr:pr-4 rtl:pl-4",children:[e("div",{className:"flex items-baseline font-semibold",children:e("div",{className:"text-md ltr:mr-1 rtl:ml-1",children:"ยอดเงินปีนี้"})}),e("div",{className:"flex items-center mt-2 text-success",children:t("div",{className:"min-w-20 text-xl ltr:mr-3 rtl:ml-3",children:[a(s.total_year,0)," ฿"]})})]})}),e("div",{className:"flex flex-wrap w-[100%] pb-2",style:{borderBottom:"1px solid #eee"},children:t("div",{className:"ltr:pr-4 rtl:pl-4",children:[e("div",{className:"flex items-baseline font-semibold",children:e("div",{className:"text-md ltr:mr-1 rtl:ml-1",children:"ยอดเงินทั้งหมด"})}),e("div",{className:"flex items-center mt-2 text-success",children:t("div",{className:"min-w-20 text-xl ltr:mr-3 rtl:ml-3",children:[a(s.total_amount_a,0)," ฿"]})})]})}),e("div",{className:"flex flex-wrap w-[100%] items-center pt-3",children:e("div",{className:"w-[100%] text-center",children:e("a",{role:"button",className:"btn btn-sm btn-primary w-auto",style:{display:"inline-block"},onClick:()=>J(),children:"ดูเพิ่มเติม"})})})]}),t("div",{className:"flex flex-wrap w-full panel",children:[e("div",{className:"flex-initial w-full",children:t("div",{className:"flex items-center",children:[e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:"สัญญาที่อนุมัติ (รวมเป็นเงิน)"}),e(d,{content:"จำนวนเงินในสัญญา ได้แก่ ราคาสินค้า เงินดาวน์ และยอดเช่าซื้อ ",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]})}),t("div",{className:"flex items-center mt-5 w-full",children:[t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"ปีนี้"}),e("div",{className:"flex items-center mt-1 w-full",children:t("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:[a(s.ct_approve_year,0)," ฿"]})})]}),t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"เดือนนี้"}),e("div",{className:"flex items-center mt-1 w-full",children:t("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:[a(s.ct_approve_month,0)," ฿"]})})]}),t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"ทั้งหมด"}),e("div",{className:"flex items-center mt-1 w-full",children:t("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:[a(s.ct_amount_a,0)," ฿"]})})]})]})]}),t("div",{className:"xl:row-start-2 xl:col-start-2 flex flex-wrap w-full panel",children:[e("div",{className:"flex-initial w-full",children:t("div",{className:"flex items-center",children:[e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:"จำนวนสัญญาที่อนุมัติ"}),e(d,{content:"จำนวนสัญญาที่อนุมัติ (นับวันที่อนุมัติ) ตามระยะเวลา",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]})}),t("div",{className:"flex items-center mt-5 w-full",children:[t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"ปีนี้"}),e("div",{className:"flex items-center mt-1 w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:a(s.ct_approve_count_year,0)})})]}),t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"เดือนนี้"}),e("div",{className:"flex items-center mt-1 w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:a(s.ct_approve_count_month,0)})})]}),t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"ทั้งหมด"}),e("div",{className:"flex items-center mt-1 w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:a(s.ct_count_appr_a,0)})})]})]})]}),t("div",{className:"xl:row-start-3 xl:col-start-2 flex flex-wrap w-full panel",children:[e("div",{className:"flex-initial w-full",children:t("div",{className:"flex items-center",children:[e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:"สัญญาค้างชำระ"}),e(d,{content:"สัญญาที่ครบกำหนดชำระแล้วอยู่ระหว่างการรอชำระหรือตรวจสอบบัญชี",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2"})})]})}),t("div",{className:"flex items-center mt-5 w-full",children:[t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"ปีนี้"}),e("div",{className:"flex items-center mt-1 w-full",children:t("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:[a(s.due_year,0)," ฿"]})})]}),t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"เดือนนี้"}),e("div",{className:"flex items-center mt-1 w-full",children:t("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:[a(s.due_month,0)," ฿"]})})]}),t("div",{className:"flex flex-wrap w-[50%]",children:[e("div",{className:"text-sm",children:"ทั้งหมด"}),e("div",{className:"flex items-center mt-1 w-full",children:t("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:[a(s.ct_unpaid_a,0)," ฿"]})})]})]})]}),t("div",{className:"xl:col-start-3 flex flex-wrap w-full panel bg-gradient-to-r from-[#f5704a] to-[#da4a24] text-white",children:[e("div",{className:"flex flex-wrap justify-center w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:"สัญญาที่อนุมัติวันนี้"})}),e("div",{className:"flex items-center justify-center w-full",children:t("div",{className:"text-4xl font-bold ltr:mr-3 rtl:ml-3",children:[a(s.ct_approve_day,0),e("span",{className:"text-2xl",children:" ฿"})]})})]}),t("div",{className:"flex flex-wrap w-full panel bg-gradient-to-r from-[#f5704a] to-[#da4a24] text-white",children:[e("div",{className:"flex flex-wrap justify-center w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:"จำนวนสัญญาที่อนุมัติวันนี้"})}),e("div",{className:"flex items-center justify-center w-full",children:e("div",{className:"text-4xl font-bold ltr:mr-3 rtl:ml-3",children:a(s.ct_approve_count_day,0)})})]}),t("div",{className:"lg:col-span-2 xl:col-span-1 flex flex-wrap w-full panel bg-gradient-to-r from-[#f5704a] to-[#da4a24] text-white",children:[e("div",{className:"flex flex-wrap justify-center w-full",children:e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:"สัญญาค้างชำระวันนี้"})}),e("div",{className:"flex items-center justify-center w-full",children:t("div",{className:"text-4xl font-bold ltr:mr-3 rtl:ml-3",children:[a(s.due_today,0),e("span",{className:"text-2xl",children:" ฿"})]})})]})]}),e("div",{className:"flex flex-wrap pt-5",children:e("div",{className:"flex flex-wrap gap-4 w-full panel",children:t("div",{className:"input-container",children:[t("div",{className:"flex items-center",children:[e("div",{className:"ltr:mr-1 rtl:ml-1 text-lg font-semibold",children:e("label",{style:{fontWeight:"600"},children:"วงเงินเช่าซื้อ"})}),e(d,{content:"จำนวนเงิน เฉพาะค่าเช่าซื้อที่ไม่รวมเงินดาวน์",placement:"right",children:e("img",{src:"/assets/images/information.png",alt:"Info",className:"cursor-pointer w-5 h-5 ml-2 mb-1"})})]}),t("div",{className:"flex flex-wrap pt-2",children:[e("div",{className:"flex flex-wrap lg:w-1/4 md:w-full items-center py-3",children:e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("20"),children:[e("label",{style:{fontWeight:"400"},children:"วันนี้"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_hire_purchase_d,0)})]})})}),e("div",{className:"flex flex-wrap lg:w-1/4 md:w-full items-center py-3",children:e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("21"),children:[e("label",{style:{fontWeight:"400"},children:"เดือนนี้"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_hire_purchase_m,0)})]})})}),e("div",{className:"flex flex-wrap lg:w-1/4 md:w-full items-center py-3",children:e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("22"),children:[e("label",{style:{fontWeight:"400"},children:"ปีนี้"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_hire_purchase_y,0)})]})})}),e("div",{className:"flex flex-wrap lg:w-1/4 md:w-full items-center py-3",children:e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("22"),children:[e("label",{style:{fontWeight:"400"},children:"ทั้งหมด"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_hire_purchase_a,0)})]})})})]})]})})}),e("div",{className:"flex flex-wrap pt-5",children:e("div",{className:"flex flex-wrap gap-4 w-full panel",children:t("div",{className:"input-container",children:[e("label",{style:{fontWeight:"600"},children:"จำนวนสัญญาที่เกินกำหนด"}),t("div",{className:"flex flex-wrap pt-2",children:[t("div",{className:"flex flex-wrap lg:w-2/6 md:w-full items-center py-3",children:[e("div",{className:"shrink-0 w-10 h-10 rounded-full grid place-content-center text-white",style:{backgroundColor:"rgb(247, 147, 26)"},children:"3"}),e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("20"),children:[e("label",{style:{fontWeight:"400"},children:"สัญญาเกินสถานะ (20)"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_3_to_10,0)})]})})]}),t("div",{className:"flex flex-wrap lg:w-2/6 md:w-full items-center py-3",children:[e("div",{className:"shrink-0 w-10 h-10 rounded-full grid place-content-center text-white",style:{backgroundColor:"rgb(247, 147, 26)"},children:"10"}),e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("21"),children:[e("label",{style:{fontWeight:"400"},children:"สัญญาเกินสถานะ (21)"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_10_to_15,0)})]})})]}),t("div",{className:"flex flex-wrap lg:w-2/6 md:w-full items-center py-3",children:[e("div",{className:"shrink-0 w-10 h-10 rounded-full grid place-content-center text-white",style:{backgroundColor:"rgb(247, 147, 26)"},children:"15"}),e("div",{className:"pl-3 pb-2",children:t("a",{className:"link",onClick:()=>r("22"),children:[e("label",{style:{fontWeight:"400"},children:"สัญญาเกินสถานะ (22)"}),e("p",{style:{fontSize:"1.8rem"},children:a(s.ct_15_up,0)})]})})]})]})]})})}),e("div",{className:"flex flex-wrap pt-5",children:e("div",{className:"flex flex-wrap gap-4 w-full panel",children:t("div",{className:"input-container",children:[e("label",{className:"font-semibold",children:"ลิมิตการแจ้งเตือน Line"}),t("div",{className:"flex justify-between px-3 py-4",children:[t("div",{className:"flex-1",children:[e("p",{children:"ลิมิต"}),e("p",{className:"text-2xl",children:s.quota_limit})]}),t("div",{className:"flex-1",children:[e("p",{children:"ส่งข้อความ"}),e("p",{className:"text-2xl",children:s.quota_send})]}),t("div",{className:"flex-1",children:[e("p",{children:"ตอบกลับข้อความ"}),e("p",{className:"text-2xl",children:s.quota_reply})]}),t("div",{className:"flex-1",children:[e("p",{children:"บอทส่งข้อความ"}),e("p",{className:"text-2xl",children:s.quota_push})]})]})]})})})]})})})};export{Le as default};
