import{a as k,u as M,r as s,s as L,b as H,f as r,F as j,j as e}from"./index-a90aa29c.js";import{c as w,a as b}from"./object-7405de1d.js";import{S as F}from"./sweetalert2.all-ca2d1030.js";import{t as V}from"./constant-e85f1578.js";import{P as A}from"./config-8de56c22.js";import{F as G,a as K}from"./formik.esm-c4fd04ca.js";import{Q as B}from"./index-2f30bf27.js";import{B as W}from"./breadcrumbs-b9914bbc.js";import{I as y}from"./InputField-d7971719.js";import{I as Y}from"./IconX-54a3093e.js";import{I as X}from"./IconPlus-4c7e79c8.js";import{I as q}from"./IconEye-eb8ead5b.js";import{q as m,_ as v}from"./transition-d4ca4cfa.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./keyboard-f171a3e5.js";import"./use-is-mounted-22b05dcc.js";import"./bugs-a60d55c3.js";const z="admin";F.mixin(V);const ye=()=>{const d=k(),E=M();s.useState([]);const n=localStorage.getItem(z),_=n?JSON.parse(n).role:null;n&&JSON.parse(n??"{}").access_level;const[f,h]=s.useState(1),[S,T]=s.useState(A[0]),[I,P]=s.useState(0),[p,l]=s.useState(!1),C=[{to:"/apps/employee/list",label:"พนักงาน"},{to:"/apps/permission/check",label:"จัดการสิทธิ์ผู้ใช้งาน"},{label:"ผู้ใช้งาน",isCurrent:!0}];_!="admin"&&_!="business_unit"&&E("/");const[i,c]=s.useState({action:"add",name:"",price:""}),[u,Q]=s.useState([{name:"Super Admin",price:3e4},{name:"Admin",price:45e3},{name:"IT Support",price:69e3},{name:"Standard User",price:15e3}]),[D,R]=s.useState({columnAccessor:"",direction:"asc"}),[U,Z]=s.useState(i),N=w().shape({name:b().required("กรุณาใส่ข้อมูลให้ครบ"),price:b().required("กรุณาใส่ข้อมูลให้ครบ")}),O=s.useCallback(t=>{console.log(t)},[i]),g=t=>{l(!0),c({action:"edit",name:t.name,price:t.price})};return s.useEffect(()=>{d(L("เพิ่มผู้ใช้งาน")),d(H(["employee","/apps/permission/check"]))},[]),s.useEffect(()=>{P(u.length)},[i,p]),r(j,{children:[e(W,{items:C}),r("div",{className:"panel px-0 mt-5 border-white-light dark:border-[#1b2e4b]",children:[r("div",{className:"invoice-table ",children:[e("div",{className:"mb-4.5 px-5 flex md:items-center md:flex-row flex-col gap-5",children:e("div",{className:"flex items-center gap-2",children:r("a",{className:"btn btn-primary gap-2",onClick:()=>l(!0),children:[e(X,{}),"เพิ่มสิทธิ์ผู้ใช้งาน"]})})}),e("div",{className:"datatables pagination-padding",children:e(B,{className:"whitespace-nowrap table-hover invoice-table",records:u,columns:[{accessor:"id",title:"ลำดับ",sortable:!1,textAlignment:"center",render:(t,a)=>e("div",{children:a+1})},{accessor:"name",title:"ผู้ใช้งาน",sortable:!1,render:t=>e("div",{className:"flex items-center justify-start font-normal",children:e("a",{className:"flex cursor-pointer active",onClick:()=>g(t),children:e("div",{children:t.name})})})},{accessor:"action",title:"Actions",textAlignment:"center",sortable:!1,render:t=>e("div",{className:"flex gap-4 items-center w-max mx-auto",children:e("a",{className:"flex cursor-pointer active",onClick:()=>g(t),children:e(q,{})})})}],page:f,totalRecords:I,recordsPerPage:S,highlightOnHover:!0,onPageChange:t=>h(t),recordsPerPageOptions:A,onRecordsPerPageChange:t=>{h(1),T(t)},sortStatus:D,onSortStatusChange:R,paginationText:({from:t,to:a,totalRecords:o})=>`โชว์ ${t} ถึง ${a} ของ ${o} หน้าทั้งหมด`})})]}),e(m,{appear:!0,show:p,as:s.Fragment,children:r(v,{as:"div",open:p,onClose:()=>l(!1),className:"relative z-[51]",children:[e(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r(v.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>l(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(Y,{})}),r("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:[i.action=="add"?"เพิ่ม":"แก้ไข","ผู้ใช้งาน"]}),e("div",{className:"p-5",children:e(G,{initialValues:U,onSubmit:O,enableReinitialize:!0,autoComplete:"off",validationSchema:N,children:t=>r(K,{className:"space-y-5 mb-2 dark:text-white custom-select",children:[e(y,{label:"ชื่อผู้ใช้งาน",name:"name",placeholder:"กรุณาใส่ข้อมูล",value:i.name,onChange:a=>{t.setFieldValue("name",a.target.value),c(o=>({...o,name:a.target.value}))}}),e(y,{label:"ราคา",name:"price",placeholder:"กรุณาใส่ข้อมูล",value:i.price,onChange:a=>{let o=a.target.value.replace(/\D/g,"");t.setFieldValue("price",o),c(x=>({...x,price:o}))},onKeyPress:a=>{if(a.key==="Enter"){a.preventDefault();return}/[0-9]/.test(a.key)||a.preventDefault()}}),e("div",{className:"flex justify-center items-center mt-5",children:e("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:i.action=="add"?"บันทึก":"อัพเดท"})})]})})})]})})})})]})})]})]})};export{ye as default};
