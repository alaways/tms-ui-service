import{a as x,u as O,r as s,s as M,b as L,f as r,F as H,j as e}from"./index-a90aa29c.js";import{c as j,a as y}from"./object-7405de1d.js";import{S as w}from"./sweetalert2.all-ca2d1030.js";import{t as F}from"./constant-e85f1578.js";import{P as b}from"./config-8de56c22.js";import{F as V,a as G}from"./formik.esm-c4fd04ca.js";import{Q as K}from"./index-2f30bf27.js";import{B}from"./breadcrumbs-b9914bbc.js";import{I as A}from"./InputField-d7971719.js";import{I as W}from"./IconX-54a3093e.js";import{I as Y}from"./IconPlus-4c7e79c8.js";import{I as X}from"./IconEye-eb8ead5b.js";import{q as m,_ as v}from"./transition-d4ca4cfa.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./keyboard-f171a3e5.js";import"./use-is-mounted-22b05dcc.js";import"./bugs-a60d55c3.js";const q="admin";w.mixin(F);const be=()=>{const d=x(),f=O();s.useState([]);const n=localStorage.getItem(q),_=n?JSON.parse(n).role:null;n&&JSON.parse(n??"{}").access_level;const[E,u]=s.useState(1),[S,T]=s.useState(b[2]),[I,P]=s.useState(0),[c,l]=s.useState(!1),C=[{to:"/apps/employee/list",label:"พนักงาน"},{to:"/apps/permission/check",label:"จัดการสิทธิ์ผู้ใช้งาน"},{label:"สิทธิ์ผู้ใช้งาน",isCurrent:!0}];_!="admin"&&_!="business_unit"&&f("/");const[i,p]=s.useState({action:"add",key:"",title:""}),[h,z]=s.useState([{key:"menu_count",title:"จำนวนเมนู (เมนูหลัก)"},{key:"design_slide",title:"ออกแบบภาพสไลด์หน้าแรก"},{key:"design_cover",title:"ออกแบบภาพนิ่งหน้าใน"},{key:"limit_editor",title:"ปรับแก้แบบดีไซน์"},{key:"support_mobile",title:"รองรับ Desktop, Mobile, Tablet"},{key:"add_data",title:"ลงข้อมูล"},{key:"add_product",title:"ลงข้อมูลสินค้า/บทความ"},{key:"contact_form",title:"ฟอร์มติดต่อ (Contract Form)"},{key:"support_language",title:"รองรับภาษา"},{key:"free_domain",title:"ฟรี จดโดเมนเว็บไซต์ + โฮสติ้ง"},{key:"free_ssl",title:"ฟรี ตืดตั้ง SSL"}]),[R,k]=s.useState({columnAccessor:"",direction:"asc"}),[D,Q]=s.useState(i),N=j().shape({key:y().required("กรุณาใส่ข้อมูลให้ครบ"),title:y().required("กรุณาใส่ข้อมูลให้ครบ")}),U=s.useCallback(t=>{console.log(t)},[i]),g=t=>{l(!0),p({action:"edit",key:t.key,title:t.title})};return s.useEffect(()=>{d(M("เพิ่มสิทธิ์ผู้ใช้งาน")),d(L(["employee","/apps/permission/check"]))},[]),s.useEffect(()=>{P(h.length)},[i,c]),r(H,{children:[e(B,{items:C}),r("div",{className:"panel px-0 mt-5 border-white-light dark:border-[#1b2e4b]",children:[r("div",{className:"invoice-table ",children:[e("div",{className:"mb-4.5 px-5 flex md:items-center md:flex-row flex-col gap-5",children:e("div",{className:"flex items-center gap-2",children:r("a",{className:"btn btn-primary gap-2",onClick:()=>l(!0),children:[e(Y,{}),"เพิ่มสิทธิ์ผู้ใช้งาน"]})})}),e("div",{className:"datatables pagination-padding",children:e(K,{className:"whitespace-nowrap table-hover invoice-table",records:h,columns:[{accessor:"id",title:"ลำดับ",sortable:!1,textAlignment:"center",render:(t,a)=>e("div",{children:a+1})},{accessor:"title",title:"หัวข้อ",sortable:!1,render:t=>e("div",{className:"flex items-center justify-start font-normal",children:e("a",{className:"flex cursor-pointer active",onClick:()=>g(t),children:e("div",{children:t.title})})})},{accessor:"key",title:"คีย์",sortable:!1,render:t=>e("div",{className:"flex items-center justify-start font-normal",children:e("div",{children:t.key})})},{accessor:"action",title:"Actions",textAlignment:"center",sortable:!1,render:t=>e("div",{className:"flex gap-4 items-center w-max mx-auto",children:e("a",{className:"flex cursor-pointer active",onClick:()=>g(t),children:e(X,{})})})}],page:E,totalRecords:I,recordsPerPage:S,highlightOnHover:!0,onPageChange:t=>u(t),recordsPerPageOptions:b,onRecordsPerPageChange:t=>{u(1),T(t)},sortStatus:R,onSortStatusChange:k,paginationText:({from:t,to:a,totalRecords:o})=>`โชว์ ${t} ถึง ${a} ของ ${o} หน้าทั้งหมด`})})]}),e(m,{appear:!0,show:c,as:s.Fragment,children:r(v,{as:"div",open:c,onClose:()=>l(!1),className:"relative z-[51]",children:[e(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r(v.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>l(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(W,{})}),r("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:[i.action=="add"?"เพิ่ม":"แก้ไข","สิทธิ์ผู้ใช้งาน"]}),e("div",{className:"p-5",children:e(V,{initialValues:D,onSubmit:U,enableReinitialize:!0,autoComplete:"off",validationSchema:N,children:t=>r(G,{className:"space-y-5 mb-2 dark:text-white custom-select",children:[e(A,{label:"หัวข้อ",name:"title",placeholder:"กรุณาใส่ข้อมูล",value:t.values.title!==""?t.values.title:i.title,onChange:a=>{t.setFieldValue("title",a.target.value),p(o=>({...o,title:a.target.value}))}}),e(A,{label:"คีย์",name:"key",placeholder:"กรุณาใส่ข้อมูล",value:t.values.key!==""?t.values.key:i.key,onChange:a=>{t.setFieldValue("title",a.target.value),p(o=>({...o,title:a.target.value}))},onKeyPress:a=>{if(a.key==="Enter"){a.preventDefault();return}}}),e("div",{className:"flex justify-center items-center mt-5",children:e("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:i.action=="add"?"บันทึก":"อัพเดท"})})]})})})]})})})})]})})]})]})};export{be as default};
