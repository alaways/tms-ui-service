import{u as z,a as D,r as n,s as A,c as o,j as e,f as s,L as R,g as d}from"./index-a90aa29c.js";import{d as U,g as V,t as I}from"./constant-e85f1578.js";import{u as M,G as P}from"./esm-fca376a3.js";import{F as g,a as B}from"./formik.esm-c4fd04ca.js";import{I as i}from"./InputField-d7971719.js";import{S as m}from"./SelectField-917481a8.js";import{S as K}from"./sweetalert2.all-ca2d1030.js";import{c as $,a as r,d as O}from"./object-7405de1d.js";import"./react-select.esm-b46d9623.js";import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./lodash-f7ec5310.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";const oe=()=>{const b=z(),h=D();n.useEffect(()=>{h(A("ลงทะเบียนร้านค้า"))});const[f,x]=n.useState([]),[_,v]=n.useState([]),[w,N]=n.useState([]),[c]=n.useState({id_shop_group:"",id_business_unit:"",name:"",password:"",password_repeat:"",contact_name:"",phone_number:"",line_id:"",facebook_id:"",website:"",email:"",address:"",id_province:"",latitude:"",longitude:"",bank_no:""}),S=$().shape({name:r().required("กรุณาใส่ข้อมูลให้ครบ"),id_shop_group:r().required("กรุณาใส่ข้อมูลให้ครบ"),id_business_unit:r().required("กรุณาใส่ข้อมูลให้ครบ"),id_province:r().required("กรุณาใส่ข้อมูลให้ครบ"),email:r().email("กรุณาใส่อีเมลที่ถูกต้อง").required("กรุณาใส่ข้อมูลให้ครบ"),password:r().required("กรุณาใส่ข้อมูลให้ครบ"),password_repeat:r().oneOf([O("password"),null],"รหัสผ่านไม่ตรงกัน").required("กรุณาใส่ข้อมูลให้ครบ")}),{mutate:y,isLoading:k}=o(d.provincesFindAllGuest,{onSuccess:t=>{N(t.data.map(a=>({value:a.id,label:a.name})))}}),{mutate:L,isLoading:F}=o(d.businessUnitFindAllGuest,{onSuccess:t=>{v(t.data.map(a=>({value:a.id,label:a.name})))},onError:t=>{}}),{mutate:C,isLoading:G}=o(d.shopGroupFindAllGuest,{onSuccess:t=>{x(t.data.map(a=>({value:a.id,label:a.name})))},onError:t=>{}}),{mutate:j}=o(d.shopRegister,{onSuccess:t=>{K.mixin(I).fire({icon:"success",title:"ลงทะเบียนร้านค้าสำเร็จ โปรดรออนุมัติจากเจ้าหน้าที่",padding:"10px 20px"}),b("/apps/shop/list")},onError:t=>{}});n.useEffect(()=>{L({page:1,page_size:-1}),C({page:1,page_size:-1}),y({page:1,page_size:-1})},[]);const{isLoaded:E}=M({googleMapsApiKey:V}),p=(t,a,l)=>{t.setFieldValue(l,a.value)},u=n.useCallback(t=>{j({data:{...t,is_approved:!1,is_active:!0}})},[c]),q=(t,a)=>{t.setFieldValue("latitude",a.latLng.lat().toString()),t.setFieldValue("longitude",a.latLng.lng().toString())};return!E||G||F||k?e("div",{children:"Loading..."}):s("div",{children:[e("div",{className:"absolute inset-0",children:e("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),s("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat px-6 py-10 dark:bg-[#060818] sm:px-16",children:[e("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"image",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2"}),e("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"image",className:"absolute left-24 top-0 h-40 md:left-[30%]"}),e("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"image",className:"absolute right-0 top-0 h-[300px]"}),e("img",{src:"/assets/images/auth/polygon-object.svg",alt:"image",className:"absolute bottom-0 end-[28%]"}),e("div",{className:"relative w-full max-w-[1502px] rounded-md bg-[linear-gradient(45deg,#fff9f9_0%,rgba(255,255,255,0)_25%,rgba(255,255,255,0)_75%,_#fff9f9_100%)] dark:bg-[linear-gradient(52.22deg,#0E1726_0%,rgba(14,23,38,0)_18.66%,rgba(14,23,38,0)_51.04%,rgba(14,23,38,0)_80.07%,#0E1726_100%)]",children:e("div",{className:"relative flex flex-col justify-center rounded-md bg-white/60 backdrop-blur-lg dark:bg-black/50 px-6 lg:min-h-[758px] py-10",children:s("div",{className:"mx-auto w-full max-w-[1080px]",children:[s("div",{className:"mb-5",children:[e("h1",{className:"text-3xl font-extrabold uppercase !leading-snug text-primary md:text-4xl",children:"ลงทะเบียนร้านค้า"}),e("p",{className:"text-base font-bold leading-normal text-white-dark",children:"กรอกข้อมูลให้ครบถ้วน"})]}),e(g,{initialValues:c,onSubmit:u,enableReinitialize:!0,autoComplete:"off",children:t=>e(g,{initialValues:c,onSubmit:u,enableReinitialize:!0,autoComplete:"off",validationSchema:S,children:a=>s(B,{className:"space-y-5 dark:text-white ",children:[e("div",{className:"input-flex-row",children:e(i,{label:"ชื่อร้าน",name:"name",type:"text"})}),s("div",{className:"input-flex-row",children:[e(m,{label:"กลุ่มร้าน",id:"id_shop_group",name:"id_shop_group",options:f,placeholder:"กรุณาเลือก",onChange:l=>p(a,l,"id_shop_group"),isSearchable:!1}),e(m,{label:"หน่วยธุรกิจ",id:"id_business_unit",name:"id_business_unit",options:_,placeholder:"กรุณาเลือก",onChange:l=>p(a,l,"id_business_unit"),isSearchable:!1})]}),s("div",{className:"input-flex-row",children:[e(i,{label:"รหัสผ่าน",name:"password",type:"password"}),e(i,{label:"ยืนยันรหัสผ่าน",name:"password_repeat",type:"password"})]}),s("div",{className:"input-flex-row",children:[e(i,{label:"ชื่อผู้ติดต่อหลัก",name:"contact_name",type:"text"}),e(i,{label:"เบอร์โทรศัพท์ร้าน",name:"phone_number",type:"text"})]}),s("div",{className:"input-flex-row",children:[e(i,{label:"Line ID",name:"line_id",type:"text"}),e(i,{label:"Facebook ID",name:"facebook_id",type:"text"})]}),s("div",{className:"input-flex-row",children:[e(i,{label:"เว็บไซต์",name:"website",type:"text"}),e(i,{label:"อีเมล",name:"email",type:"text"})]}),s("div",{className:"input-flex-row",children:[e(i,{label:"ที่อยู่",name:"address",as:"textarea",rows:"1",placeholder:"กรุณาใส่ข้อมูล",className:"form-textarea ltr:rounded-l-none rtl:rounded-r-none resize-none"}),e(m,{label:"จังหวัด",id:"id_province",name:"id_province",options:w,placeholder:"กรุณาเลือก",onChange:l=>p(a,l,"id_province"),isSearchable:!1})]}),e("div",{className:"input-flex-row",children:e(i,{label:"บช. ร้านค้า",name:"bank_no",type:"text"})}),s("div",{className:"input-flex-row",children:[e(i,{label:"Latitude",name:"latitude",type:"text"}),e(i,{label:"Longitude",name:"longitude",type:"text"})]}),e("div",{className:"input-flex-row mb-3",children:e(P,{mapContainerStyle:{height:"400px",width:"100%"},zoom:13,center:U,onClick:l=>q(a,l)})}),e("button",{type:"submit",className:"btn !mt-6 w-full border-0 btn-primary",children:"เพิ่ม"})]})})}),s("div",{className:"mt-7 text-center dark:text-white",children:["มีบัญชีร้านค้าแล้วต้องการเข้าสู่ระบบ? ",e(R,{to:"/apps/login",className:"uppercase text-primary underline transition hover:text-black dark:hover:text-white",children:"ล็อกอิน"})]})]})})})]})]})};export{oe as default};
