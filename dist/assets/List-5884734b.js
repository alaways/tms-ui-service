import{ak as N,a as C,u as D,r as a,s as x,b as O,d as L,j as s,f as c,L as M,v as w,at as k}from"./index-a90aa29c.js";import{d as H}from"./debounce-5af6d14d.js";/* empty css              */import{T as j}from"./tippy-react.esm-150a8dd6.js";import{I as G}from"./IconPlus-4c7e79c8.js";import{I as V}from"./IconEye-eb8ead5b.js";import{s as B}from"./showNotification-b9615e49.js";import{Q as K}from"./index-2f30bf27.js";import{c as F,b as W}from"./formatNumeric-862380d6.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";import"./sweetalert2.all-ca2d1030.js";import"./floating-ui.dom-0aeb9e8a.js";const Y="admin",oe=()=>{const{t}=N(),d=C(),m=D(),r=localStorage.getItem(Y),_=r?JSON.parse(r).role:null;if(_!=="admin"&&_!=="business_unit"&&m("/"),_==="business_unit"){const e=r?JSON.parse(r??"{}").id_business_unit:null;m("/apps/business-unit/preview/"+e)}const[i,f]=a.useState("");a.useState([]);const b=[10,20,30,50,100],[o,l]=a.useState(1),[n,E]=a.useState(b[0]),[S,T]=a.useState({columnAccessor:"",direction:"asc"});a.useState(9999);const[y,v]=a.useState(0),[P,A]=a.useState([]);a.useEffect(()=>{d(x(t("business_unit_list"))),d(O(["bu","/apps/business-unit/list"]))},[]);const{mutate:p,isLoading:$}=L({onSuccess:e=>{A(e.data.list),v(e.data.total)},onError:()=>{I("Failed to fetch business units")}});a.useEffect(()=>{A([]),p({data:{page:o,page_size:n,query:i}})},[o]),a.useEffect(()=>{l(1),p({data:{page:1,page_size:n,query:i}})},[n]);const u=a.useMemo(()=>H(e=>{p({data:{page:1,page_size:n,query:e}})},500),[p,n]);a.useEffect(()=>(u(i),()=>{u.cancel()}),[i,u]);const I=e=>{B(e,"error")},R=e=>{l(1),f(e.target.value)},h=e=>{d(k(e)),m("/apps/business-unit/preview/"+e.id)};return s("div",{children:c("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[s("div",{className:"flex items-center justify-between flex-wrap gap-4 mb-4.5 px-5 ",children:s("h2",{className:"text-xl",children:t("business_unit")})}),c("div",{className:"flex items-center justify-between flex-wrap gap-4 mb-4.5 px-5 ",children:[s("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:s("div",{className:"flex gap-3",children:c(M,{to:"/apps/business-unit/add",className:"btn btn-primary gap-2",children:[s(G,{}),t("add_business_unit")]})})}),s("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:c("div",{className:"relative",children:[s("input",{type:"text",placeholder:t("search"),className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:i,onChange:R}),s("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:s(w,{className:"mx-auto"})})]})})]}),s("div",{className:"datatables pagination-padding",children:s(K,{className:"whitespace-nowrap table-hover invoice-table",records:P,columns:[{accessor:"index",title:t("order"),textAlignment:"center",render:(e,g)=>g+1+(o-1)*n},{accessor:"name",title:t("business_name"),textAlignment:"left",sortable:!1,render:e=>s("div",{className:"flex items-center font-normal",children:s("a",{className:"active",onClick:()=>h(e),children:e==null?void 0:e.name})})},{accessor:"tax_id",title:t("tax_id"),textAlignment:"left",sortable:!1,render:({tax_id:e})=>s("div",{className:"flex items-center font-normal",children:s("div",{children:F(e??"-")})})},{accessor:"phone",title:t("customer_phone"),textAlignment:"left",sortable:!1,render:({phone:e})=>s("div",{className:"flex items-center font-normal",children:s("div",{children:W(e??"-")})})},{accessor:"province",title:t("address"),textAlignment:"left",sortable:!1,render:({province:e})=>s("div",{className:"flex items-center font-normal",children:s("div",{children:e==null?void 0:e.name_th})})},{accessor:"verify",title:t("settings"),textAlignment:"center",sortable:!1,render:e=>s("span",{className:`badge ${e?"badge-outline-success":"badge-outline-danger"}`,children:t(e?"completed":"incomplete_data")})},{accessor:"action",title:t("actions"),textAlignment:"center",sortable:!1,render:e=>s("div",{className:"flex gap-4 items-center w-max mx-auto",children:s(j,{content:t("view_data"),theme:"Primary",children:s("a",{className:"flex hover:text-info cursor-pointer active",onClick:()=>h(e),children:s(V,{className:"w-4.5 h-4.5"})})})})}],page:o,highlightOnHover:!0,totalRecords:y,recordsPerPage:n,onPageChange:e=>l(e),recordsPerPageOptions:b,onRecordsPerPageChange:e=>{l(1),E(e)},sortStatus:S,onSortStatusChange:T,paginationText:({from:e,to:g,totalRecords:U})=>`${t("showing")} ${e} ${t("to")} ${g} ${t("of")} ${U} ${t("total_pages")}`,onCellClick:e=>{e.column.accessor==="name"&&h(e.record)}})})]})})};export{oe as default};
