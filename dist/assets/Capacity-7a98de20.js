import{a as w,u as H,r as s,s as j,c as i,j as t,f as a,v as F,g as l}from"./index-a90aa29c.js";import{c as V,a as G}from"./object-7405de1d.js";import{d as K}from"./debounce-5af6d14d.js";import{F as B,a as W}from"./formik.esm-c4fd04ca.js";import{I as Y}from"./InputField-d7971719.js";import{S as X}from"./SelectField-917481a8.js";import{Q as z}from"./index-2f30bf27.js";import{P as f,D as q}from"./config-8de56c22.js";import{s as A}from"./showNotification-b9615e49.js";import{T as J}from"./tippy-react.esm-150a8dd6.js";import{I as Q}from"./IconX-54a3093e.js";import{I as Z}from"./IconEdit-bf2b08f0.js";import{I as $}from"./IconPlus-4c7e79c8.js";/* empty css              */import{q as m,_ as E}from"./transition-d4ca4cfa.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";import"./react-select.esm-b46d9623.js";import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./lodash-f7ec5310.js";import"./sweetalert2.all-ca2d1030.js";import"./keyboard-f171a3e5.js";import"./use-is-mounted-22b05dcc.js";import"./bugs-a60d55c3.js";const ee="admin",v={id:"",name:"",description:"",is_active:!0},Re=()=>{const d=w(),_=H();s.useEffect(()=>{d(j("ประเภทความจุ"))},[d]);const u=localStorage.getItem(ee),h=u?JSON.parse(u).role:null;s.useEffect(()=>{h!=="admin"&&_("/")},[h,_]);const[g,o]=s.useState(!1),[c,T]=s.useState(v),[S,I]=s.useState("");s.useState([]);const[P,C]=s.useState([]),[p,b]=s.useState(1),[n,N]=s.useState(f[0]),[R,te]=s.useState(0),D=V().shape({name:G().required("กรุณาใส่ข้อมูลให้ครบ")}),{mutate:U}=i(l.insuranceTypesFindAll,{onSuccess:e=>{},onError:()=>{console.error("Failed to fetch asset type data")}});s.useEffect(()=>{},[p]),s.useEffect(()=>{},[n]),s.useMemo(()=>K(e=>{},q.FAST),[U,n]);const{mutate:x}=i(l.capacityFindAll,{onSuccess:e=>{C(e.data.list)},onError:()=>{console.error("Failed to fetch asset capacity data")}});s.useEffect(()=>{x({data:{page:p,page_size:n,id_asset_type:1}})},[]);const{mutate:O}=i(l.insuranceTypesCreate,{onSuccess:e=>{},onError:e=>{A(e.message,"error")}}),{mutate:M}=i(l.insuranceTypesUpdate,{onSuccess:e=>{},onError:e=>{A(e.message,"error")}}),k=s.useCallback(e=>{},[O,M]),y=(e=null)=>{T(e?JSON.parse(JSON.stringify(e)):v),o(!0)};return t("div",{children:a("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4 mb-4.5 px-5 ",children:[t("h2",{className:"text-xl",children:"ประเภทความจุ"}),a("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[t("div",{className:"flex gap-3",children:a("button",{type:"button",className:"btn btn-primary",onClick:()=>y(),children:[t($,{className:"ltr:mr-2 rtl:ml-2"}),"เพิ่มความจุ"]})}),a("div",{className:"relative",children:[t("input",{type:"text",placeholder:"ค้นหา",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:S,onChange:e=>I(e.target.value)}),t("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:t(F,{className:"mx-auto"})})]})]})]}),t("div",{className:"datatables pagination-padding",children:t(z,{className:"whitespace-nowrap table-hover invoice-table",records:P,columns:[{accessor:"id",title:"ลำดับ",textAlignment:"center",sortable:!1,render:(e,r)=>t("div",{children:r+1})},{accessor:"name",title:"ชื่อความจุ",textAlignment:"left",sortable:!1,render:e=>t("div",{className:"flex items-center font-normal",children:t("div",{children:(e==null?void 0:e.name)||""})})},{accessor:"is_active",title:"เปิด/ปิด การใช้งาน",textAlignment:"center",sortable:!1,render:e=>t("span",{className:`badge ${e!=null&&e.is_active?"badge-outline-success":"badge-outline-danger"}`,children:e!=null&&e.is_active?"เปิดใช้งาน":"ปิดใช้งาน"})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:e=>t("div",{className:"flex gap-4 items-center w-max mx-auto",children:t(J,{content:"แก้ไข",theme:"Primary",children:t("a",{className:"flex hover:text-info cursor-pointer",onClick:()=>{y(e)},children:t(Z,{className:"w-4.5 h-4.5"})})})})}],page:p,totalRecords:R,recordsPerPage:n,highlightOnHover:!0,onPageChange:e=>b(e),recordsPerPageOptions:f,onRecordsPerPageChange:e=>{b(1),N(e)},paginationText:({from:e,to:r,totalRecords:L})=>`โชว์ ${e} ถึง ${r} ของ ${L} หน้าทั้งหมด`})}),t(m,{appear:!0,show:g,as:s.Fragment,children:a(E,{as:"div",open:g,onClose:()=>o(!1),className:"relative z-[51]",children:[t(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t("div",{className:"fixed inset-0 bg-[black]/60"})}),t("div",{className:"fixed inset-0 overflow-y-auto",children:t("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:t(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(E.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[t("button",{type:"button",className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:()=>o(!1),children:t(Q,{})}),t("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:c.id?"แก้ไข":"เพิ่ม"}),t("div",{className:"p-5",children:t(B,{initialValues:c,onSubmit:k,enableReinitialize:!0,autoComplete:"off",validationSchema:D,children:e=>a(W,{className:"space-y-5 dark:text-white custom-select",children:[t(Y,{label:"ชื่อความจุ",name:"name",type:"text",placeholder:"กรุณาใส่ข้อมูล"}),t(X,{label:"สถานะ*",id:"is_active",name:"is_active",options:[{value:!0,label:"เปิด"},{value:!1,label:"ปิด"}],placeholder:"กรุณาเลือก",onChange:r=>{e.setFieldValue("is_active",r.value)},isSearchable:!1}),a("div",{className:"flex justify-end items-center mt-8",children:[t("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>o(!1),children:"ยกเลิก"}),t("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:c.id?"บันทึก":"เพิ่ม"})]})]})})})]})})})})]})})]})})};export{Re as default};
