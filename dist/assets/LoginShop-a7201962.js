import{a as y,u as f,r as l,s as v,c as S,j as e,f as a,t as T,aj as I,g as x}from"./index-a90aa29c.js";import{S as p}from"./sweetalert2.all-ca2d1030.js";import{t as d}from"./constant-e85f1578.js";import{I as P}from"./IconMail-ccee7844.js";import{I as D}from"./IconLockDots-34b1aaf7.js";const C="admin",M=()=>{var c;const n=y(),_=f();l.useEffect(()=>{n(v("เข้าสู่ระบบ"))},[n]);const[s,h]=l.useState({username:localStorage.getItem("username")??"",password:localStorage.getItem("password")??"",rememberMe:((c=localStorage.getItem("rememberMe"))==null?void 0:c.toLowerCase())==="true",fcm_token:localStorage.getItem("FCM_TOKEN")??""}),i=t=>{const{name:r,value:o,type:b,checked:A}=t.target;h(E=>({...E,[r]:b==="checkbox"?A:o}))},{mutate:m,isLoading:g}=S(x.loginShop,{onSuccess:t=>{var r;if(t.statusCode===200||t.code===200){const o={uuid:t.data.uuid,name:t.data.name,username:t.data.username,access_token:t.data.access_token,access_level:((r=t.data)==null?void 0:r.access_level)??"",role:t.data.role,id_shop:t.data.id_shop,acc:t.data.is_create_customer};n(I(o)),localStorage.setItem(C,JSON.stringify(o)),s.rememberMe?(localStorage.setItem("username",s.username),localStorage.setItem("password",s.password),localStorage.setItem("rememberMe",s.rememberMe.toString())):(localStorage.removeItem("username"),localStorage.removeItem("password"),localStorage.removeItem("rememberMe")),_("/")}else p.mixin(d).fire({icon:"error",title:(t==null?void 0:t.message)??"ข้อมูลไม่ถูกต้องโปรดลองอีกครั้ง !",padding:"10px 20px"})},onError:t=>{p.mixin(d).fire({icon:"error",title:(t==null?void 0:t.message)??"ข้อมูลไม่ถูกต้องโปรดลองอีกครั้ง",padding:"10px 20px"})}}),u=l.useCallback(t=>{if(t.preventDefault(),!s.username||!s.password){p.fire({icon:"info",title:"กรุณากรอกชื่อผู้ใช้และรหัสผ่าน!",padding:"10px 20px"});return}m({data:{username:s.username,password:s.password,fcm_token:localStorage.getItem("FCM_TOKEN")??""}})},[s,m]);return g?e("div",{children:"Loading..."}):a("div",{children:[e("div",{className:"absolute inset-0"}),e("div",{className:"relative flex min-h-screen items-center justify-center bg-cover bg-center bg-no-repeat px-6 py-10 bg-[#f0f0f0] dark:bg-[#060818] sm:px-16",children:a("div",{className:"relative flex w-full max-w-[1502px] flex-col justify-between overflow-hidden rounded-md bg-white/60 backdrop-blur-lg dark:bg-black/50 lg:min-h-[758px] lg:flex-row lg:gap-10 xl:gap-0",children:[e("div",{className:"relative hidden w-full items-center justify-center lg:inline-flex lg:max-w-[835px] border-r-1 border-[80px] border-solid border-[#002a41]",children:e("div",{className:"",children:e("div",{className:"w-48 block lg:w-72 ms-10",children:e("img",{src:`${T.logo.ShopLogo}`,alt:"Logo",className:"w-full"})})})}),e("div",{className:"relative flex w-full flex-col items-center justify-center gap-6 px-4 pb-16 pt-6 sm:px-6 lg:max-w-[667px]",children:a("div",{className:"w-full max-w-[440px] lg:mt-16",children:[a("div",{className:"mb-10",children:[e("h1",{className:"text-3xl font-extrabold uppercase !leading-snug text-[#002a41] md:text-4xl",children:"ล็อกอิน"}),a("p",{className:"text-base font-normal leading-normal text-white-dark",children:["ใช้ ",e("span",{className:"text-themePrimary",children:"ชื่อผู้ใช้"}),"และ ",e("span",{className:"text-themePrimary",children:"รหัสผ่าน"}),"เพื่อเข้าสู่ระบบ"]})]}),a("form",{className:"space-y-5 dark:text-white",onSubmit:u,children:[a("div",{children:[e("label",{htmlFor:"Username",children:"ชื่อผู้ใช้"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"username",name:"username",type:"text",value:s.username,onChange:i,placeholder:"Username",className:"form-input ps-10 placeholder:text-white-dark"}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(P,{fill:!0})})]})]}),a("div",{children:[e("label",{htmlFor:"Password",children:"รหัสผ่าน"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"Password",name:"password",type:"password",value:s.password,onChange:i,placeholder:"กรอกรหัสผ่าน",className:"form-input ps-10 placeholder:text-white-dark"}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(D,{fill:!0})})]})]}),e("div",{children:a("label",{className:"flex cursor-pointer items-center",children:[e("input",{type:"checkbox",name:"rememberMe",checked:s.rememberMe,onChange:i,className:"form-checkbox checked:bg-themePrimary focus:checked:bg-themePrimary checked:hover:bg-themePrimary bg-white dark:bg-black"}),e("span",{className:"text-white-dark",children:"จำรหัสผ่าน"})]})}),e("button",{type:"submit",className:"btn bg-themePrimary text-lg font-light text-white !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"เข้าสู่ระบบ"})]})]})})]})})]})};export{M as default};
