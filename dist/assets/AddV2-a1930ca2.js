import{i as ce,u as He,a as We,r as n,s as Ge,c as S,j as i,F as w,f as s,g as A}from"./index-a90aa29c.js";import{c as oe,a as c}from"./object-7405de1d.js";import{S as Ke}from"./sweetalert2.all-ca2d1030.js";import{r as _e}from"./helpFunction-19eb552d.js";import{t as Be,a as Ye}from"./constant-e85f1578.js";import{u as Xe,a as Ze}from"./useProvincesMutation-f0b4cb29.js";import{u as $e,a as Je}from"./useUploadMutation-785f6dd6.js";import{F as Qe,a as ei}from"./formik.esm-c4fd04ca.js";import{_ as ue}from"./index-f89ea186.js";import{I as o}from"./InputField-d7971719.js";import{C as pe}from"./CheckboxField-4d710d64.js";import{S as u}from"./SelectField-917481a8.js";import{B as ii}from"./breadcrumbs-b9914bbc.js";import{P as ti}from"./preLoading-b2445d9d.js";import{I as ri}from"./IconX-54a3093e.js";import{C as si}from"./CameraOCR-5a7ecbcf.js";import{q as V,_ as me}from"./transition-d4ca4cfa.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";import"./react-select.esm-b46d9623.js";import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./lodash-f7ec5310.js";import"./keyboard-f171a3e5.js";import"./use-is-mounted-22b05dcc.js";import"./bugs-a60d55c3.js";const he="admin",Ui=()=>{var le,ne;const be=(le=JSON.parse(localStorage.getItem(he)??"{}"))==null?void 0:le.acc,p=Ke.mixin(Be),ge=ce(e=>e.dataStore.credit_level),L=He(),fe=We(),ve=[{to:"/apps/customer/list",label:"ลูกค้า"},{label:"เพิ่ม",isCurrent:!0}];n.useEffect(()=>{fe(Ge("เพิ่มข้อมูลลูกค้า"))});const N=localStorage.getItem(he),q=N?JSON.parse(N).id_shop:null,j=N?JSON.parse(N).role:null,U=ce(e=>e.dataStore.provinces),[H,ye]=n.useState([]),[W,G]=n.useState([]),[K,B]=n.useState([]),[Y,I]=n.useState([]),[X,D]=n.useState([]),[Z,O]=n.useState([]),[ke,xe]=n.useState([]),[a,$]=n.useState(0),[Ce,z]=n.useState(!1),[J,k]=n.useState(!1),[F,Se]=n.useState(!0),[we,Ae]=n.useState(""),[Ne,M]=n.useState(!1);be||L("/apps/customer/list");const[d,x]=n.useState({title:"",name:"",citizen_id:"",phone_number:"",phone_number_ref:"",id_shop:q,line_id:"",facebook_id:"",email:"",citizen_image_url:"",address:"",id_province:0,province:"",id_district:0,district:"",id_subdistrict:0,subdistrict:"",zip_code:"",tiktok_id:"",instagram_id:"",current_address:"",current_id_province:0,current_id_district:0,current_id_subdistrict:0,current_zip_code:"",work_address:"",work_id_province:0,work_id_district:0,work_id_subdistrict:0,work_zip_code:"",credit_level:"",approval_status:"Approved",copyAddress:!1}),[C,E]=n.useState([]),[T,R]=n.useState([]),Ie=(e,t,r)=>{Q({data:{query:t}})},{mutate:Q}=S(A.shopSearchContains,{onSuccess:e=>{xe(e.data.map(t=>({value:t.id,label:t.name})))},onError:e=>{p.fire({icon:"error",title:e.massage,padding:"10px 20px"})}}),b=(e,t,r)=>{const l=(_,m)=>{_.forEach(h=>e.setFieldValue(h,null)),m.forEach(h=>h([]))},v={id_province:()=>{g({id:t.value,type:r}),l(["id_district","id_subdistrict"],[I,I])},current_id_province:()=>{g({id:t.value,type:r}),l(["current_id_district","current_id_subdistrict"],[G,D])},work_id_province:()=>{g({id:t.value,type:r}),l(["work_id_district","work_id_subdistrict"],[B,O])},id_district:()=>{f({id:t.value,type:r}),l(["id_subdistrict"],[I])},current_id_district:()=>{f({id:t.value,type:r}),l(["current_id_subdistrict"],[D])},work_id_district:()=>{f({id:t.value,type:r}),l(["work_id_subdistrict"],[O])},id_subdistrict:()=>{e.setFieldValue("zip_code",parseInt(t.zipCode))},current_id_subdistrict:()=>{e.setFieldValue("current_zip_code",parseInt(t.zipCode))},work_id_subdistrict:()=>{e.setFieldValue("work_zip_code",parseInt(t.zipCode))}};v[r]&&v[r]()},{mutateAsync:Ee,isLoading:Te}=$e({onSuccess:e=>{var t,r,l;Ae(e.data.citizen_id),x(v=>{var _,m;return{...v,citizen_id:d.citizen_id,name:e.data.name,address:e.data.address,subdistrict:e.data.subdistrict,district:e.data.district,province:e.data.province,id_district:e.data.id_district,id_subdistrict:e.data.id_subdistrict,id_province:e.data.id_province,zip_code:(_=e.data)!=null&&_.zip_code?parseInt((m=e.data)==null?void 0:m.zip_code):""}}),g({id:(t=e.data)==null?void 0:t.id_province,type:"id_province"}),f({id:(r=e.data)==null?void 0:r.id_district,type:"id_district"}),(l=e.data)!=null&&l.zip_code||Se(!1)},onError:e=>{z(!1),p.fire({icon:"warning",title:"ไม่สามารถอ่านค่ารูปบัตรประชาชนได้",padding:"10px 20px"})}}),{mutate:g}=Xe({onSuccess:(e,t)=>{const r=e.data.map(l=>({value:l.id,label:l.name_th}));switch(t.type){case"id_province":ye(r);break;case"current_id_province":G(r);break;case"work_id_province":B(r);break}},onError:e=>{}}),{mutate:f}=Ze({onSuccess:(e,t)=>{const r=e.data.map(l=>({value:l.id,label:l.name_th,zipCode:l.zip_code}));switch(t.type){case"id_district":I(r);break;case"current_id_district":D(r);break;case"work_id_district":O(r);break}},onError:e=>{}}),{mutateAsync:ee,isLoading:Re}=Je({onSuccess:e=>{},onError:e=>{}}),{mutate:Pe}=S(A.shopUpdateCredit,{onSuccess:()=>{p.fire({icon:"success",title:"บันทึกสำเร็จ",padding:"10px 20px"}),L("/apps/customer/list")}}),{mutate:ie,isLoading:te}=S(A.shopCustomerCreate,{onSuccess:(e,t)=>{e.statusCode===200||e.code===200?j==="shop"?Pe({data:{shop_credit_level:t.data.shop_credit_level,id_customer:t.data.uuid_customer}}):(p.fire({icon:"success",title:"บันทึกสำเร็จ",padding:"10px 20px"}),L("/apps/customer/list")):p.fire({icon:"warning",title:e.message,padding:"10px 20px"})}}),{mutate:re,isLoading:se}=S(A.customerCreate,{onSuccess:(e,t)=>{e.statusCode===200||e.code===200?(p.fire({icon:"success",title:"บันทึกสำเร็จ",padding:"10px 20px"}),ie({data:{id_shop:t.data.id_shop,id_customer:e.data.id,shop_credit_level:t.data.shop_credit_level,uuid_customer:e.data.uuid}})):p.fire({icon:"warning",title:e.message,padding:"10px 20px"})},onError:e=>{}}),Le=n.useCallback(async e=>{var t,r,l,v;if(!te&&!se)if(a===2)ie({data:{id_shop:e.id_shop,id_customer:e.id}});else{const _=[];(t=C[0])!=null&&t.file?_.push(ee({data:{file:C[0].file,type:"customer"}})):_.push(Promise.resolve({})),(r=T[0])!=null&&r.file?_.push(ee({data:{file:T[0].file,type:"customer"}})):_.push(Promise.resolve({}));let m,h;if(_.length>0){const P=await Promise.all(_);m=P[0],h=P[1]}let y={data:{...e,is_active:!0,citizen_image_url:((l=m==null?void 0:m.data)==null?void 0:l.file_name)||"",verification_image_url:((v=h==null?void 0:h.data)==null?void 0:v.file_name)||""}};if(y.data.citizen_image_url===""||y.data.citizen_image_url===null){p.fire({icon:"warning",title:"ไม่พบข้อมูลรูปบัตรประชาชน",padding:"10px 20px"});return}if(y.data.verification_image_url===""||y.data.verification_image_url===null){p.fire({icon:"warning",title:"ไม่พบข้อมูลรูปภาพยืนยันบุคคล",padding:"10px 20px"});return}re(y)}},[re,C,T,a]),{mutate:ae}=S(A.customerSearch,{onSuccess:(e,t)=>{if(e.statusCode===200||e.code===200){const r=e==null?void 0:e.data;r&&($(2),g({id:r==null?void 0:r.id_province,type:"id_province"}),f({id:r==null?void 0:r.id_district,type:"id_district"}),g({id:r==null?void 0:r.current_id_province,type:"current_id_province"}),f({id:r==null?void 0:r.current_id_district,type:"current_id_district"}),g({id:r==null?void 0:r.work_id_province,type:"work_id_province"}),f({id:r==null?void 0:r.work_id_district,type:"work_id_district"}),x(l=>({...l,...r})),r&&t.props.setValues(r),r!=null&&r.citizen_image_url&&E([{dataURL:r.citizen_image_url}]),r!=null&&r.verification_image_url&&R([{dataURL:r.verification_image_url}]))}else $(1),E([]),R([]),x(r=>({...r,title:"",name:"",phone_number:"",phone_number_ref:"",line_id:"",facebook_id:"",email:"",tiktok_id:"",instagram_id:"",address:"",id_province:0,province:"",id_district:0,district:"",id_subdistrict:0,subdistrict:"",zip_code:"",current_address:"",current_id_province:0,current_id_district:0,current_id_subdistrict:0,current_zip_code:"",work_address:"",work_id_province:0,work_id_district:0,work_id_subdistrict:0,work_zip_code:""}))}}),Ue=async(e,t)=>{t?(g({id:e.values.id_province,type:"current_id_province"}),f({id:e.values.id_district,type:"current_id_district"}),e.setFieldValue("current_address",e.values.address),e.setFieldValue("current_id_province",e.values.id_province),e.setFieldValue("current_id_district",e.values.id_district),e.setFieldValue("current_id_subdistrict",e.values.id_subdistrict),e.setFieldValue("current_zip_code",e.values.zip_code)):(e.setFieldValue("current_address",""),e.setFieldValue("current_id_province",null),e.setFieldValue("current_id_district",null),e.setFieldValue("current_id_subdistrict",null),e.setFieldValue("current_zip_code",""))},De=async(e,t)=>{t?(g({id:e.values.id_province,type:"work_id_province"}),f({id:e.values.id_district,type:"work_id_district"}),e.setFieldValue("work_address",e.values.address),e.setFieldValue("work_id_province",e.values.id_province),e.setFieldValue("work_id_district",e.values.id_district),e.setFieldValue("work_id_subdistrict",e.values.id_subdistrict),e.setFieldValue("work_zip_code",e.values.zip_code)):(e.setFieldValue("work_address",""),e.setFieldValue("work_id_province",null),e.setFieldValue("work_id_district",null),e.setFieldValue("work_id_subdistrict",null),e.setFieldValue("work_zip_code",""))},de=async e=>{console.log("imageList",e);const t=await _e(e);console.log("resizedImages",t),E(t)},Oe=async()=>{z(!0),await Ee({data:{image:C[0].file}}),z(!1),k(!0)},ze=async e=>{const t=await _e(e);R(t)},Fe=oe().shape({title:c().required("กรุณาใส่ข้อมูลให้ครบ"),name:c().required("กรุณาใส่ข้อมูลให้ครบ"),phone_number:c().length(10,"กรุณาใส่ข้อมูลให้ครบ 10 เลข"),id_shop:c().required("กรุณาใส่ข้อมูลให้ครบ"),citizen_id:c().required("กรุณาใส่ข้อมูลให้ครบ").length(13,"กรุณาใส่ข้อมูลให้ครบ 13 หลัก"),email:c().required("กรุณาใส่ข้อมูลให้ครบ").matches(/^[A-Za-z0-9@._]+$/,"กรุณาใช้ตัวอักษรภาษาอังกฤษ ตัวเลข เครื่องหมายมหัพภาค(.) _ และ @ เท่านั้น").email("กรุณาใส่อีเมลที่ถูกต้อง"),address:c().required("กรุณาใส่ข้อมูลให้ครบ"),id_province:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),id_district:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),id_subdistrict:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),current_address:c().required("กรุณาใส่ข้อมูลให้ครบ"),current_id_province:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),current_id_district:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),current_id_subdistrict:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),work_address:c().required("กรุณาใส่ข้อมูลให้ครบ"),work_id_province:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),work_id_district:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ"),work_id_subdistrict:c().nullable().required("กรุณาใส่ข้อมูลให้ครบ")}),Me=oe().shape({id_shop:c().required("กรุณาใส่ข้อมูลให้ครบ")}),Ve=e=>s("div",{className:"md:col-span-1 xl:col-span-6 ",children:[i("div",{className:"input-flex-row",children:s("div",{className:"check-container",children:[i(o,{require:!0,label:"รหัสบัตรประชาชน",name:"citizen_id",type:"text",maxLength:13,onKeyUp:t=>{x(r=>({...r,citizen_id:t.target.value}))},onKeyPress:t=>{var r,l;if(t.key==="Enter"){t.preventDefault(),((r=e.values.citizen_id)==null?void 0:r.length)===13?ae({data:{citizen_id:(l=e.values.citizen_id)==null?void 0:l.toString()},props:e}):p.fire({icon:"error",title:"กรุณากรอกรหัสบัตรประชาชนให้ครบก่อนค้นหา",padding:"10px 20px"});return}/[0-9]/.test(t.key)||t.preventDefault()}}),i("button",{type:"button",className:"btn btn-dark mt-2 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",onClick:()=>{var t,r;((t=e.values.citizen_id)==null?void 0:t.length)===13?ae({data:{citizen_id:(r=e.values.citizen_id)==null?void 0:r.toString()},props:e}):p.fire({icon:"error",title:"กรุณากรอกรหัสบัตรประชาชนให้ครบก่อนค้นหา",padding:"10px 20px"})},children:"ตรวจสอบ"})]})}),a===1||a===2?i("div",{className:"input-flex-row pb-10",children:i("div",{className:"upload-container w-full pb-3",children:s("div",{className:"custom-file-container","data-upload-id":"myFirstImage",children:[s("div",{className:"label-container",children:[s("label",{children:["รูปบัตรประชาชน ",i("span",{className:"text-rose-600",children:"*"})]}),a===1&&i("button",{type:"button",className:"custom-file-container__image-clear",title:"Clear Image",onClick:()=>{E([])},children:"×"})]}),i("label",{className:"custom-file-container__custom-file hidden"}),i("div",{children:s("div",{children:[i("input",{type:"file",className:"custom-file-container__custom-file__custom-file-input hidden",accept:"image/*"}),i("input",{type:"hidden",name:"MAX_FILE_SIZE1",value:"10485760"}),i(ue,{value:C,onChange:de,children:({imageList:t,onImageUpload:r,onImageRemoveAll:l,onImageUpdate:v,onImageRemove:_,isDragging:m,dragProps:h})=>s(w,{children:[s("div",{className:"upload__image-wrapper",children:[a===1&&s(w,{children:[i("button",{className:"custom-file-container__custom-file__custom-file-control",onClick:r,type:"button",children:"เลือกไฟล์..."}),i("div",{style:{textAlign:"right"},children:i("button",{type:"button",className:"btn btn-primary",onClick:()=>M(!0),style:{display:"inline-block"},children:"ถ่ายรูป"})})]}),t.map((y,P)=>i("div",{className:"custom-file-container__image-preview relative pt-10 pb-10",children:i("img",{src:y.dataURL,alt:"img",className:a===1?"m-auto mt-10":"m-auto"})},P))]}),a!==2&&t.length>0&&i("button",{type:"button",className:"btn btn-success mt-2 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",onClick:Oe,children:"ตรวจสอบบัตรประชาชน"})]})})]})})]})})}):"",a===1||a===2?s(w,{children:[i("hr",{className:"mt-4"}),i("div",{className:"text-l font-semibold ltr:sm:text-left rtl:sm:text-right text-center mt-4",children:"ข้อมูลส่วนบุคคล"}),!q&&i("div",{className:"input-flex-row",children:i(u,{require:!0,label:"ร้านค้า",id:"id_shop",name:"id_shop",isSearchable:!0,options:ke,onInputChange:t=>Ie(e,t),handleOnMenuOpen:()=>{Q({data:{query:""}})}})}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"คำนำหน้า",id:"title",name:"title",options:Ye,placeholder:"กรุณาเลือก",isSearchable:!0,disabled:a===2}),i(o,{require:!0,label:"ชื่อ-นามสกุล",name:"name",type:"text",disabled:a===2})]}),s("div",{className:"input-flex-row",children:[i(o,{require:!0,label:"เบอร์โทรติดต่อ",name:"phone_number",type:"text",maxLength:10,onKeyPress:t=>{/[0-9]/.test(t.key)||t.preventDefault()},disabled:a===2}),i(o,{label:"เบอร์โทรอ้างอิง",name:"phone_number_ref",type:"text",maxLength:10,onKeyPress:t=>{/[0-9]/.test(t.key)||t.preventDefault()},disabled:a===2})]}),s("div",{className:"input-flex-row",children:[i(o,{label:"Facebook ID",name:"facebook_id",type:"text",disabled:a===2}),i(o,{label:"Line ID",name:"line_id",type:"text",disabled:a===2})]}),s("div",{className:"input-flex-row",children:[i(o,{label:"Tiktok ID",name:"tiktok_id",type:"text",disabled:a===2}),i(o,{label:"Instagram ID",name:"instagram_id",type:"text",disabled:a===2})]}),s("div",{className:"input-flex-row",children:[i(o,{require:!0,label:"Email",name:"email",type:"text",disabled:a===2}),i("div",{className:"blank-container"})]}),i("div",{className:"text-l font-semibold ltr:sm:text-left rtl:sm:text-right text-center mt-4",children:"ข้อมูลที่อยู่"}),qe(e),j=="shop"&&s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"ระดับเครดิต (ร้านค้า)",id:"shop_credit_level",name:"shop_credit_level",options:ge,placeholder:"กรุณาเลือก",isSearchable:!0,disabled:a===2}),i("div",{className:"blank-container"})]})]}):""]}),qe=e=>s(w,{children:[s("div",{className:"mt-6 border border-white-light dark:border-[#1b2e4b] group rounded-md",children:[i("div",{className:" border-white-light dark:border-[#1b2e4b] p-5 pt-0 flex",children:i("span",{className:"bg-white dark:bg-black dark:text-white-light inline-block px-3 h-[20px] lg:h-[20px] rounded flex items-center text-[12px] font-semibold -mt-[10px] ",children:"ที่อยู่ตามบัตรประชาชน"})}),s("div",{className:"px-5 pb-5",children:[i("div",{className:"input-flex-row",children:i(o,{require:!0,label:"ที่อยู่",name:"address",as:"textarea",rows:"1",disabled:a===2,onChange:t=>{e.setFieldValue("address",t.target.value),e.setFieldValue("copyAddress",!1),e.setFieldValue("copyAddressForWork",!1)}})}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"จังหวัด",id:"id_province",name:"id_province",options:U,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"id_province"),e.setFieldValue("copyAddress",!1),e.setFieldValue("copyAddressForWork",!1)},isSearchable:!0,disabled:a===2}),i(u,{require:!0,label:"อำเภอ/เขต",id:"id_district",name:"id_district",options:H,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"id_district"),e.setFieldValue("copyAddress",!1),e.setFieldValue("copyAddressForWork",!1)},isSearchable:!0,disabled:H.length===0||a===2})]}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"ตำบล/แขวง",id:"id_subdistrict",name:"id_subdistrict",options:Y,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"id_subdistrict"),e.setFieldValue("copyAddress",!1),e.setFieldValue("copyAddressForWork",!1)},isSearchable:!0,disabled:Y.length===0||a===2}),i(o,{label:"รหัสไปรษณีย์",name:"zip_code",as:"textarea",rows:"1",disabled:F})]})]})]}),i("label",{className:"flex cursor-pointer items-center",children:i(pe,{name:"copyAddress",label:"ใช้ที่อยู่เดียวกับบัตรประชาชน",onCheck:t=>Ue(e,t),disabled:a===2})}),s("div",{className:"mt-6 border border-white-light dark:border-[#1b2e4b] group rounded-md",children:[i("div",{className:"border-b border-white-light dark:border-[#1b2e4b] p-5 pt-0 flex",children:i("span",{className:"bg-white dark:bg-black  dark:text-white-light inline-block px-3 h-[20px] lg:h-[20px] rounded flex justify-center items-center text-[12px] font-semibold -mt-[10px] ",children:"ที่อยู่ปัจจุบัน"})}),s("div",{className:"px-5 pb-5",children:[i("div",{className:"input-flex-row",children:i(o,{require:!0,label:"ที่อยู่",name:"current_address",as:"textarea",rows:"1",disabled:a===2,onChange:t=>{e.setFieldValue("copyAddress",!1),e.setFieldValue("current_address",t.target.value)}})}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"จังหวัด",id:"current_id_province",name:"current_id_province",options:U,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"current_id_province"),e.setFieldValue("copyAddress",!1)},isSearchable:!0,disabled:a===2}),i(u,{require:!0,label:"อำเภอ/เขต",id:"current_id_district",name:"current_id_district",options:W,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"current_id_district"),e.setFieldValue("copyAddress",!1)},isSearchable:!0,disabled:W.length===0||a===2})]}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"ตำบล/แขวง",id:"current_id_subdistrict",name:"current_id_subdistrict",options:X,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"current_id_subdistrict"),e.setFieldValue("copyAddress",!1)},isSearchable:!0,disabled:X.length===0||a===2}),i(o,{label:"รหัสไปรษณีย์",name:"current_zip_code",as:"textarea",rows:"1",disabled:F})]})]})]}),i("label",{className:"flex cursor-pointer items-center",children:i(pe,{name:"copyAddressForWork",label:"ใช้ที่อยู่เดียวกับบัตรประชาชน",onCheck:t=>De(e,t),disabled:a===2})}),s("div",{className:"mt-6 border border-white-light dark:border-[#1b2e4b] group rounded-md",children:[i("div",{className:"border-b border-white-light dark:border-[#1b2e4b] p-5 pt-0 flex",children:i("span",{className:"bg-white dark:bg-black dark:text-white-light inline-block px-3 h-[20px] lg:h-[20px] rounded flex justify-center items-center text-[12px] font-semibold -mt-[10px]",children:"ที่อยู่ที่ทำงาน"})}),s("div",{className:"px-5 pb-5",children:[i("div",{className:"input-flex-row",children:i(o,{require:!0,label:"ที่อยู่",name:"work_address",as:"textarea",rows:"1",disabled:a===2,onChange:t=>{e.setFieldValue("copyAddressForWork",!1),e.setFieldValue("work_address",t.target.value)}})}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"จังหวัด",id:"work_id_province",name:"work_id_province",options:U,placeholder:"กรุณาเลือก",onChange:t=>{b(e,t,"work_id_province"),e.setFieldValue("copyAddressForWork",!1)},isSearchable:!0,disabled:a===2}),i(u,{require:!0,label:"อำเภอ/เขต",id:"work_id_district",name:"work_id_district",options:K,placeholder:"กรุณาเลือก",onChange:t=>{e.setFieldValue("copyAddressForWork",!1),b(e,t,"work_id_district")},isSearchable:!0,disabled:K.length===0||a===2})]}),s("div",{className:"input-flex-row",children:[i(u,{require:!0,label:"ตำบล/แขวง",id:"work_id_subdistrict",name:"work_id_subdistrict",options:Z,placeholder:"กรุณาเลือก",onChange:t=>{e.setFieldValue("copyAddressForWork",!1),b(e,t,"work_id_subdistrict")},isSearchable:!0,disabled:Z.length===0||a===2}),i(o,{label:"รหัสไปรษณีย์",name:"work_zip_code",as:"textarea",rows:"1",disabled:F})]})]})]})]}),je=()=>i("div",{className:"md:col-span-1 xl:col-span-2",children:i("div",{className:"upload-container mt-6",children:s("div",{className:"custom-file-container","data-upload-id":"myFirstImage",children:[s("div",{className:"label-container",children:[s("label",{children:["รูปยืนยันบุคคล ",i("span",{className:"text-rose-600",children:"*"})]}),a===1&&i("button",{type:"button",className:"custom-file-container__image-clear",title:"Clear Image",onClick:()=>{R([])},children:"×"})]}),i("label",{className:"custom-file-container__custom-file hidden"}),i("input",{type:"file",className:"custom-file-container__custom-file__custom-file-input hidden",accept:"image/*"}),i("input",{type:"hidden",name:"MAX_FILE_SIZE2",value:"10485760"}),i(ue,{value:T,onChange:ze,children:({imageList:e,onImageUpload:t,onImageRemoveAll:r,onImageUpdate:l,onImageRemove:v,isDragging:_,dragProps:m})=>s("div",{className:"upload__image-wrapper",children:[a===1&&i("button",{className:"custom-file-container__custom-file__custom-file-control",onClick:t,type:"button",children:"เลือกไฟล์..."}),e.map((h,y)=>i("div",{className:"custom-file-container__image-preview relative",children:i("img",{src:h.dataURL,alt:"img",className:a===1?"m-auto mt-10":"m-auto"})},y))]})})]})})});return i(w,{children:Ne?i(si,{onSubmit:e=>{de([e]),M(!1)},onClose:()=>M(!1)}):s("div",{className:"flex flex-col gap-2.5",children:[(Ce||Te)&&i(ti,{}),i(ii,{items:ve}),i("div",{className:"panel px-6 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:i(Qe,{initialValues:d,onSubmit:Le,enableReinitialize:!0,autoComplete:"off",validationSchema:a==2?Me:Fe,children:e=>s(ei,{className:"space-y-5 dark:text-white custom-select ",children:[i("div",{className:"text-lg font-semibold ltr:sm:text-left rtl:sm:text-right text-center",children:"บัญชีลูกค้า"}),s("div",{className:`grid md:grid-rows-1 ${a!==0&&"xl:grid-cols-8"} gap-2 pb-6`,children:[Ve(e),a===1||a===2?je():""]}),a!==0&&s("button",{type:"submit",className:"btn !mt-6 w-full border-0 btn-primary",children:[(Re||te||se)&&i("span",{className:"animate-spin border-2 border-white border-l-transparent rounded-full w-5 h-5 ltr:mr-4 rtl:ml-4 inline-block align-middle"}),a==2?"เพิ่มเข้าร้านค้า":"เพิ่มข้อมูล"]})]})})}),i(V,{appear:!0,show:J,as:n.Fragment,children:s(me,{as:"div",open:J,onClose:()=>k(!1),className:"relative z-[51]",children:[i(V.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:i("div",{className:"fixed inset-0 bg-[black]/60"})}),i("div",{className:"fixed inset-0 overflow-y-auto",children:i("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:i(V.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(me.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[i("button",{type:"button",className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:()=>k(!1),children:i(ri,{})}),i("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:"ข้อมูลบัตรประชาชน"}),s("div",{className:"px-5 pt-3 pb-5",children:[s("div",{className:"flex flex-wrap justify-start",children:[i("div",{className:"w-full",children:s("p",{children:["เลขบัตรประชาชน:",we]})}),i("div",{className:"w-full",children:s("p",{children:["ชื่อ-นามสกุล: ",(ne=d.name)==null?void 0:ne.trim()]})}),i("div",{className:"w-full",children:s("p",{children:[d!=null&&d.address?`ที่อยู่: ${d==null?void 0:d.address} `:" ",d!=null&&d.subdistrict?`ตำบล${d==null?void 0:d.subdistrict} `:" ",d!=null&&d.district?`อำเภอ${d==null?void 0:d.district} `:" ",d!=null&&d.district?`จังหวัด${d==null?void 0:d.province} `:" ",isNaN(d==null?void 0:d.zip_code)?" ":d==null?void 0:d.zip_code]})})]}),s("div",{className:"flex justify-end items-center mt-8",children:[i("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{x(e=>({...e,name:"",address:"",id_province:0,province:"",id_district:0,district:"",id_subdistrict:0,subdistrict:"",zip_code:""})),k(!1)},children:"ยกเลิก"}),i("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:()=>k(!1),children:"ยืนยัน"})]})]})]})})})})]})})]})})};export{Ui as default};
