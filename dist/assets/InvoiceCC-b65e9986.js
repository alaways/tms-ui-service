import{a as y,u as P,ar as ee,an as se,r as a,c as F,s as te,f as t,j as s,L as ie,t as le,g as G}from"./index-a90aa29c.js";import{S as d}from"./sweetalert2.all-ca2d1030.js";import{c as ae,b as W,n as l}from"./formatNumeric-862380d6.js";/* empty css                */import{P as de}from"./preLoading-b2445d9d.js";import{t as ce}from"./constant-e85f1578.js";const xe=()=>{var m,f,b,x,N,v,k,g,_,p,j,w,C,I,L,B,E,S,D,T,$,M,Q,z,A;const c=y(),r=P(),q=ee(),{id:n}=se(),o=d.mixin(ce),[e,H]=a.useState(),{installmentLast:re,contractID:J,ins_no:K}=q.state||{},{mutate:h,isLoading:O}=F(G.customerPaymentPreviewClose,{onSuccess:i=>{H(i.data)},onError:()=>{Y("Failed to fetch business units")}}),R=()=>{r("/apps/customer-payment/payment-cc/"+n,{state:{contractID:J,ins_no:K,payment_preview:e}})};a.useEffect(()=>{c(te("ใบแจ้งหนี้ (Invoice)"))},[c]),a.useEffect(()=>{h({data:{id_contract:n}})},[h]);const{mutate:U,isLoading:V}=F(G.customerCancelQrcode,{onSuccess:async i=>{i.statusCode===400||i.code===400?u(i.message,"error"):(o.fire({icon:"success",title:"ยกเลิกการปิดสัญญาเรียบร้อบแล้ว",padding:"10px 20px"}),setTimeout(()=>{r("/apps/customer-payment/list")},500))},onError:i=>{o.fire({icon:"error",title:i.message,padding:"10px 20px"})}}),X=async()=>{d.fire({title:"ยืนยันการยกเลิกการปิดสัญญา",text:"คุณต้องการยกเลิกชำระเงินใช่หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonColor:le.color.themePrimary,cancelButtonColor:"#d33",confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",reverseButtons:!0}).then(i=>{i.isConfirmed&&U({data:{id_payment:e.id_payment}})})},u=(i,Z)=>{d.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3}).fire({icon:Z,title:i,padding:"10px 20px"})},Y=i=>{u(i,"error")};return t("div",{children:[(O||V)&&s(de,{}),t("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:[s("li",{children:s(ie,{to:"/apps/customer-payment/list",className:"text-primary hover:underline",children:"หน้าหลัก"})}),s("li",{className:"before:content-['/'] ltr:before:mr-2 rtl:before:ml-2",children:t("span",{children:["เลขที่สัญญา ",e==null?void 0:e.reference]})})]}),t("div",{className:"py-5 animate__animated",children:[(e==null?void 0:e.status)==="pending"&&s("div",{className:"w-full h-auto text-center text-warning bg-warning-light dark:bg-warning-dark-light rounded-md mb-5",children:t("div",{className:"flex justify-between items-center p-5",children:[t("div",{className:"text-left",style:{cursor:"pointer"},children:["กำลังดำเนินการปิดสัญญา กรุณาชำระเงิน หรือกดยกเลิกเพื่อกลับไปชำระตามงวดปกติ ",">"]}),s("button",{type:"button",className:"btn btn-xl btn-outline-danger",onClick:X,children:"ยกเลิก"})]})}),t("div",{className:"panel !px-0",children:[t("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[s("div",{className:"text-2xl font-semibold uppercase",children:"ใบแจ้งหนี้ ปิดสัญญา(Invoice)"}),s("div",{className:"shrink-0 py-10 invoice-logo",children:s("img",{src:(m=e==null?void 0:e.business_unit)==null?void 0:m.logo_image_url,alt:"img",className:"w-36 ltr:ml-auto rtl:mr-auto"})})]}),s("div",{className:"ltr:text-left rtl:text-left px-4",children:s("div",{className:"space-y-1 mt-6 text-white-dark",children:t("div",{children:[" เลขที่สัญญา: ",e==null?void 0:e.reference]})})}),s("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t("div",{className:"ltr:text-left rtl:text-left px-6",children:[t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ชื่อธุรกิจ :"}),s("div",{children:(f=e==null?void 0:e.business_unit)==null?void 0:f.name})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ที่อยู่ :"}),t("div",{children:[(b=e==null?void 0:e.business_unit)==null?void 0:b.address,` ${((N=(x=e==null?void 0:e.business_unit)==null?void 0:x.subdistrict)==null?void 0:N.name_th)??""}`,` ${((k=(v=e==null?void 0:e.business_unit)==null?void 0:v.district)==null?void 0:k.name_th)??""}`,` ${((_=(g=e==null?void 0:e.business_unit)==null?void 0:g.province)==null?void 0:_.name_th)??""}`,` ${((p=e==null?void 0:e.business_unit)==null?void 0:p.zip_code)??""}`]})]}),t("div",{className:"flex items-center w-full justify-between data-responsive",children:[s("div",{className:"text-white-dark",children:"โทรศัพท์ :"}),s("div",{children:((j=e==null?void 0:e.business_unit)==null?void 0:j.phone)??""})]})]}),s("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t("div",{className:"ltr:text-left rtl:text-left px-6",children:[t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ชื่อ :"}),s("div",{children:((w=e==null?void 0:e.customer)==null?void 0:w.name)??""})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"เลขบัตรประจำตัวประชาชน :"}),s("div",{children:ae(((C=e==null?void 0:e.customer)==null?void 0:C.citizen_id)??"")})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"เบอร์หลัก :"}),s("div",{children:W(((I=e==null?void 0:e.customer)==null?void 0:I.phone_number)??"")})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"เบอร์อ้างอิง :"}),s("div",{children:W(((L=e==null?void 0:e.customer)==null?void 0:L.phone_number_ref)??"")})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ที่อยู่ปัจจุบัน :"}),s("div",{children:(B=e==null?void 0:e.customer)==null?void 0:B.full_current_address})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ที่อยู่ที่ทำงาน :"}),s("div",{children:((E=e==null?void 0:e.customer)==null?void 0:E.full_work_address)??""})]})]}),s("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t("div",{className:"ltr:text-left rtl:text-left px-6",children:[t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ชื่อสินทรัพย์ :"}),s("div",{children:((S=e==null?void 0:e.asset)==null?void 0:S.name)??""})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"IMEI/SN :"}),s("div",{children:((D=e==null?void 0:e.asset)==null?void 0:D.imei)??""})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"รหัสรุ่น :"}),s("div",{children:((T=e==null?void 0:e.asset)==null?void 0:T.serial_number)??""})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"สี :"}),s("div",{children:(($=e==null?void 0:e.asset)==null?void 0:$.color)??""})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ความจุ :"}),s("div",{children:((M=e==null?void 0:e.asset)==null?void 0:M.capacity)??""})]}),t("div",{className:"flex items-center w-full justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ข้อสังเกตุ :"}),s("div",{children:((Q=e==null?void 0:e.asset)==null?void 0:Q.note)??""})]})]}),s("div",{className:"my-4"}),s("div",{className:"border-b border-white-light p-6 text-[22px] font-bold dark:border-dark dark:text-white",children:"รายการ"}),t("div",{className:"p-6",children:[t("div",{className:"flex justify-between mb-2 data-responsive",children:[t("div",{className:"text-white-dark",children:["ค่างวด x ",e==null?void 0:e.preview.remaining_ins]}),s("div",{children:l((z=e==null?void 0:e.preview)==null?void 0:z.total_amount)+" บาท"})]}),e!=null&&e.preview.penalty_fee?t("div",{className:"flex justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ค่าดำเนินการล่าช้า/วัน"}),s("div",{children:l(e==null?void 0:e.preview.penalty_fee)+" บาท"})]}):null,e!=null&&e.preview.tracking_fee?t("div",{className:"flex justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ค่าติดตาม"}),s("div",{children:l(e==null?void 0:e.preview.tracking_fee)+" บาท"})]}):null,e!=null&&e.preview.unlock_fee?t("div",{className:"flex justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ค่าปลดล็อค"}),s("div",{children:l(e==null?void 0:e.unlock_fee)+" บาท"})]}):null,e!=null&&e.preview.discount?t("div",{className:"flex justify-between mb-2 data-responsive",children:[s("div",{className:"text-white-dark",children:"ส่วนลด"}),s("div",{children:l(e==null?void 0:e.preview.discount)+" บาท"})]}):null,t("div",{className:"flex justify-between font-bold text-[22px] mt-4 data-responsive",children:[s("div",{className:"text-white-dark",children:"รวมเป็นเงิน"}),s("div",{className:"total",children:l((A=e==null?void 0:e.preview)==null?void 0:A.total)+" บาท"})]})]}),s("div",{className:"p-6",children:s("button",{className:"bg-black text-white w-full py-3 font-bold",onClick:()=>R(),children:"ชำระเงิน"})})]})]})]})};export{xe as default};
