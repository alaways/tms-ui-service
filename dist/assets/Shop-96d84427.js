import{u as v,a as N,r as s,s as L,i as w,c as F,j as e,f as i,g as A}from"./index-a90aa29c.js";import{F as _,a as y}from"./formik.esm-c4fd04ca.js";import{I as k}from"./InputField-d7971719.js";import{S as D}from"./SelectField-917481a8.js";import{t as C}from"./constant-e85f1578.js";import{c as E,a as j}from"./object-7405de1d.js";import{S as M}from"./sweetalert2.all-ca2d1030.js";import{b as z,c as I}from"./useAssetMutation-f9664723.js";import"./react-select.esm-b46d9623.js";import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./lodash-f7ec5310.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";const ee=()=>{const l=M.mixin(C);v();const c=N();s.useEffect(()=>{c(L("ทรัพย์สินร้านค้า"))});const a=w(t=>t.dataStore.assets),[p,m]=s.useState([]),[h,R]=s.useState([]),[u,q]=s.useState({id_shop:"",id:a.id,name:a.name}),{mutate:o,isLoading:f}=z({onSuccess:t=>{}}),{mutate:x,isLoading:b}=F(A.shopFindAll,{onSuccess:t=>{m(t.data.map(r=>({value:r.id,label:r.name})))},onError:()=>{}}),{mutate:d,isLoading:n}=I({onSuccess:t=>{t.code===200||t.statusCode===200?(l.fire({icon:"success",title:"บันทึกสำเร็จ",padding:"10px 20px"}),o({data:{id:a.id}})):l.fire({icon:"warning",title:t.message,padding:"10px 20px"})}});s.useEffect(()=>{x({data:{page:1,page_size:-1}}),o({data:{id:a.id}})},[]);const S=s.useCallback(t=>{n||d({data:{id_asset:a.id,id_shop:t.id_shop}})},[d,a]),g=E().shape({id_shop:j().required("กรุณาใส่ข้อมูลให้ครบ")});return b||f?e("div",{children:"Loading..."}):i("div",{className:"flex xl:flex-col flex-col gap-2.5",children:[e("div",{className:"panel px-6 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:e(_,{initialValues:u,onSubmit:S,enableReinitialize:!0,autoComplete:"off",validationSchema:g,children:t=>i(y,{className:"space-y-5 dark:text-white ",children:[e("div",{className:"text-lg font-semibold ltr:sm:text-left rtl:sm:text-right text-center",children:"พาร์ทเนอร์ร้านค้าธุรกิจ"}),e("div",{className:"input-flex-row",children:e(k,{label:"ชื่อสินทรัพย์",name:"name",type:"text",disabled:!0})}),e("div",{className:"input-flex-row",children:e(D,{label:"ร้านค้า",id:"id_shop",name:"id_shop",options:p,placeholder:"กรุณาเลือก",isSearchable:!0})}),e("div",{className:"input-flex-row",children:e("p",{className:"text-[11px] text-white-dark",children:"กลุ่มร้าน คือ การกำหนดผลตอบแทน ค่าตอบแทน และเงื่อนไขการเข้าร่วมซึ่งเป็นส่วนของหน่วยธุรกิจกำหนด"})}),i("button",{type:"submit",className:"btn !mt-6 w-full border-0 btn-primary",children:[n&&e("span",{className:"animate-spin border-2 border-white border-l-transparent rounded-full w-5 h-5 ltr:mr-4 rtl:ml-4 inline-block align-middle"}),"บันทึก"]})]})})}),e("div",{className:"panel px-6 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"table-responsive",children:i("table",{className:"table-striped table-hover",children:[e("thead",{children:i("tr",{children:[e("th",{children:"กลุ่มที่"}),e("th",{children:"ชื่อร้าน"})]})}),e("tbody",{children:h.map((t,r)=>i("tr",{children:[e("td",{children:r+1}),e("td",{children:t.shop.name})]},t.id))})]})})})})]})};export{ee as default};
