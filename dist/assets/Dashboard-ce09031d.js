import{a as g,u as A,r as n,s as E,c as y,f as t,j as s,y as T,F as f,g as S}from"./index-a90aa29c.js";import{S as v}from"./sweetalert2.all-ca2d1030.js";import{b as x}from"./formatDate-4e046265.js";import{P as N}from"./preLoading-b2445d9d.js";const I="admin",O=()=>{const i=g(),a=A(),l=localStorage.getItem(I),p=l?JSON.parse(l).role:null;n.useEffect(()=>{p!=="customer"&&a("/")},[p,a]);const[m,r]=n.useState(!0),[c,_]=n.useState([]);n.useEffect(()=>{i(E("Dashboard"))},[i]);const h=(e,o)=>{v.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3}).fire({icon:o,title:e,padding:"10px 20px"})},u=e=>{h(e,"error")},b=e=>{e.on_payment_process=="close_contract"?a("/apps/customer-payment/invoice-cc/"+e.id):a("/apps/customer-payment/checklist",{state:{contractData:e}})},{mutate:d}=y(S.customerPaymentFindAllGuest,{onSuccess:e=>{_(e.data),r(!1)},onError:()=>{u("Failed to fetch business units"),r(!1)}});return n.useEffect(()=>{r(!0),d({page:1,page_size:9999})},[d]),t("div",{className:"py-10 px-5 animate__animated",children:[t("div",{className:"flex mb-5",children:[s(T,{className:"w-8 h-8 mx-2"}),s("h5",{className:"font-semibold text-lg dark:text-white-light text-center",children:"สัญญาเช่าซื้อ"})]}),s("div",{className:"grid md:grid-cols-2 xl:grid-cols-4 gap-6",children:m?s(N,{}):c.length===0?s("div",{className:"font-semibold text-center pb-8",children:s("p",{className:"text-lg text-white-dark my-4",children:"ยังไม่พบข้อมูล"})}):c.map(e=>{var o;return t("div",{className:"panel h-full",children:[s("div",{className:"flex items-center justify-between border-b border-white-light dark:border-[#1b2e4b] -m-5 mb-5 p-5",children:s("div",{className:"flex flex-col w-full",children:t("div",{className:"font-semibold",children:[t("div",{className:"flex justify-between",children:[t("p",{className:"text-md text-dark mt-1",children:[" เลขที่สัญญา ",e.reference," "]}),e.status.id==5&&!e.is_closed&&e.is_due&&s("p",{className:"text-md text-red-600 mt-1",children:"รอชำระ"}),e.status.id==5&&!e.is_closed&&!e.is_due&&s("p",{className:"text-md text-green-600 mt-1",children:"ปกติ"})]}),s("p",{className:"text-sm text-white-dark mt-1",children:e.business_unit.name}),s("p",{className:"text-sm text-white-dark mt-1",children:e.asset.name}),t("p",{className:"text-sm text-white-dark mt-1",children:["งวดที่: ",e.ins_now]}),t("p",{className:"text-sm text-white-dark mt-1",children:["วันที่ครบกำหนด ",x(e==null?void 0:e.due_at)]})]})})}),e.status.id==8?s("div",{className:"font-semibold text-center pb-0 flex justify-center items-center p-0 h-[125px]",children:s("p",{className:"text-md text-gray-400 mt-3 mb-5",children:"อยุ่ระหว่างดำเนินการ"})}):e.status.id==5&&e.is_closed?s("div",{className:"font-semibold text-center pb-0 flex justify-center items-center p-0 h-[125px]",children:s("p",{className:"text-md text-gray-400 mt-3 mb-5",children:"ปิดสัญญา"})}):t("div",{className:"font-semibold text-center pb-8",children:[t(f,{children:[s("p",{className:"text-lg text-white-dark my-4",children:"ยอดที่ต้องชำระ"}),t("p",{className:"text-2xl text-red-600 mt-3 mb-5",children:[(o=e.preview)!=null&&o.amount?e.preview.total.toLocaleString():"0"," บาท"]})]}),s("div",{className:"w-full absolute bottom-0 flex items-center justify-between p-5 -mx-5",children:s("button",{type:"button",className:"btn btn-secondary btn-lg w-full border-0 bg-gradient-to-r from-[#3d38e1] to-[#1e9afe]",onClick:()=>b(e),children:"ดูรายละเอียด"})})]})]},e.id)})})]})};export{O as default};
