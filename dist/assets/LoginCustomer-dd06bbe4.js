import{a as E,u as f,r as l,s as y,c as T,j as e,f as s,t as v,aj as S,g as I}from"./index-a90aa29c.js";import{S as p}from"./sweetalert2.all-ca2d1030.js";import{t as h}from"./constant-e85f1578.js";import{f as u}from"./formatNumeric-862380d6.js";import{I as x}from"./IconLockDots-34b1aaf7.js";import{I as C}from"./IconPhoneCall-d077c5b2.js";const D="admin",L=()=>{const o=E(),g=f();l.useEffect(()=>{o(y("เข้าสู่ระบบ")),localStorage.clear()},[o]);const[n,m]=l.useState({phone_number:localStorage.getItem("phone_number")??"",password:localStorage.getItem("password")??"",fcm_token:localStorage.getItem("FCM_TOKEN")??""}),c=t=>{const{name:a,value:_}=t.target;if(a==="password"){const r=u(_,4);m(i=>({...i,[a]:r}))}else{const r=u(_,10);m(i=>({...i,[a]:r}))}},{mutate:d,isLoading:b}=T(I.loginCustomer,{onSuccess:t=>{if(t.statusCode===200||t.code===200){const a={uuid:t.data.uuid,id:t.data.id,name:t.data.name,email:t.data.email,access_token:t.data.access_token,role:t.data.role};o(S(a)),localStorage.setItem(D,JSON.stringify(a)),g("/apps/customer-payment/list")}else p.mixin(h).fire({icon:"error",title:(t==null?void 0:t.message)??"ข้อมูลไม่ถูกต้องโปรดลองอีกครั้ง !",padding:"10px 20px"})},onError:t=>{p.mixin(h).fire({icon:"error",title:(t==null?void 0:t.message)??"ข้อมูลไม่ถูกต้องโปรดลองอีกครั้ง",padding:"10px 20px"})}}),A=l.useCallback(t=>{if(t.preventDefault(),!n.phone_number||!n.password){p.fire({icon:"info",title:"กรุณากรอกเบอร์โทรศัพท์และเลข 4 ตัวท้ายบัตรประชาชน!",padding:"10px 20px"});return}d({data:{phone_number:n.phone_number,password:n.password}})},[n,d]);return b?e("div",{children:"Loading..."}):s("div",{children:[e("div",{className:"absolute inset-0"}),e("div",{className:"relative flex min-h-screen items-center justify-center bg-cover bg-center bg-no-repeat px-6 py-10 bg-[#002a41] dark:bg-[#060818] sm:px-16",children:s("div",{className:"relative flex w-full max-w-[1502px] flex-col justify-between overflow-hidden rounded-md bg-white lg:min-h-[758px] lg:flex-row lg:gap-10 xl:gap-0",children:[e("div",{className:"relative hidden w-full items-center justify-center bg-[#fffff] p-5 lg:inline-flex lg:max-w-[835px] xl:-ms-6 border-r-1 border-solid border-[#696969]",children:e("div",{className:"",children:e("div",{className:"w-48 block lg:w-72 ms-10",children:e("img",{src:`${v.logo.CustomerLogo}`,alt:"Logo",className:"w-full"})})})}),e("div",{className:"relative flex w-full flex-col items-center justify-center gap-6 px-4 pb-16 pt-6 sm:px-6 lg:max-w-[667px]",children:s("div",{className:"w-full max-w-[440px] lg:mt-16",children:[s("div",{className:"mb-10",children:[e("h1",{className:"text-3xl font-extrabold uppercase !leading-snug text-[#002a41] md:text-4xl",children:"ล็อกอิน"}),s("p",{className:"text-base font-normal leading-normal text-white-dark",children:["ใช้ ",e("span",{className:"text-themePrimary",children:"เบอร์โทรศัพท์"}),"และ ",e("span",{className:"text-themePrimary",children:"รหัสผ่าน"}),"เพื่อเข้าสู่ระบบ"]})]}),s("form",{className:"space-y-5 dark:text-white",onSubmit:A,children:[s("div",{children:[e("label",{htmlFor:"phone_number",children:"เบอร์โทรศัพท์"}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"phone_number",name:"phone_number",type:"text",value:n.phone_number,onChange:c,placeholder:"กรอกเบอร์โทรศัพท์",className:"form-input ps-10 placeholder:text-white-dark"}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(C,{fill:!0})})]})]}),s("div",{children:[e("label",{htmlFor:"password",children:"รหัสผ่าน"}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"password",name:"password",type:"text",value:n.password,onChange:c,placeholder:"กรอกเลข 4 ตัวท้ายบัตรประชาชน",className:"form-input ps-10 placeholder:text-white-dark"}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(x,{fill:!0})})]})]}),e("button",{type:"submit",className:"btn bg-themePrimary text-lg font-light text-white !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"เข้าสู่ระบบ"})]})]})})]})})]})};export{L as default};
