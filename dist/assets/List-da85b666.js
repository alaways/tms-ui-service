import{a as z,u as X,r as a,s as Q,b as Z,c as u,j as t,f as r,v as $,g as h}from"./index-a90aa29c.js";import{c as J,a as C}from"./object-7405de1d.js";import{T as ee}from"./tippy-react.esm-150a8dd6.js";import{F as te,a as se}from"./formik.esm-c4fd04ca.js";import{I as n}from"./InputField-d7971719.js";import{S as y}from"./SelectField-917481a8.js";import{I as ae}from"./IconEdit-bf2b08f0.js";import{Q as re}from"./index-2f30bf27.js";import{P}from"./config-8de56c22.js";import{s as d}from"./showNotification-b9615e49.js";import{I as ne}from"./IconX-54a3093e.js";import{n as i}from"./formatNumeric-862380d6.js";/* empty css              */import{q as A,_ as D}from"./transition-d4ca4cfa.js";import"./_defineProperty-6dbd93ca.js";import"./_baseIsEqual-06123cd3.js";import"./isObjectLike-b76e75a8.js";import"./isSymbol-15555f2d.js";import"./react-select.esm-b46d9623.js";import"./createSuper-98fcd92d.js";import"./floating-ui.dom-0aeb9e8a.js";import"./lodash-f7ec5310.js";import"./sweetalert2.all-ca2d1030.js";import"./keyboard-f171a3e5.js";import"./use-is-mounted-22b05dcc.js";import"./bugs-a60d55c3.js";const U={id:null,name:"Rate",id_shop_group:null,id_business_unit:"",business_unit:{},inr_3:0,inr_4:0,inr_5:0,inr_6:0,inr_7:0,inr_8:0,inr_9:0,inr_10:0,inr_11:0,inr_12:0,is_active:!0},O="admin",Ue=()=>{const b=z(),E=X();a.useEffect(()=>{b(Q("รายการผลตอบแทน")),b(Z(["bu","/apps/shop-group/list"]))},[b]);const S=localStorage.getItem(O),f=S?JSON.parse(S).role:null;a.useEffect(()=>{f!=="admin"&&f!=="business_unit"&&E("/")},[f,E]);const[T,o]=a.useState(!1),[v,M]=a.useState(U),[k,L]=a.useState([]),[w,H]=a.useState([]),[l,N]=a.useState(1),[p,j]=a.useState(P[0]),[F,G]=a.useState(0),[m,V]=a.useState(""),K=J().shape({id_business_unit:C(),id_shop_group:C().nullable().required("กรุณาใส่ข้อมูลให้ครบ")}),{mutate:g}=u(h.shopGroupFindAll,{onSuccess:e=>{H(e.data.list.map(s=>({value:s.id,label:s.name,business_unit:s.business_unit})))},onError:()=>{console.error("Failed to fetch asset type data")}}),W=(e,s)=>{g({data:{query:s,page:1,pageSize:10}})},{mutate:_}=u(h.interestRateFindAll,{onSuccess:e=>{L(e.data.list),G(e.data.total)},onError:e=>{console.error("Failed to fetch interest rate data",e)}});a.useEffect(()=>{g({page:l,page_size:-1}),_({data:{page:l,page_size:p,query:m}})},[l,p,g,_,m]);const{mutate:I}=u(h.interestRateCreate,{onSuccess:e=>{e.statusCode===200||e.code===200?(d("เพิ่มข้อมูลสำเร็จ","success"),o(!1),_({data:{page:l,page_size:p,query:m}})):d(e.message,"error")},onError:e=>{d(e.message,"error")}}),{mutate:R}=u(h.interestRateUpdate,{onSuccess:e=>{e.statusCode===200||e.code===200?(d("แก้ไขข้อมูลสำเร็จ","success"),o(!1),_({data:{page:l,page_size:p,query:m}})):d(e.message,"error")},onError:e=>{d(e.message,"error")}}),Y=a.useCallback(e=>{const s={...e,active:e.is_active};e.id?R({data:s,id:e.id}):I({data:s})},[I,R]),B=(e,s,c)=>{e.setFieldValue(c,s.value)},q=(e=null)=>{var s,c,x;M(e?{...e,id_shop_group:e.id_shop_group,id_business_unit:(c=(s=e==null?void 0:e.shop_group)==null?void 0:s.business_unit)==null?void 0:c.id,business_unit:(x=e==null?void 0:e.shop_group)==null?void 0:x.business_unit}:U),o(!0)};return t("div",{children:r("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[r("div",{className:"flex items-center justify-between flex-wrap gap-4 mb-4.5 px-5 ",children:[t("h2",{className:"text-xl",children:"ผลตอบแทน"}),t("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:r("div",{className:"relative",children:[t("input",{type:"text",placeholder:"ค้นหา",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:m,onChange:e=>V(e.target.value)}),t("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:t($,{className:"mx-auto"})})]})})]}),r("div",{className:"datatables pagination-padding",children:[O==="business_unit",t(re,{className:"whitespace-nowrap table-hover invoice-table",records:k,columns:[{accessor:"id",title:"ลำดับ",sortable:!1,render:(e,s)=>t("div",{children:s+1})},{accessor:"shop_group.name",title:"กลุ่มร้าน",sortable:!1,render:({shop_group:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:e==null?void 0:e.name})})},{accessor:"shop_group.business_unit.name",title:"หน่วยธุรกิจ",sortable:!1,render:({shop_group:e})=>{var s;return t("div",{className:"flex items-center font-normal",children:t("div",{children:(s=e==null?void 0:e.business_unit)==null?void 0:s.name})})}},{accessor:"inr_1",title:"1 เดือน",sortable:!1,render:({inr_1:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_2",title:"2 เดือน",sortable:!1,render:({inr_2:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_3",title:"3 เดือน",sortable:!1,render:({inr_3:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_4",title:"4 เดือน",sortable:!1,render:({inr_4:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_5",title:"5 เดือน",sortable:!1,render:({inr_5:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_6",title:"6 เดือน",sortable:!1,render:({inr_6:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_7",title:"7 เดือน",sortable:!1,render:({inr_7:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_8",title:"8 เดือน",sortable:!1,render:({inr_8:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_9",title:"9 เดือน",sortable:!1,render:({inr_9:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_10",title:"10 เดือน",sortable:!1,render:({inr_10:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_11",title:"11 เดือน",sortable:!1,render:({inr_11:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"inr_12",title:"12 เดือน",sortable:!1,render:({inr_12:e})=>t("div",{className:"flex items-center font-normal",children:t("div",{children:i(e)})})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:e=>t("div",{className:"flex gap-4 items-center w-max mx-auto",children:t(ee,{content:"แก้ไข",theme:"Primary",children:t("a",{className:"flex hover:text-info cursor-pointer active",onClick:()=>q(e),children:t(ae,{className:"w-4.5 h-4.5"})})})})}],page:l,totalRecords:F,recordsPerPage:p,highlightOnHover:!0,onPageChange:e=>N(e),recordsPerPageOptions:P,onRecordsPerPageChange:e=>{N(1),j(e)},paginationText:({from:e,to:s,totalRecords:c})=>`โชว์ ${e} ถึง ${s} ของ ${c} หน้าทั้งหมด`})]}),t(A,{appear:!0,show:T,as:a.Fragment,children:r(D,{as:"div",open:T,onClose:()=>o(!1),className:"relative z-[51]",children:[t(A.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t("div",{className:"fixed inset-0 bg-[black]/60"})}),t("div",{className:"fixed inset-0 overflow-y-auto",children:t("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:t(A.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r(D.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[t("button",{type:"button",className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:()=>o(!1),children:t(ne,{})}),t("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:v.id?"แก้ไข":"เพิ่ม"}),t("div",{className:"p-5",children:t(te,{initialValues:v,onSubmit:Y,enableReinitialize:!0,autoComplete:"off",validationSchema:K,children:e=>r(se,{className:"space-y-5 mb-7 dark:text-white custom-select",children:[t(y,{label:"หน่่วยธุรกิจ",id:"id_business_unit",name:"id_business_unit",options:[{label:e.values.business_unit.name,value:e.values.business_unit.id}],placeholder:"กรุณาเลือก",isSearchable:!0,disabled:!0}),t(y,{label:"กลุ่มร้าน",id:"id_shop_group",name:"id_shop_group",options:w,placeholder:"กรุณาเลือก",onChange:s=>B(e,s,"id_shop_group"),onInputChange:s=>W(e,s),isSearchable:!0}),r("div",{className:"input-flex-row",children:[t(n,{label:"1 เดือน",name:"inr_1",type:"number"}),t(n,{label:"2 เดือน",name:"inr_2",type:"number"})]}),r("div",{className:"input-flex-row",children:[t(n,{label:"3 เดือน",name:"inr_3",type:"number"}),t(n,{label:"4 เดือน",name:"inr_4",type:"number"})]}),r("div",{className:"input-flex-row",children:[t(n,{label:"5 เดือน",name:"inr_5",type:"number"}),t(n,{label:"6 เดือน",name:"inr_6",type:"number"})]}),r("div",{className:"input-flex-row",children:[t(n,{label:"7 เดือน",name:"inr_7",type:"number"}),t(n,{label:"8 เดือน",name:"inr_8",type:"number"})]}),r("div",{className:"input-flex-row",children:[t(n,{label:"9 เดือน",name:"inr_9",type:"number"}),t(n,{label:"10 เดือน",name:"inr_10",type:"number"})]}),r("div",{className:"input-flex-row",children:[t(n,{label:"11 เดือน",name:"inr_11",type:"number"}),t(n,{label:"12 เดือน",name:"inr_12",type:"number"})]}),t(y,{require:!0,label:"สถานะ",id:"is_active",name:"is_active",options:[{value:!0,label:"เปิด"},{value:!1,label:"ปิด"}],placeholder:"กรุณาเลือก",onChange:s=>{e.setFieldValue("is_active",s.value)},isSearchable:!1}),r("div",{className:"flex justify-end items-center mt-8",children:[t("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>o(!1),children:"ยกเลิก"}),t("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:v.id?"บันทึก":"เพิ่ม"})]})]})})})]})})})})]})})]})})};export{Ue as default};
